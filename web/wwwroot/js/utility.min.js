"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0,t=function(){};return{s:t,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){i=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function getUrlVars(){var s={};window.location.href.split("#")[0].replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){s[t]=n});return s}function ShowMessageBox(e){var t=document,n=t.getElementsByClassName("message-wrapper")[0];n.getElementsByClassName("message-close");t.querySelector(".message-container .message-inner").innerHTML=e,n.classList.remove("hidden"),setTimeout(function(){n.classList.add("hidden")},2e3)}!function(){var a=document;function t(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("tab-lnk")}),n=a.getElementById(e.getAttribute("href").replace("#","")),s=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("tab-dta")});[].forEach.call(s,function(e){e.classList.remove("active")}),[].forEach.call(t,function(e){e.classList.remove("active")}),n.classList.add("active"),e.classList.add("active"),a.dispatchEvent(new CustomEvent("tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}a.addEventListener("click",function(e){e.target.closest(".tab-lnk")&&(e.preventDefault(),t(e.target.closest(".tab-lnk")))},!1),a.addEventListener("tab-open",function(e){void 0!==e.detail&&e.detail.el&&t(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("tab-open",{cancelable:!0,detail:{el:document.querySelector('.tab-lnk[href="'+document.location.hash.replace("#","")+'"], .tab-lnk[href="'+document.location.hash+'"]')}}))}(),function(){(document.querySelectorAll(".panel-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),console.log("clicked"),n(t)},!1)});var a=document;function n(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("panel-tab")}),n=a.getElementById(e.getAttribute("href").replace("#","")),s=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("panel-tab-data")});[].forEach.call(s,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),n.classList.add("is-active"),e.classList.add("is-active"),a.dispatchEvent(new CustomEvent("panel-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}a.addEventListener("panel-tab-open",function(e){void 0!==e.detail&&e.detail.el&&n(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("panel-tab-open",{cancelable:!0,detail:{el:document.querySelector('.panel-tab[href="'+document.location.hash.replace("#","")+'"], .panel-tab[href="'+document.location.hash+'"]')}}))}(),function(){var r=document;function i(e){e.style.maxHeight=e.scrollHeight+20+"px"}function l(e){e.style.maxHeight=null,e.style.overflow="hidden",e.classList.remove("clps-o")}function n(t){t.classList.add("clps-o"),i(t);for(var e=t;e=e.parentElement.closest(".clps-o");)e.style.removeProperty("max-height");r.dispatchEvent(new CustomEvent("collapse-opened"));for(var n=t.parentElement.querySelector(".clps-o"),s=[];n;)n!==t&&n.nodeType===Node.ELEMENT_NODE&&s.push(n),n=n.nextElementSibling||n.nextSibling;for(var a=0;a<s.length;a++)l(s[a]);window.setTimeout(function(){for(var e=t.parentElement.closest(".clps-o");e;)i(e),e=e.parentElement.closest(".clps-o");t.classList.contains("clps-o")&&(t.style.overflow="visible")},300)}r.addEventListener("click",function(e){var t;e.target.closest('[data-toggle="clps"]')?null!=(t=r.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("clps-o")?l:n)(t):e.target.closest(".clps:not(.clps-o")&&n(e.target.closest(".clps:not(.clps-o"))}),r.addEventListener("change",function(t){if(t.target.closest(".clps-o")){for(var e=t.target.closest(".clps-o");e;)e.style.removeProperty("max-height"),e=e.parentElement.closest(".clps-o");window.setTimeout(function(){for(var e=t.target.closest(".clps-o");e;)i(e),e=e.parentElement.closest(".clps-o")},300)}}),r.addEventListener("clps-close",function(e){void 0!==e.detail&&l(e.detail.el)},!1),r.addEventListener("clps-open",function(e){void 0!==e.detail&&n(e.detail.el)},!1)}(),function(){var e=document;function t(){for(var e=document.getElementsByClassName("crsl"),t=0;t<e.length;t++)e[t].classList.contains("crsl-p")||new n(e[t])}function n(e){this.target=e,this.next=e.getElementsByClassName("crsl-next")[0],this.prev=e.getElementsByClassName("crsl-prev")[0],this.dots=e.getElementsByClassName("crsl-dot"),this.slides=e.getElementsByClassName("crsl-itm"),this.target.classList.add("crsl-p"),this.next.addEventListener("click",this.showSlides.bind(this,1),!1),this.prev.addEventListener("click",this.showSlides.bind(this,-1),!1);for(var t=0;t<this.dots.length;t++)this.dots[t].addEventListener("click",this.showSlides.bind(this,0),!1)}var i=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};n.prototype={showSlides:function(e,t){var n,s,a=this.slides,r=this.dots;i(function(){if(t.target.matches(".crsl-dot"))e=t.target.getAttribute("slide");else{for(n=0;n<a.length;n++)if(0<a[n].offsetHeight&&0<a[n].offsetWidth){s=a[n];break}e+=Array.prototype.indexOf.call(a,s)}for((e=e>=a.length?0:e)<0&&(e=a.length-1),n=0;n<a.length;n++)a[n].style.display="none";for(n=0;n<r.length;n++)r[n].classList.remove("active");a[e].style.display="block",r[e].classList.add("active")})}},t(),e.addEventListener("load-carousel",function(){t()})}(),function(){function e(){setTimeout(function(){for(var e=o.querySelectorAll("table.sort"),t=0;t<e.length;t++){var n=e[t];if(!n.querySelectorAll("th .icon-sm").length)for(var s=n.getElementsByTagName("th"),a=0;a<s.length;a++){var r=s[a];r.style.cursor="pointer",r.innerHTML+='<svg class="icon-sm" viewBox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"/></svg>',r.parentElement.style.whiteSpace="nowrap",function(s){s.addEventListener("click",function(){var e=this.closest("table.sort"),t=Array.from(e.querySelectorAll("tr")).slice(1).sort(i(l(s)-1));this.asc=!this.asc,this.asc||(t=t.reverse());for(var n=0;n<t.length;n++)e.append(t[n])})}(r)}}},0)}function i(n){return function(e,t){e=a(e,n).replace("$",""),t=a(t,n).replace("$","");return/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(e)&&/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(t)?new Date(e)-new Date(t):s(e)&&s(t)?e-t:e.toString().localeCompare(t)}}function l(e){if(!e)return-1;for(var t=0;e;)t++,e=e.previousElementSibling;return t}var o=document,s=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},a=function(e,t){return e.getElementsByTagName("td")[t].textContent};o.addEventListener("ajax",function(){e()}),e()}(),function(){var n,s,a=document,t=0,r=0;a.addEventListener("mousedown",function(e){e.target.closest(".drg-hdl")&&(s=e.target.closest(".drg"),n=s.cloneNode(!0),s.classList.add("drag-source"),n.classList.add("drag"),n.style.width=s.offsetWidth+"px",t=e.clientY-getOffset(s).top,r=e.clientX-getOffset(s).left,s.parentElement.style.position="relative",s.parentElement.appendChild(n),n.style.top=e.clientY-t+"px",n.style.left=e.clientX-r+"px",i(e))},!1);var i=function(e){(e=e||window.event).preventDefault(),a.addEventListener("mouseup",o),a.addEventListener("mousemove",l)},l=function(e){(e=e||window.event).preventDefault(),n.style.top=e.clientY-t+"px",n.style.left=e.clientX-r+"px",a.dispatchEvent(new CustomEvent("dragMove",{cancelable:!0,detail:{el:n,x:e.clientX,y:e.clientY}}))},o=function e(t){a.dispatchEvent(new CustomEvent("dragEnd",{cancelable:!0,detail:{el:n,x:t.clientX,y:t.clientY}})),s.parentElement.removeChild(s),n.classList.remove("drag"),a.removeEventListener("mouseup",e),a.removeEventListener("mousemove",l)}}(),function(){var e=document,t=debounce(function(){setTimeout(function(){for(var e=document.getElementsByClassName("atlas-chart"),t=0;t<e.length;t++){var n=e[t].getElementsByTagName("script")[0].innerHTML;0<e[t].getElementsByClassName("chart").length&&e[t].removeChild(e[t].getElementsByClassName("chart")[0]),0<e[t].getElementsByClassName("ajaxLoader").length&&e[t].removeChild(e[t].getElementsByClassName("ajaxLoader")[0]);var s=e[t].clientWidth;0<s&&e[t].appendChild(new a(n,s))}},0)},250),n=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)},a=function(e,t){var n="";try{n=JSON.parse(e)}catch(e){}var s,a,r,i=n.height||400,l=n.options,o=n.data,d=n.axis,c="",u=t||800,m=[],p=0,h={},v=0,f=["one","two","three","four","five"];for(M in this.table=document.createElement("table"),o)-1==m.indexOf(o[M].axis)&&m.push(o[M].axis);var g,y=70*(Math.floor(m.length/2)+m.length%2),e=1<m.length?70*Math.floor(m.length/2):40,b=u-y-e;if(this.table.classList.add("chart"),this.table.style.height=i+"px",this.table.style.marginRight=e+"px",this.table.style.marginLeft=y+"px",this.table.style.width=b+"px",this.table.innerHTML+='<caption class="chart-caption">'+n.title+"</caption>",l&&l.hasOwnproperty("legend")&&"false"!==l.legend||!l){for(M in this.thead=document.createElement("thead"),this.thead.classList.add("chart-head"),o)(g=document.createElement("th")).innerHTML+='<span class="chart-headClr '+f[M]+'"></span>'+o[M].title,this.thead.appendChild(g);this.table.appendChild(this.thead)}for(M in this.table.addEventListener("mouseover",this.mouseover.bind(this)),this.table.addEventListener("mouseout",this.mouseout.bind(this)),o)p=Math.max(p,o[M].data.length);for(a in r=b/b/p*100,m){var E=0,L=0;for(M in o)if(o[M].axis===m[a])for(s in(A=o[M]).data)E=Math.max(E,parseFloat(A.data[s].data)),L=Math.min(L,parseFloat(A.data[s].data));for(M in o)o[M].axis==m[a]&&(o[M].range=E-L,o[M].max=E,o[M].min=L);h[a]=E-L}for(M in o)n.lastlinePointY=null,n.lastlinePointX=null,v+="bar"==o[M].type?1:0;for(var c="<tbody>",w=0;w<p;w++){var x=o[0].data[w].title+": ";for(M in o)x+=o[M].data[w].data+" "+d[o[M].axis].title+"; ";c+='<tr class="chart-col" style="left:'+r*w+"%;width:calc("+r+'% - 10px);">';var q=0,S=0;for(M in o){var A=o[M],T=0==parseFloat(A.data[w].data)?0:parseFloat(A.data[w].data)/A.range*100,S=Math.max(S,T);0==M&&(c+='<th class="chart-xAxisTitle" scope="row" style="left:'+(r/100*b/2-26-15)+'px">'+A.data[w].title);var H=T/100*i<30?'style="margin-top:-22px"':"";"bar"==A.type?c+='<td class="chart-'+A.type+" "+f[M]+'" style="height:'+T+"%;width:"+("calc("+100/v+"% - 5px)")+";left:"+q/v*100+'%"><p '+H+"></p></td>":"line"==A.type&&(c+='<td class="chart-'+A.type+" "+f[M]+'" style="height:'+T+'%">',c+="<p "+H+"></p>",!A.lastlinePointY&&0!=A.lastlinePointY||(t=r/100*b,H=180*Math.atan2(T/100*i-A.lastlinePointY,-t)/Math.PI,c+='<div style="width:'+Math.sqrt(Math.pow(t,2)+Math.pow(T/100*i-A.lastlinePointY,2))+"px;transform: rotate("+H+'deg);"></div>'),A.lastlinePointY=T/100*i),"bar"==A.type&&q++,c+="</td>"}c+='<td class="chart-tooltip" data-tooltip="'+x+'" style="height:calc('+S+'% + 20px)"></td>',c+="</tr>"}for(M in this.table.innerHTML+=c+"</tbody>",c='<caption class="chart-ticks">',m)N=55*(Math.floor(M/2)+1),I=M%2==1?"right":"left",void 0!==d[a]&&(c+='<div class="chart-yAxisTitle '+I+'" style="'+I+":-"+N+'px"><p>'+d[M].title+"</p></div>");for(var C=parseInt(i/50),M=1;M<=C;M++){for(s in c+='<div class="chart-ticksTick'+(1==M?" first ":"")+(M==C?" last ":"")+'">',h){var R,N=30*(Math.floor(s/2)+1),I=s%2==1?"right":"left";0<h[s]&&(R=(R=h[s]-h[s]/C*(M-1))<10?R.toFixed(2):Math.round(R),"left"==I&&(N+=parseFloat(3*(R.toString().length-1))),c+='<p style="'+I+":-"+N+'px">'+R+"</p>")}c+="</div>"}return this.table.innerHTML+="</tbody>"+(c+="</table>"),this.table};a.prototype={mouseover:function(e){var t=event.target;n(function(){hover=Array.prototype.slice.call(t.closest("table").getElementsByClassName("hover"));for(var e=0;e<hover.length;e++)hover[e].classList.remove("hover");if(t.closest(".chart-head th")&&t.closest(".chart-head th").getElementsByTagName("span")&&null!=t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value){lines=Array.prototype.slice.call(t.closest("table").getElementsByClassName("chart-line "+t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(e=0;e<lines.length;e++)lines[e].classList.add("hover");bars=Array.prototype.slice.call(t.closest("table").getElementsByClassName("chart-bar "+t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(e=0;e<bars.length;e++)bars[e].classList.add("hover")}})},mouseout:function(e){var t=event.target;n(function(){hover=Array.prototype.slice.call(t.closest("table").getElementsByClassName("hover"));for(var e=0;e<hover.length;e++)hover[e].classList.remove("hover")})}},t(),e.addEventListener("load-charts",function(){t()}),e.addEventListener("mdl-open",function(){t()}),e.addEventListener("tab-opened",function(){t()}),e.addEventListener("collapse-opened",function(){t()}),window.addEventListener("resize",function(){t()})}(),function(){function e(){for(var e=n.querySelectorAll('input[type="nice-input"], textarea[type="nice-input"]'),t=0;t<e.length;t++)new s(e[t],t)}var n=document;function s(e,t){this.hiddenInput=n.createElement(e.tagName),this.hiddenInput.style.display="none",this.hiddenInput.setAttribute("tabindex",-1),this.hiddenInput.setAttribute("id",e.getAttribute("id")),this.hiddenInput.setAttribute("name",e.getAttribute("name")),this.hiddenInput.setAttribute("inputId",t),this.hiddenInput.setAttribute("value",e.getAttribute("value")),this.hiddenInput.setAttribute("multiple","true"),this.span=n.createElement("div"),this.span.setAttribute("class",e.getAttribute("class")),this.span.classList.add("input-span"),this.span.setAttribute("contenteditable","true"),this.span.setAttribute("data-initial-content",e.getAttribute("data-initial-content")),this.span.textContent=e.getAttribute("value"),this.wrapper=n.createElement("div"),this.wrapper.classList.add("input-newWrapper"),this.wrapper.appendChild(this.span),this.wrapper.appendChild(this.hiddenInput),e.classList.contains("submit")&&(this.button=n.createElement("button"),this.button.classList.add("input-submit"),this.button.setAttribute("type","submit"),this.button.setAttribute("name","submit"),this.button.innerHTML="<span class='fas fa-paper-plane'></span>",this.wrapper.appendChild(this.button)),this.container=n.createElement("div"),this.container.classList.add("input-ctn"),e.classList.contains("slim")&&this.container.classList.add("slim"),this.container.appendChild(this.wrapper),e.parentNode.replaceChild(this.container,e),this.span.addEventListener("focus",this.addFocus.bind(this),!1),this.span.addEventListener("blur",this.addBlur.bind(this),!1),this.span.addEventListener("input",this.updateInput.bind(this),!1),this.span.addEventListener("keypress",this.updateInput.bind(this),!1),this.span.addEventListener("paste",this.updateInput.bind(this),!1),this.span.addEventListener("change",this.updateInput.bind(this),!1)}var a=n.requestAnimationFrame||n.setImmediate||function(e){return setTimeout(e,0)};s.prototype={addFocus:function(e){var t=this.wrapper;this.span;a(function(){t.classList.add("input-newWrapper-focus")})},addBlur:function(e){var t=this.wrapper,n=this.span;a(function(){t.classList.remove("input-newWrapper-focus"),n.innerHTML=n.innerHTML.replace(/<div>/gi,"<br>").replace(/<\/div>/gi,"")})},updateInput:function(e){var t=this.span,n=this.hiddenInput;a(function(){n.value=t.innerHTML.replace(/<div>/gi,"<br>").replace(/<\/div>/gi,"")})}},e(),n.addEventListener("ajax",function(){e()}),n.addEventListener("build-inputs",function(){e()})}(),function(){var a=document;a.addEventListener("submit",function(e){var t,n,s;e.target.matches(".comments-form")&&(e.preventDefault(),t=e.target,n=a.getElementsByClassName("comments")[0],e=serialize(t),n.style.opacity=0,n.style.transition="opacity 0.1s ease-in-out",(s=new XMLHttpRequest).open("post",t.getAttribute("action")+"&"+e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){n.innerHTML=s.responseText,n.style.opacity=1,a.dispatchEvent(new CustomEvent("build-inputs"))})},!1)}(),function(){var u,r=document;function b(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function t(e){if(void 0!==e)new s(e);else for(var t=r.querySelectorAll('[type="dynamic-dropdown"]'),n=0;n<t.length;n++)new s(t[n])}function s(e){this.ddCntr=r.createElement("div"),this.ddWrp=r.createElement("div"),this.type=e.tagName,this.ddHdn=r.createElement(this.type),this.ddPhdr=r.createElement("div"),this.ddInpt=r.createElement("div"),this.ddVsbl=r.createElement("input"),this.ddRslts=r.createElement("div"),this.ddCntr.classList.add("dd-cntr"),this.ddWrp.classList.add("dd-wrp"),e.classList.contains("slim")&&this.ddWrp.classList.add("slim"),this.ddHdn.classList.add("dd-hdn"),this.ddPhdr.classList.add("dd-phdr"),this.ddInpt.classList.add("dd-inpt"),this.ddVsbl.classList.add("dd-vsbl"),this.ddRslts.classList.add("dd-rslts"),this.ddRslts.setAttribute("ss-container","true"),this.ddCntr.setAttribute("tabindex","0"),this.ddHdn.setAttribute("tabindex","-1"),this.ddHdn.setAttribute("multiple","true"),e.hasAttribute("id")&&this.ddHdn.setAttribute("id",e.getAttribute("id")),e.hasAttribute("name")&&this.ddHdn.setAttribute("name",e.getAttribute("name")),e.hasAttribute("value")&&this.ddHdn.setAttribute("value",e.getAttribute("value")),this.ddVsbl.setAttribute("autocomplete","off"),e.hasAttribute("search-area")&&this.ddVsbl.setAttribute("search-area",e.getAttribute("search-area")),this.searchArea=e.getAttribute("search-area"),e.hasAttribute("visible-value")&&this.ddVsbl.setAttribute("value",e.getAttribute("visible-value")),e.hasAttribute("required")&&this.ddVsbl.setAttribute("required",e.getAttribute("required")),e.hasAttribute("method")&&this.ddVsbl.setAttribute("method",e.getAttribute("method")),this.method=e.getAttribute("method"),e.hasAttribute("value")||(this.ddPhdr.innerHTML=e.hasAttribute("placeholder")?e.getAttribute("placeholder"):"type to search.."),this.ddPhdr.setAttribute("data-placeholder",e.hasAttribute("placeholder")?e.getAttribute("placeholder"):"type to search.."),e.hasAttribute("data-head")&&this.ddWrp.setAttribute("data-head",e.getAttribute("data-head")),this.ddCntr.appendChild(this.ddWrp),this.ddWrp.appendChild(this.ddInpt),this.ddWrp.appendChild(this.ddHdn),this.ddInpt.appendChild(this.ddRslts),this.ddInpt.appendChild(this.ddVsbl),this.ddInpt.appendChild(this.ddPhdr);for(var t=Array.prototype.slice.call(e.getElementsByTagName("option")),n=0;n<t.length;n++){this.ddHdn.appendChild(t[n]);var s=document.createElement("div");s.classList.add("dd-itm"),t[n].classList.contains("group")&&s.classList.add("group");var a="";e.hasAttribute("search-area")&&"UserSearchMail"==e.getAttribute("search-area")&&(a='<div class="mlbx-usrDrp"><i class="fas fa-angle-down fa-sm"></i><div class="mlbx-usrDrpCtr"><div class="mlbx-usrDrpItm mail-new-message" data-from="Analytics" data-fromid="45781">New Mail</div>'+(t[n].classList.contains("group")?'<div class="mlbx-usrDrpItm">Expand Group</div>':"")+'<div class="separator"></div><div class="mlbx-usrDrpItm"><a class="ajax" href="/users?id=45781">Open Profile</a></div></div></div>'),s.innerHTML=t[n].innerHTML+a,this.ddWrp.insertBefore(s,this.ddWrp.firstChild)}e.parentNode.replaceChild(this.ddCntr,e),this.flLoad(),this.stW(),this.fcsTmr=null,this.ddVsbl.addEventListener("input",this.search.bind(this)),this.ddVsbl.addEventListener("input",this.stW.bind(this)),this.ddVsbl.addEventListener("setWidth",this.stW.bind(this)),document.addEventListener("tab-opened",this.stW.bind(this)),this.ddVsbl.addEventListener("focus",this.search.bind(this)),this.ddVsbl.addEventListener("keydown",this.keydn.bind(this)),this.ddCntr.addEventListener("click",this.click.bind(this),!0),this.ddCntr.addEventListener("focusout",this.unfcs.bind(this)),this.ddCntr.addEventListener("blur",this.unfcs.bind(this)),this.ddRslts.addEventListener("mouseover",this.rhov.bind(this))}window.addEventListener("blur",function(e){if(document.activeElement)try{document.activeElement.blur()}catch(e){}var t=document.querySelector(":focus");if(t)try{t.blur()}catch(e){}});var E=r.requestAnimationFrame||r.setImmediate||function(e){return setTimeout(e,0)};s.prototype={keydn:function(e){var t,n,s,a=e.keyCode,r=e,i=this.type,l=this.ddHdn,o=this.ddVsbl,d=this.ddRslts,c=this.ddPhdr,u=this.ddWrp,m=this.ddInpt;if(8==a&&0==o.value.length&&"SELECT"==i&&m.previousElementSibling)E(function(){t=l.getElementsByTagName("option");for(var e=0;e<t.length;e++)if(t[e].childNodes[0].nodeValue==m.previousElementSibling.childNodes[0].nodeValue){t=t[e],n=d.querySelector('.dd-rslt.hidden[value="'+t.getAttribute("value")+'"]'),t.parentNode.removeChild(t),n&&n.classList.remove("hidden");break}m.parentElement.removeChild(m.previousElementSibling)});else if(37==a&&"SELECT"==i&&m.previousElementSibling&&m.previousElementSibling.matches(".dd-itm")&&0==o.selectionStart)E(function(){c.innerHTML=c.getAttribute("data-placeholder"),m.parentElement.insertBefore(m,m.previousElementSibling),setTimeout(function(){o.focus()},0)});else if(39==a&&"SELECT"==i&&m.nextElementSibling&&m.nextElementSibling.matches(".dd-itm")&&o.selectionStart==o.value.length)E(function(){b(m,m.nextElementSibling),setTimeout(function(){o.focus()},0)});else if(46==a&&"SELECT"==i&&m.nextElementSibling&&m.nextElementSibling.matches(".dd-itm")&&o.selectionStart==o.value.length)E(function(){t=l.getElementsByTagName("option");for(var e=0;e<t.length;e++)if(t[e].innerHtml==m.nextElementSibling.innerHTML){t=t[e],n=d.querySelector('.dd-rslt.hidden[value="'+t.getAttribute("value")+'"]'),t.parentNode.removeChild(t),n&&n.classList.remove("hidden");break}0<d.querySelectorAll(".dd-rslt:not(.hidden):not(.disabled)").length&&null!==d.getElementsByClassName("disabled")&&d.getElementsByClassName("disabled")[0].parentElement.removeChild(d.getElementsByClassName("disabled")[0]),m.parentElement.removeChild(m.nextElementSibling)});else if(13==a||3==a)e.preventDefault(),E(function(){0<d.getElementsByClassName("active").length&&(d.getElementsByClassName("active")[0].click(),u.classList.remove("dd-wrp-show"),d.style.removeProperty("display")),setTimeout(function(){o.focus()},0)});else if(9==a){r.preventDefault(),0<d.getElementsByClassName("active").length?d.getElementsByClassName("active")[0].click():u.classList.add("dd-wrp-invalid");for(var p=document.querySelectorAll('input, select, div[contenteditable="true"]'),h=[],v=0;v<p.length;v++)0==function(e){e=window.getComputedStyle(e);return"none"===e.display||"hidden"===e.visibility}(p[v])&&h.push(p[v]);r.shiftKey?0==Array.prototype.indexOf.call(h,o)?setTimeout(function(){h[h.length-1].focus()},0):setTimeout(function(){h[Array.prototype.indexOf.call(h,o)-1].focus()},0):Array.prototype.indexOf.call(h,o)==h.length-1?setTimeout(function(){h[0].focus()},0):setTimeout(function(){h[Array.prototype.indexOf.call(h,o)+1].focus()},0)}else 38==a?(e.preventDefault(),E(function(){n=d.getElementsByClassName("active")[0],(s=n?(t=Array.prototype.indexOf.call(n.parentElement.children,n),n.classList.remove("active"),0==t?n.parentElement.children[n.parentElement.children.length-1]:n.previousElementSibling):d.children[d.children.length-1]).classList.add("active"),s.offsetTop<s.parentElement.scrollTop?s.parentElement.scrollTop-=s.clientHeight:s.offsetTop>s.parentElement.scrollTop+s.parentElement.clientHeight+3&&(s.parentElement.scrollTop=s.offsetTop+3)})):40==r.keyCode&&(e.preventDefault(),E(function(){n=d.getElementsByClassName("active")[0],(s=n?(t=Array.prototype.indexOf.call(n.parentElement.children,n),n.classList.remove("active"),t==n.parentElement.children.length-1?n.parentElement.children[0]:n.nextElementSibling):d.children[0]).classList.add("active"),s.offsetTop+s.clientHeight>s.parentElement.scrollTop+s.parentElement.clientHeight?s.parentElement.scrollTop+=s.clientHeight:s.offsetTop+s.clientHeight<s.parentElement.scrollTop+3&&(s.parentElement.scrollTop=s.offsetTop-3)}))},rhov:function(e){var t,n=this.ddRslts,s=e.target.closest(".dd-rslt");E(function(){t=n.getElementsByClassName("active");for(var e=0;e<t.length;e++)t[e].classList.remove("active");s&&s.classList.add("active")})},flLoad:function(e){this.ddVsbl,this.ddCntr;var s,a,r=this.ddRslts,t=this.ddHdn,i=(this.ddPhdr,"/Search?handler=ValueList&s="+this.searchArea),l="",o=[];E(function(){function n(e){if(0===(e=JSON.parse(e)).length)r.innerHTML='<div class="dd-rslt disabled">No matches found</div>';else{for(var t=0;t<e.length;t++){a=e[t];var n="";-1!==o.indexOf(a.ObjectId)&&(n="hidden");var s=a.ObjectId||a.Description;l+='<div class="dd-rslt '+n+'" value="'+s+'">'+a.Name+"</div>",t==e.length-1&&(r.innerHTML=l)}r.querySelectorAll(".dd-rslt:not(.hidden)").length<1&&(r.innerHTML+='<div class="dd-rslt disabled">No matches found</div>')}if(10<e.length){r.style.height=Math.min(23*e.length+8,238)+"px";try{SimpleScrollbar.initAll()}catch(e){}}}[].forEach.call(t.getElementsByTagName("option"),function(e){o.push(e.getAttribute("value"))}),cache.exists(i)?n(cache.get(i)):((s=new XMLHttpRequest).open("post",i,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){var e=s.responseText;n(e);var t=null!=s.getResponseHeader("Cache-Control")?(s.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;t&&cache.set(i,e,t)})})},unfcs:function(e){var t=this.ddVsbl,n=this.ddCntr,s=this.ddRslts,a=this.ddPhdr,r=this.ddWrp,i=this.ddHdn;E(function(){null!=e.relatedTarget&&e.relatedTarget.closest(".dd-cntr")==n||(r.classList.remove("dd-wrp-focus"),r.classList.remove("dd-wrp-show"),s.style.removeProperty("display"),t.value.length<1&&a.style.removeProperty("display"),i.hasAttribute("value")?r.classList.remove("dd-wrp-invalid"):r.classList.add("dd-wrp-invalid"))})},click:function(c){var u=this.ddVsbl,m=this.type,p=this.ddRslts,h=this.method,v=this.ddHdn,f=this.ddCntr,g=(this.stW,this.ddInpt),y=this.ddWrp;E(function(){if(y.classList.remove("dd-wrp-invalid"),y.classList.add("dd-wrp-focus"),c.target.closest(".dd-rslt")){var e,t,n=c.target.closest(".dd-rslt"),s=n.innerHTML;"SELECT"==m?(u.value="",void 0!==h&&!1!==h&&null!==h?(n.classList.add("hidden"),p.querySelector(".dd-rslt:not(.hidden)")||(p.innerHTML='<div class="dd-rslt disabled">No matches found</div>')):p.innerHTML="",t=e="",u.hasAttribute("search-area")&&"UserSearchMail"==u.getAttribute("search-area")&&(e=n.classList.contains("group")?"group":"",t='<div class="mlbx-usrDrp"><i class="fas fa-angle-down fa-sm"></i><div class="mlbx-usrDrpCtr"><div class="mlbx-usrDrpItm mail-new-message" data-from="Analytics" data-fromid="45781">New Mail</div>'+(n.classList.contains("group")?'<div class="mlbx-usrDrpItm">Expand Group</div>':"")+'<div class="separator"></div><div class="mlbx-usrDrpItm"><a class="ajax" href="/users?id=45781">Open Profile</a></div></div></div>'),g.insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e+'">'+s+t+"</div>"),v.innerHTML+='<option class="'+e+'" selected="selected" value="'+n.getAttribute("value")+'">'+s+"</option>",v.dispatchEvent(new CustomEvent("change",{bubbles:!0})),setTimeout(function(){u.focus()},0)):(v.setAttribute("value",n.getAttribute("value")),n.classList.contains("group")?(u.setAttribute("group","true"),v.setAttribute("group","true"),"/users"==window.location.pathname.toLowerCase()&&u.closest("form").setAttribute("action","/groups")):(u.removeAttribute("group"),v.removeAttribute("group"),"/groups"==window.location.pathname.toLowerCase()&&u.closest("form").setAttribute("action","/users")),u.value=s,u.setAttribute("value",s),u.dispatchEvent(new CustomEvent("setWidth")),f.blur(),p.style.removeProperty("height"),p.style.removeProperty("display"),"fullList"!==h&&(p.innerHTML=""),v.dispatchEvent(new CustomEvent("change",{bubbles:!0})))}else{if(y.querySelector(".dd-itm")&&null==c.target.closest(".mlbx-usrDrp")){for(var a=y.querySelectorAll(".dd-itm"),r=[],i=c.pageX,l=c.pageY,o=0;o<a.length;o++)l>getOffset(a[o]).top&&l<getOffset(a[o]).top+a[o].clientHeight&&r.push(a[o]);for(o=0;o<r.length;o++){var d=getOffset(r[o]).left+r[o].clientWidth/2;getOffset(g).left;if(i<d){r[o].parentElement.insertBefore(g,r[o]);break}d<i&&b(g,r[o])}}setTimeout(function(){u.focus()},0),u.dispatchEvent(new CustomEvent("setWidth"))}})},stW:function(e){var t,n=this.ddVsbl,s=this.ddCntr,a=document;E(function(){(t=a.createElement("div")).style.visibility="hidden",t.style.width="auto",t.style.zIndex="-99",t.style.whiteSpace="nowrap",t.style.position="absolute",t.style.fontSize=n.style.fontSize,t.innerHTML=n.value,s.appendChild(t),n.value<1&&document.activeElement&&!document.activeElement.closest(".dd-vsbl")?n.style.width="17px":n.style.width=Math.max(t.clientWidth+17,17)+"px",t.parentElement.removeChild(t)})},search:function(e){var r,t,n=this.ddVsbl,i=this.ddRslts,s=this.ddHdn,l=this.ddWrp,o=this.ddCntr,a=this.method,d=this.searchArea,c=this.ddPhdr;E(function(){var e;s.removeAttribute("value"),c.style.display="none",l.classList.remove("dd-wrp-invalid"),"fullList"==a?(l.classList.add("dd-wrp-show"),i.style.display="block"):(t=s.getElementsByTagName("option"),e=[].forEach.call(t,function(e){return e.value}),0<n.value.trim().length?(r={s:n.value,e:void 0!==e?e.toString():""},t=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&"),null!=u&&u.abort(),(u=new XMLHttpRequest).open("post","/Search?handler="+d+"&"+t,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(),u.onload=function(){try{r=JSON.parse(u.responseText)}catch(e){return!1}if(i.style.removeProperty("height"),0===r.length)i.innerHTML='<div class="dd-rslt disabled">No matches found</div>';else{i.innerHTML="";for(var e=0;e<r.length;e++){var t=r[e].ObjectId||r[e].Description,n=document.createElement("div");n.classList.add("dd-rslt"),"g"==r[e].Type&&n.classList.add("group"),n.setAttribute("value",t),n.innerHTML=r[e].Name,0==e&&n.classList.add("active"),i.appendChild(n)}}l.classList.add("dd-wrp-show"),i.style.display="block",i.style.removeProperty("left");var s=getOffset(i).left+i.clientWidth,a=getOffset(o.parentElement).left+o.parentElement.clientWidth;if(a<s&&(i.style.left=a-s-40+"px"),i.classList.remove("ss-container"),10<r.length){i.style.height=Math.min(23*r.length+8,238)+"px";try{SimpleScrollbar.initAll()}catch(e){}}}):(i.style.removeProperty("display"),l.classList.remove("dd-wrp-show"),s.removeAttribute("value"),c.style.removeProperty("display"))),setTimeout(function(){n.focus()},0)})}},t(),r.addEventListener("ajax",function(){t()}),r.addEventListener("dropdown",function(e){void 0!==e.detail&&e.detail&&e.detail.el?t(e.detail.el):t()},!1)}(),function(){function r(e){void 0===e?[].forEach.call(document.getElementsByClassName("mdl-o"),function(e){e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))}):(e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))),0<document.getElementsByClassName("mdl-o").length||document.getElementsByTagName("body")[0].classList.remove("b-mdl")}function i(e,t){document.getElementsByTagName("body")[0].classList.toggle("b-mdl"),e.classList.toggle("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-open",{cancelable:!0,detail:{e:t}}))}document.addEventListener("click",function(e){var t,n,s,a=document;console.log(e.target.closest("[data-toggle]")),e.target.closest("[data-toggle]")&&"mdl"==e.target.closest("[data-toggle]").getAttribute("data-toggle")?i(a.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target")),e.target.closest("[data-toggle]")):e.target.closest("[data-dismiss]")&&"mdl"==e.target.closest("[data-dismiss]").getAttribute("data-dismiss")||e.target.closest(".editorMdl-close")?r(e.target.closest(".mdl")):e.target.closest(".request-access")?(n={reportName:document.querySelector(".report-name-clean").innerHTML,directorName:a.getElementById("director-name").value,reportUrl:window.location.href},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(t=new XMLHttpRequest).open("post","/Requests?handler=AccessRequest&"+s,!0),t.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),ShowMessageBox("Your request has been submitted."),r()):e.target.closest(".share-feedback")?(n={reportName:document.title,description:e.target.parentNode.previousElementSibling.getElementsByTagName("textarea")[0].value,reportUrl:window.location.href},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(t=new XMLHttpRequest).open("post","/Requests?handler=ShareFeedback&"+s,!0),t.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),ShowMessageBox("Thanks for the feedback."),e.target.parentNode.previousElementSibling.getElementsByTagName("textarea")[0].value="",r()):e.target.closest(".pop")&&(a.getElementsByClassName("imagepreview")[0].setAttribute("src",e.target.closest(".pop").children[0].getAttribute("src")),i(a.getElementById("image-modal"),null))},!0),document.getElementById("shareModal").addEventListener("mdl-open",function(e){var t=e.detail.e,n=t.getAttribute("data-name");url=t.hasAttribute("data-url")&&null!=t.getAttribute("data-url")&&""!=t.getAttribute("data-url")?t.getAttribute("data-url"):window.location.href.replace(window.location.origin,"");e=this;e.querySelector(".mlbx-newMsgSubjIpt").innerHTML="Share: "+n,e.querySelector(".mlbx-newMsgMsg").innerHTML="<div>Hi!<br>I would like to share this "+t.getAttribute("data-type")+" with you.</div><br><a href='"+url+"'>"+n+"</a><br><br><div>Check it out sometime!</div><br><div>Regards!<br>"+e.querySelector(".mlbx-newMsgSender span:nth-child(2)").innerHTML,e.querySelector(".mlbx-shareName").value=n,e.querySelector(".mlbx-shareUrl").value=url;for(var s=e.querySelectorAll(".dd-itm"),a=0;a<s.length;a++)s[a].parentElement.removeChild(s[a]);for(var r=e.querySelectorAll(".dd-hdn option"),a=0;a<r.length;a++)r[a].parentElement.removeChild(r[a]);document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:e.querySelector("#new_msg_dynamic-dropdown:not(.dd-hdn)")}}))}),document.getElementById("shareFeedback").addEventListener("mdl-open",function(e){var t=e.detail.e,e=t.getAttribute("data-name");window.location.origin;t.hasAttribute("data-url")&&null!=t.getAttribute("data-url")&&""!=t.getAttribute("data-url")?t.getAttribute("data-url"):window.location.href;this.querySelector(".mdl-h h2").innerHTML=t.getAttribute("data-tooltip"),this.querySelector(".share-feedback").setAttribute("report-name",e)}),document.getElementById("requestAccessModal").addEventListener("mdl-open",function(e){e=e.detail.e.getAttribute("data-name");this.querySelector(".report-name-clean").innerHTML=e}),document.addEventListener("modal-close",function(){r()})}(),function(){var n=document,e=debounce(function(){[].forEach.call(n.querySelectorAll("img[data-src]"),function(e){t(e)&&(e.setAttribute("src",""),e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src"))})},250),t=function(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-e.clientHeight-400<=(document.documentElement.clientHeight||n.documentElement.clientHeight)&&t.right-400-e.clientWidth<=(document.documentElement.clientWidth||n.documentElement.clientWidth)};e(),n.addEventListener("ajax",function(){setTimeout(function(){e()},0)}),n.addEventListener("scroll",function(){debounce(e(),100)},{passive:!0})}(),function(){window.onbeforeunload=function(){setTimeout(function(){e()},0)};var e=function(){var e=-1!=document.title.indexOf(" | ")?document.title.split(" | ")[0]:document.title,t=window.location.href,n={},s=sessionStorage.getItem("breadcrumbs");0!==(s=null!==s?JSON.parse(s):[]).length&&s[s.length-1].title==e&&s[s.length-1].url==t||(n.title=e,n.url=t,0<s.length&&s[s.length-1].title.startsWith("Search")&&n.title.startsWith("Search")&&s.pop(),s.push(n),sessionStorage.setItem("breadcrumbs",JSON.stringify(s)));n=document.getElementsByClassName("breadcrumb")[0];s.length<=1||(n.innerHTML="<ul>"+a(s)+"</ul>",n.style.opacity=1)},a=function(e){var t=0,n="";for((e=e.slice(Math.max(e.length-7,0))).reverse(),n="<li class='is-active'><a href='#'>"+e[0].title+"</a></li>",t=1;t<e.length;t++)n+='<li><a href="'+e[t].url+'" class="">'+e[t].title+"</a></li>";return n};e()}(),function(){window.addEventListener("scroll",function(){debounce(void n(),100)},{passive:!0}),window.addEventListener("resize",function(){debounce(void n(),100)});var s,a,r,i=document.querySelector(".pageTitle:not(.loose)"),l=document.querySelector(".sideNav");if(document.addEventListener("click",function(e){e.target.closest(".site-messageClose")&&(document.querySelector(".site-message").parentElement.removeChild(document.querySelector(".site-message")),i&&(a=getOffset(i).top))}),i){for(var e=document.getElementsByClassName("location"),t=0;t<e.length;t++)e[t].style.top="-"+i.clientHeight+"px";a=getOffset(i).top,s=i.nextElementSibling,r=parseInt(window.getComputedStyle(s,null).getPropertyValue("padding-top"),10)}var n=function(){var e,t=document.body,n=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);i&&(n-window.innerHeight>2*a||n-window.innerHeight<=a)&&(e=i.clientWidth,window.pageYOffset>=a?(i.classList.contains("sticky")||(s.style.paddingTop=r+i.clientHeight+"px"),i.classList.add("sticky"),i.style.width=e+"px"):(i.classList.remove("sticky"),i.style.removeProperty("width"),s.style.removeProperty("padding-top"))),l&&(window.pageYOffset>=a?(e=l.getBoundingClientRect().left,l.classList.add("sticky"),l.style.left=e+"px"):(l.classList.remove("sticky"),l.style.removeProperty("left")))};function o(){for(var e,t,n=document.querySelectorAll(".body-main a[href]"),s=[],a=/[R|r]eports\?id=(\d+)/,r=0;r<n.length;r++)(e=n[r].getAttribute("href").match(a))&&s.push(e[1]);(e=window.location.href.match(a))&&s.push(e[1]),0<s.length&&((t=document.getElementById("related-reports"))||((t=document.createElement("div")).setAttribute("id","related-reports"),document.getElementById("AdColTwo").appendChild(t)),t.setAttribute("data-url","/Reports/?handler=RelatedReports&id="+s.slice(0,5).join(",")),t.setAttribute("data-ajax","yes"),document.dispatchEvent(new CustomEvent("load-ajax-content")))}n(),o(),document.addEventListener("related-reports",function(){o()})}(),1!=getUrlVars().EPIC&&1!=getCookie("EPIC")||setCookie("EPIC",1,99),function(){var c=document;function o(e){var t,n,s,a,r=e||c.getElementsByClassName("fav-show-all")[0],i=r.getAttribute("folder-id"),e=c.getElementById("favs-none");for(e.style.display="none",t=r.parentElement.getElementsByClassName("active"),n=0;n<t.length;n++)(s=t[n]).classList.remove("active"),(a=s.getElementsByTagName("i")[0]).classList.remove("fa-folder-open"),a.classList.add("fa-folder");if(null!==i){for(t=c.querySelectorAll('.favs div[folder-id]:not([folder-id="'+i+'"])'),n=0;n<t.length;n++)(s=t[n]).style.display="none";t=c.querySelectorAll('.favs div[folder-id="'+i+'"]')}else t=c.querySelectorAll(".favs div[folder-id]");for(n=0;n<t.length;n++)(s=t[n]).style.opacity=0,s.style.removeProperty("display"),s.style.transition="opacity 0.1s ease-in-out",s.offsetHeight,s.style.opacity=1;if(r.classList.add("active"),(t=r.getElementsByTagName("i")[0]).classList.remove("fa-folder"),t.classList.add("fa-folder-open"),null!==i&&0==c.querySelectorAll('.favs div[folder-id="'+i+'"]').length||null==i&&0==c.querySelectorAll(".favs div[folder-id]").length){for(t=e.childNodes,n=0;n<t.length;n++)(s=t[n]).style.removeProperty("display");e.style.opacity=0,e.style.removeProperty("display"),e.style.transition="opacity 0.1s ease-in-out",e.offsetHeight,e.style.opacity=1,c.getElementById("Folder_UserFavoriteFolderId").value=i}}function d(e,t,n){if(e.classList.contains("fav")){for(var s,a,r,i,l,o=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),d=(window.event,0);d<o.length;d++)if(s=o[d],a=(l=getOffset(s)).top,r=l.top+s.offsetHeight,i=l.left,l=l.left+s.offsetWidth,a<n&&n<r&&i<t&&t<l)return s;return!1}}c.addEventListener("click",function(e){if(e.target.closest(".favorite:not(.disabled)")||e.target.closest(".favorite-search:not(.disabled)")||e.target.closest(".fav-star:not(.disabled)")||e.target.closest("[fav-type]")){e.preventDefault(),e.stopPropagation();for(var t,n,s=e.target.closest(".favorite-search:not(.disabled)")?e.target.getElementsByTagName("i")[0]:e.target,a=null!=s.closest(".favs"),r=null!=document.getElementsByClassName("favs")[0],i=1,l=s.getAttribute("fav-type"),e=s.getAttribute("object-id"),s=s.getAttribute("object-name"),o=c.querySelectorAll('[fav-type="'+l+'"][object-id="'+e+'"]'),d=0;d<o.length;d++)(t=o[d]).classList.contains("favorite")?(t.classList.remove("favorite"),i=0):t.classList.add("favorite");if(a)for(c.querySelectorAll(".favs div[folder-id]").length<=1&&((t=c.getElementById("favs-none")).style.opacity=0,t.style.removeProperty("display"),t.style.transition="opacity 0.3s ease-in-out",t.offsetHeight,t.style.opacity=1),d=0;d<o.length;d++)(t=o[d].closest(".fav")).parentElement.removeChild(t);n={actionType:i,favoriteType:l,objectId:e,objectName:s},e=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(s=new XMLHttpRequest).open("post","/users?handler=EditFavorites&"+e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){r&&c.dispatchEvent(new CustomEvent("reload-favs"))}}},!1),c.addEventListener("click",function(e){if(e.target.closest(".fav-show-all"))o();else{if(e.target.closest(".fav-folder-new"))return!1;e.target.closest(".fav-folder")&&(e.target.classList.contains("active")?o():o(e.target.closest(".fav-folder")))}}),c.addEventListener("submit",function(e){var t,n,s,a,r,i,l;e.target.closest("#CreateFolderForm")?(e.preventDefault(),t=e.target.getElementsByTagName("input")[0],n=e.target.getElementsByTagName("span")[0],s=t.value,a=c.getElementById("fav-folders"),t.value,r=serialize(e.target),(i=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+r,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),t.value="",e.target.querySelector(".submit").innerHTML="",i.onload=function(){var e=c.createElement("div");e.classList.add("fav-folder"),e.classList.add("drg"),e.setAttribute("folder-id",i.responseText),e.innerHTML='<i class="fas fa-folder"></i><span>'+s+'</span><div class="fav-count">0</div><div class="folder-grip drg-hdl"><i class="fas fa-grip-lines"></i></div>';var t=a.getElementsByClassName("fav-folder-new")[0];t.parentElement.insertBefore(e,t),n.innerHTML="",document.dispatchEvent(new CustomEvent("clps-close",{cancelable:!0,detail:{el:c.getElementById("fav-folder-new")}}))}):e.target.closest("#DeleteFolderForm")&&(e.preventDefault(),l=c.getElementById("Folder_UserFavoriteFolderId").value,r=serialize(e.target),(i=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+r,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=c.getElementById("fav-folders").querySelector("div[folder-id][folder-id='"+l+"']");e.parentElement.removeChild(e),o()})},!1),c.addEventListener("dragEnd",function(e){void 0!==e.detail&&function(e,t,n){var s,a,r,i;if(e.classList.contains("fav-folder")){s=e.parentElement.querySelectorAll(".fav-folder:not(.fav-folder-new):not(.fav-show-all"),a=Array.from(s).sort(function(e,t){return getOffset(e).top-getOffset(t).top});var l=e.parentElement.getElementsByClassName("fav-folder-new")[0];for(r=0;r<a.length;r++)l.parentElement.insertBefore(a[r],l);!function(){var e,t,n=[],s=c.querySelectorAll("#fav-folders .fav-folder:not(.drag-source)");for(e=0;e<s.length;e++){var a;s[e].hasAttribute("folder-id")&&((a={}).FolderId=s[e].getAttribute("folder-id"),a.FolderRank=e+1,n.push(a))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFolders",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}else if(e.classList.contains("fav"))if((s=d(e,t,n))&&null!==s)s.hasAttribute("folder-id")&&s.getAttribute("folder-id"),function(e,t){var n={};n.FavoriteId=e,n.FolderId=t,(t=new XMLHttpRequest).open("post","/Users?handler=UpdateFavoriteFolder",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}(e.getAttribute("fav-id"),s.getAttribute("folder-id")),e.setAttribute("folder-id",s.getAttribute("folder-id")),o(c.querySelector(".fav-folder.active"));else{for(s=e.parentElement.getElementsByClassName("fav"),a=Array.from(s).sort(function(e,t){return getOffset(e).top-getOffset(t).top}),r=0;r<a.length;r++)e.parentElement.appendChild(a[r]);!function(){var e,t,n=[],s=c.querySelectorAll(".favs div[folder-id]:not(.drag-source)");for(e=0;e<s.length;e++){var a;s[e].hasAttribute("folder-id")&&((a={}).FavoriteId=s[e].getAttribute("fav-id"),a.FavoriteRank=e+1,n.push(a))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFavorites",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}for(e.style.transition="top 0.3s; left 0.3s;",e.style.top=0,e.style.left=0,r=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),i=0;i<r.length;i++)r[i].classList.remove("hover")}(e.detail.el,e.detail.x,e.detail.y)},!1),c.addEventListener("dragMove",function(e){if(void 0!==e.detail){for(var t=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),n=0;n<t.length;n++)t[n].classList.remove("hover");(e=d(e.detail.el,e.detail.x,e.detail.y))&&null!==e&&e.classList.add("hover")}},!1)}(),function(){function e(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-e.clientHeight-400<=(document.documentElement.clientHeight||c.documentElement.clientHeight)&&t.right-400-e.clientWidth<=(document.documentElement.clientWidth||c.documentElement.clientWidth)}var c=document,t=debounce(function(){[].forEach.call(c.querySelectorAll('[data-ajax="yes"]'),function(t){var n,s,a,r,i;t.matches("#AdColOne")||t.matches('#AdColTwo [data-ajax="yes"]')||!e(t)||(n=t.getAttribute("data-url"),s=t.getAttribute("data-param"),a=t.getAttribute("data-loadtag"),r=t.getAttribute("id"),t.removeAttribute("data-ajax"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==s&&""!==s&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=s),cache.exists(n)?l(t,a,s,cache.get(n),n,r):((i=new XMLHttpRequest).open("get",n,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=null!=i.getResponseHeader("Cache-Control")?(i.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;l(t,a,s,i.responseText,n,r),(t.hasAttribute("cache")||e)&&cache.set(n,i.responseText,e)}))})},250),l=function(e,t,n,s,a,r){if(null!=e)try{if(e.style.opacity=0,!e.parentNode)return;var i=c.createElement("div");i.innerHTML=s,null!==t&&""!==t?(i=i.querySelector(t)).setAttribute("data-loadtag",t):i=i.children[0],r&&i.setAttribute("id",r),i.style.visibility="hidden",i.style.transition="visibility 0.3s ease-in-out";i.clientHeight;if(i.setAttribute("data-url",a),i.setAttribute("data-param",n),e.parentNode.replaceChild(i,e),i.querySelector('script:not([type="application/json"])'))for(var l=Array.prototype.slice.call(i.querySelectorAll('script:not([type="application/json"])')),o=0;o<l.length;o++){var d=c.createElement("script");d.innerHTML=l[o].innerHTML,d.type="text/javascript",d.setAttribute("async","true"),i.appendChild(d),l[o].parentNode.removeChild(l[o])}i.style.visibility="visible",c.dispatchEvent(new CustomEvent("ajax"))}catch(e){console.log(e)}},n=debounce(function(){[].forEach.call(c.querySelectorAll('#AdColOne, #AdColTwo [data-ajax="yes"]'),function(t){var n,s,a,r,i;e(t)&&(n=t.getAttribute("data-url"),s=t.getAttribute("data-param"),a=t.getAttribute("data-loadtag"),r=t.getAttribute("id"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==s&&""!==s&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=s),t.style.visibility="hidden",cache.exists(n)?l(t,a,s,cache.get(n),n,r):((i=new XMLHttpRequest).open("get",n,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=null!=i.getResponseHeader("Cache-Control")?(i.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;l(t,a,s,i.responseText,n,r),(t.hasAttribute("cache")||e)&&cache.set(n,i.responseText,e)}))})},250),s=debounce(function(){var t,e=c.getElementsByClassName("favs-cntr");[].forEach.call(e,function(e){(t=new XMLHttpRequest).open("get",e.getAttribute("data-url"),!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){l(e,null,null,t.responseText,e.getAttribute("data-url"))}})},250);t(),n(),c.addEventListener("load-ajax-content",function(){t(),n()}),c.addEventListener("reload-favs",function(){s()}),c.addEventListener("scroll",function(){t(),n()},{passive:!0})}(),document.addEventListener("click",function(e){e.target.matches(".message-close")&&e.target.parentElement.matches(".message-wrapper")&&e.target.parentElement.classList.add("hidden")}),document.addEventListener("show-message",function(e){void 0!==e.detail&&e.detail&&e.detail.value&&ShowMessageBox(e.detail.value)},!1),function(){document.execCommand("defaultParagraphSeparator",!1,"div");function u(){var e=document.createElement("div");null!==s&&s.abort(),(s=new XMLHttpRequest).open("post","/mail?handler=CheckForMail",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){e.innerHTML=s.responseText,n(e)}}function n(e){var t,n=v.getElementsByClassName("mail-unread-cnt"),s=v.getElementsByClassName("mail-all-cnt"),a=0,r=e.querySelector("#unread_message_count").innerHTML,i=e.querySelector("#total_message_count").innerHTML,l=e.querySelector("#draft_message_count").innerHTML,o=e.querySelector("#new_message_alerts");for(v.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt")&&(v.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt").innerHTML=0<l?l:"");a<n.length;a++)0<r?(n[a].style.display="inline-block",n[a].innerHTML=r):(n[a].style.display="none",n[a].innerHTML="");for(;a<s.length;a++)s[a].innerHTML=i;if(0<o.innerHTML.length&&((t=document.getElementsByClassName("mail-notification-container")[0]).innerHTML=o.innerHTML,t.style.transition="margin-right .5s",t.style.marginRight="500px",t.clientWidth,setTimeout(function(){t.style.marginRight="0px"},5e3)),null!==v.querySelector("#mlbx-fldrsInbox.active")){var d=document.createElement("div");if(d.innerHTML=e.querySelector("#new_message_previews").innerHTML,0<d.innerHTML.length)for(var c,u=Array.prototype.slice.call(v.querySelectorAll(".mlbx-msgsMsg[data-rep-id]")),a=0;a<u.length;a++)null!==(c=d.querySelector('.mlbx-msgsMsg[data-rep-id="'+u[a].getAttribute("data-rep-id")+'"]'))&&(c.parentElement.removeChild(c.nextElementSibling),c.parentElement.removeChild(c));d.querySelector(".mlbx-msgsMsg.active")&&d.querySelector(".mlbx-msgsMsg.active").classList.remove("active"),0<v.querySelector(".mlbx-msgs .ss-content").children.length?v.querySelector(".mlbx-msgs .ss-content").children[0].insertAdjacentHTML("beforebegin",d.innerHTML):v.querySelector(".mlbx-msgs .ss-content").innerHTML=d.innerHTML}}function a(t,n){v.getElementsByClassName("mlbx-rdr")[0].innerHTML="",null!==l&&l.abort(),l=new XMLHttpRequest,null!==t&&l.open("get","mail?handler=Messages&folder="+t,!0),null!=n&&l.open("get","mail?handler=Messages?folderId="+n,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){var e=v.getElementsByClassName("mlbx-msgsScroll")[0];e.classList.remove("ss-container"),e.innerHTML=l.responseText,document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:e}})),"inbox"==t||"deleted"==t||"sent"==t||null!=n?v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")&&i(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-rep-id")):"drafts"==t&&(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")?r(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-draft-id")):h())}}function r(n){c=null,l&&l.abort(),(l=new XMLHttpRequest).open("get","mail?handler=DraftDetails&id="+n,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){var e=v.createElement("div");e.innerHTML=l.responseText;var t=v.createElement("input");t.setAttribute("name","draftId"),t.setAttribute("value",n),t.style.display="none",e.querySelector("form").appendChild(t),v.getElementsByClassName("mlbx-rdr")[0].innerHTML=e.getElementsByClassName("mlbx-newMsg")[0].outerHTML,document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:v.querySelector("#new_msg_dynamic-dropdown")}})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:v.querySelector(".mlbx-rdr .mlbx-newMsg")}})),v.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("input",function(e){p(this)}),v.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("change",function(e){p(this)})}}function d(e){q=new XMLHttpRequest,q.open("post","mail?handler=MarkMessageRead&id="+e,!0),q.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),q.setRequestHeader("X-Requested-With","XMLHttpRequest"),q.send()}function h(e,t,n,s){c=null;for(var a=v.querySelectorAll(".mlbx-msgsMsg.active.unread"),r=0;r<a.length;r++)a[r].classList.remove("unread"),d(a[r].getAttribute("data-rep-id"));v.querySelector(".mlbx-msgsMsg.active")&&v.querySelector(".mlbx-msgsMsg.active").classList.remove("active");var i,l,o=v.getElementsByClassName("mlbx-rdr")[0];o.innerHTML="",o.appendChild(v.querySelector(".new_message_template .mlbx-newMsg").cloneNode(!0)),o.querySelector("form.mlbx-newMsgForm").addEventListener("input",function(e){p(this)}),o.querySelector("form.mlbx-newMsgForm").addEventListener("change",function(e){p(this)}),document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:o.querySelector("#new_msg_dynamic-dropdown")}})),void 0!==s&&(o.querySelector("#convid").value=s),void 0!==t&&(o.querySelector(".mlbx-newMsgSubjIpt").innerHTML=t),void 0!==n&&(o.querySelector(".mlbx-newMsgMsg").innerHTML=n.innerHTML),void 0!==e&&null!=e&&(i=o.querySelector(".dd-cntr .dd-wrp"),l=o.querySelector(".dd-cntr select.dd-hdn"),e.forEach(function(e){l.innerHTML+='<option selected="selected" class="'+e[2]+'" value="'+e[0]+'">'+e[1]+"</option>",i.children[0].insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e[2]+'">'+e[1]+"</div>")})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:o.querySelector(".mlbx-newMsg")}}))}function i(e){v.getElementsByClassName("mlbx-rdr")[0]&&(l&&l.abort(),(l=new XMLHttpRequest).open("get","mail?handler=MessageDetails&id="+e,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){v.getElementsByClassName("mlbx-rdr")[0]&&(v.getElementsByClassName("mlbx-rdr")[0].innerHTML=l.responseText),document.dispatchEvent(new CustomEvent("ss-load"))})}var v=document,s=null,l=null,c=null,o=null,m=null,p=function(t){var e;null!==c&&t.querySelector('input[name="draftId')&&c.abort(),null!==c&&!t.querySelector('input[name="draftId')||(e={To:t.querySelector(".dd-cntr .dd-hdn").innerHTML,Subject:t.querySelector(".mlbx-newMsgSubjIpt").innerHTML,Message:t.querySelector(".mlbx-newMsgMsg").innerHTML,Text:t.querySelector(".mlbx-newMsgMsgBx").innerText.replace(/\n/g," "),MsgId:null,ConvId:null},t.querySelector('input[name="draftId')&&(e.DraftId=t.querySelector('input[name="draftId').getAttribute("value")),(c=new XMLHttpRequest).open("post","mail?handler=SaveDraft",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(JSON.stringify(e)),c.onload=function(){var e;null==t.querySelector('input[name="draftId')&&((e=v.createElement("input")).setAttribute("name","draftId"),e.setAttribute("value",c.responseText),e.style.display="none",t.appendChild(e))})};setInterval(function(){void 0!==window.ajaxOn&&1!=window.ajaxOn||u()},1e4),document.addEventListener("loadMessage",function(e){void 0!==e.detail&&i(e.detail.id)}),v.addEventListener("click",function(e){var t,n,s;e.target.closest(".mlbx-msgsMsg")?function(e){for(var t=v.querySelectorAll(".mlbx-msgsMsg.active:not(.deleted"),n=0;n<t.length;n++)t[n].classList.remove("active"),v.querySelector("#mlbx-fldrsInbox.active")&&t[n].classList.contains("unread")&&(t[n].classList.remove("unread"),d(t[n].getAttribute("data-rep-id")));e.classList.add("active"),v.querySelector("#mlbx-fldrsInbox.active")&&e.classList.contains("unread")&&(e.classList.remove("unread"),d(e.getAttribute("data-rep-id"))),v.querySelector("#mlbx-fldrsDrafts.active")?r(e.getAttribute("data-draft-id")):i(e.getAttribute("data-rep-id")),u()}(e.target.closest(".mlbx-msgsMsg")):e.target.closest(".mail-new-message")?(s=e.target.closest(".mail-new-message").getAttribute("data-from"),t=e.target.closest(".mail-new-message").getAttribute("data-fromid"),s&&t?h([[fromid,s]]):h()):e.target.closest(".mlbx-usrDrp")?(e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").style.display="block",e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").addEventListener("mouseleave",function e(t){this.style.removeProperty("display"),this.removeEventListener("mouseleave",e,!1)})):e.target.closest("#mlbx-fldrsDrafts")?(a("drafts"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDrafts").classList.add("active")):e.target.closest("#mlbx-fldrsInbox")?(a("inbox"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsInbox").classList.add("active")):e.target.closest("#mlbx-fldrsSent")?(a("sent"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsSent").classList.add("active")):e.target.closest("#mlbx-fldrsDeleted")?(a("deleted"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDeleted").classList.add("active")):!e.target.closest(".mail-delete-message")||null!=(n=v.querySelector(".mlbx-msgsMsg.active:not(.deleted)"))&&(s=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}if(n=e.previousElementSibling,!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(n,".mlbx-msgsMsg"),n.hasAttribute("data-draft-id")?((o=new XMLHttpRequest).open("post","mail?handler=DeleteDraft&id="+n.getAttribute("data-draft-id"),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(),void 0!==s?(r(s.getAttribute("data-draft-id")),s.classList.add("active")):v.querySelector(".mlbx-rdr").innerHTML=""):n.hasAttribute("data-rep-id")&&((o=new XMLHttpRequest).open("post","mail?handler=DeleteMessage&id="+n.getAttribute("data-rep-id"),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(),void 0!==s?(i(s.getAttribute("data-rep-id")),s.classList.add("active")):v.querySelector(".mlbx-rdr").innerHTML=""),e=parseFloat(n.clientWidth),s=parseFloat(n.clientHeight),n.style.transition="margin-left 150ms, margin-right 150ms, margin-top 150ms",n.style.zIndex="-1",n.clientHeight,n.style.marginLeft=-e+"px",n.style.marginRight=e+"px",n.style.marginTop=-s+"px",n.classList.add("deleted"),setTimeout(function(){null!==n&&(n.parentElement.removeChild(n.nextElementSibling),n.parentElement.removeChild(n))},150))}),v.addEventListener("submit",function(e){if(e.target.closest(".mlbx-newMsgForm")){e.preventDefault();for(var t=e.target.closest(".mlbx-newMsgForm"),n=[],s=t.querySelectorAll(".mlbx-newMsgRecip select option"),a=0;a<s.length;a++){var r=s[a].classList.contains("group")?"g":"";n.push({UserId:s[a].value,Type:r})}var i=t.querySelector(".mlbx-newMsgSubjIpt").innerText,l=t.querySelector(".mlbx-newMsgMsg").innerHTML,o=t.querySelector(".mlbx-newMsgMsg").innerText.replace(/\n/g," "),d=t.querySelector(".mlbx-share")?"1":"0",c=t.querySelector(".mlbx-shareName")?t.querySelector(".mlbx-shareName").value:"",e=t.querySelector(".mlbx-shareUrl")?t.querySelector(".mlbx-shareUrl").value:"",c={To:JSON.stringify(n),Subject:i,Message:l,Text:o,Share:d,ShareName:c,ShareUrl:e};null!==t.querySelector('input[name="draftId"]')&&(e=t.querySelector('input[name="draftId"]').value,c.DraftId=e,v.querySelector('.mlbx-msgsMsg[data-draft-id="'+e+'"]')&&v.querySelector('.mlbx-msgsMsg[data-draft-id="'+e+'"]').parentElement.removeChild(v.querySelector('.mlbx-msgsMsg[data-draft-id="'+e+'"]'))),(m=new XMLHttpRequest).open("post",t.getAttribute("action"),!0),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(JSON.stringify(c)),m.onload=function(){u()},document.dispatchEvent(new CustomEvent("show-message",{cancelable:!0,detail:{value:"Messages sent! ¯\\_(ツ)_/¯"}})),null!==v.querySelector(".mlbx-rdr")&&(v.querySelector(".mlbx-rdr").innerHTML=""),v.dispatchEvent(new CustomEvent("modal-close"))}},!1),v.addEventListener("click",function(e){var n,s,a,r,i,l,o,d,c;if(e.target.closest(".mail-reply")&&null!==v.querySelector("#mlbx-fldrsInbox.active")){for(s=(n=v.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),a="Re: "+n.querySelector(".mailbox-subject").innerText,i=[[(r=n.querySelector("div.mailbox-sender-user")).getAttribute("data-user-id"),r.querySelector("span").innerText,""]],o=document.createElement("div"),(d=document.createElement("div")).classList.add("message-reply"),d.innerHTML=v.querySelector(".mlbx-rdr .ss-content").innerHTML,d.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(d.querySelector(".mlbx-rdrHead-controls")),c=d.querySelectorAll(".mlbx-usrDrp"),l=0;l<c.length;l++)c[l].parentElement.removeChild(c[l]);o.innerHTML="<br><br><br>",o.appendChild(d),h(i,a,o,s)}else if(e.target.closest(".mail-reply-all")&&null!==v.querySelector("#mlbx-fldrsInbox.active")){for(s=(n=v.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),a="Re: "+n.querySelector(".mailbox-subject").innerText,r=n.querySelectorAll("div.mailbox-sender-user"),t=n.querySelectorAll("div.mailbox-to-user"),i=[],l=0;l<r.length;l++)i.push([r[l].getAttribute("data-user-id"),r[l].querySelector("span").innerText,r[l].classList.contains("group")?"group":""]);for(l=0;l<t.length;l++)i.push([t[l].getAttribute("data-user-id"),t[l].querySelector("span").innerText,t[l].classList.contains("group")?"group":""]);for(var u={},m=[],p=0;p<i.length;p++)i[p]in u||(m.push(i[p]),u[i[p]]=!0);for(i=m,o=document.createElement("div"),(d=document.createElement("div")).classList.add("message-reply"),d.innerHTML=v.querySelector(".mlbx-rdr .ss-content").innerHTML,d.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(d.querySelector(".mlbx-rdrHead-controls")),c=d.querySelectorAll(".mlbx-usrDrp"),l=0;l<c.length;l++)c[l].parentElement.removeChild(c[l]);o.innerHTML="<br><br><br>",o.appendChild(d),h(i,a,o,s)}})}(),function(){window.ajaxOn=!0;function n(e){var t={},n=navigator,s=window,a=document,r=s.location;return t.appCodeName=n.appCodeName,t.appName=n.appName,t.appVersion=n.appVersion,t.cookieEnabled=n.cookieEnabled,t.language=n.language,t.oscpu=n.oscpu,t.platform=n.platform,t.userAgent=n.userAgent,t.host=r.host,t.hostname=r.hostname,t.href=r.href,t.protocol=r.protocol,t.search=r.search,t.pathname=r.pathname,t.hash=r.hash,t.screenHeight=a.documentElement.clientHeight,t.screenWidth=a.documentElement.clientWidth,t.origin=s.origin,t.title=a.title,t.referrer=a.referrer,t.loadTime=e||s.performance.timing.domContentLoadedEventEnd-s.performance.timing.navigationStart,t.zoom=s.devicePixelRatio,t.sessionId=o(),t.pageId=d(),t.pageTime=(new Date).getTime()-l.getTime(),t}function t(e,t){"newpage"==t&&(d("reset"),window.ajaxOn=!0),!0===window.ajaxOn&&(navigator.sendBeacon?navigator.sendBeacon("/analytics?handler=Beacon",JSON.stringify(n(e))):((t=new XMLHttpRequest).open("post","/analytics?handler=Beacon",!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n(e))))),a()}function e(){debounce((window.clearTimeout(r),c(),void(window.ajaxOn=!0)),500)}function s(){document.addEventListener("mousemove",e,!1),document.addEventListener("mousedown",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("touchmove",e,!1),document.addEventListener("scroll",e,{passive:!0},!1),c()}function a(){window.clearTimeout(i),m()}var r,i,l=new Date,o=function(e){return"clear"==e?(sessionStorage.removeItem("_sid"),!1):("reset"!=e&&void 0!==sessionStorage._sid||(sessionStorage._sid=btoa((new Date).toString()),d("reset"),l=new Date),sessionStorage._sid)},d=function(e){return"reset"!=e&&void 0!==sessionStorage._pid||(l=new Date,sessionStorage._pid=btoa((new Date).toString())),sessionStorage._pid},c=function(){r=window.setTimeout(u,12e4),o()},u=function(){window.ajaxOn=!1,o("clear"),sessionStorage.clear()},m=function(){i=window.setTimeout(t,3e4)};"complete"==document.readyState&&(s(),t()),window.addEventListener("load",function(){s(),t()},!1),document.addEventListener("analytics-post",function(e){void 0!==e.detail&&t(e.detail.value,e.detail.type)})}();var $navbarBurgers=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);0<$navbarBurgers.length&&$navbarBurgers.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,e=document.getElementById(e);t.classList.toggle("is-active"),e.classList.toggle("is-active")})}),function(){function n(e){e.classList.remove("is-active")}function d(){(document.querySelectorAll(".mini")||[]).forEach(function(e){n(e)})}function c(e,t,r,i){t=JSON.parse(t);if(0===t.length)e.innerHTML='<div class="mini-waiting">No matches found.</div>';else{e.innerText="";document.createElement("div");var n,s=_createForOfIteratorHelper(t);try{for(s.s();!(n=s.n()).done;){var a=n.value,l=document.createElement("a");l.classList.add("mini-item"),l.innerText=a.Name,l.setAttribute("value",a.ObjectId||a.Description),l.addEventListener("click",function(e){var t,n,s,a;"INPUT"==r.tagName?(i.value=e.target.innerText,r.value=e.target.getAttribute("value"),d()):"SELECT"==r.tagName&&((a=document.createElement("option")).setAttribute("selected","selected"),a.value=e.target.getAttribute("value"),r.appendChild(a),(t=document.createElement("div")).classList.add("control"),(n=document.createElement("div")).classList.add("tags","has-addons"),(s=document.createElement("span")).classList.add("tag","is-link"),s.innerText=e.target.innerText,(a=document.createElement("a")).classList.add("tag","is-delete"),a.setAttribute("value",e.target.getAttribute("value")),a.addEventListener("click",function(e){e=e.target;console.log(r.querySelector('option[value="'+e.getAttribute("value")+'"]')),r.removeChild(r.querySelector('option[value="'+e.getAttribute("value")+'"]')),t.parentElement.removeChild(t)}),t.appendChild(n),n.appendChild(s),n.appendChild(a),null!=(a=i.parentNode.parentNode.parentNode.querySelector(".mini-tags"))&&a.appendChild(t),i.value="")}),e.appendChild(l)}}catch(e){s.e(e)}finally{s.f()}e.querySelectorAll(".mini-item:not(.hidden)").length<1&&(e.innerHTML+='<div class="mini-waiting">No matches found.</div>')}}var u=null;var m=null;(document.querySelectorAll(".input-mini")||[]).forEach(function(r){var t,n,e,s,a,i=r.parentElement.querySelector(".mini"),l=r.parentElement.querySelector('input[type="hidden"], select.is-hidden'),o=r.parentElement.parentElement.querySelector(".mini-clear");r.addEventListener("click",function(){d(),i.classList.add("is-active")}),r.hasAttribute("search-area")?r.addEventListener("input",function(){window.clearTimeout(m),m=window.setTimeout(function(){var t,n,e,s,a;n=i,e=(t=r).getAttribute("search-area"),s=l,a=t.value,0<t.value.length?(null!==u&&u.abort(),(u=new XMLHttpRequest).open("post","/Search?handler="+e+"&s="+a,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(),u.onload=function(){var e=u.responseText;c(n,e,s,t)}):n.innerHTML='<div class="mini-waiting">\n                    <span class="icon">\n                        <i class="fas fa-circle-notch fa-spin"></i>\n                    </span>\n                </div>',window.clearTimeout(m)},250)}):r.hasAttribute("lookup-area")&&(n=i,e=(t=r).getAttribute("lookup-area"),s=l,(a=new XMLHttpRequest).open("post","/Search?handler=ValueList&s="+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),a.onload=function(){var e=a.responseText;c(n,e,s,t)}),null!=o&&o.addEventListener("click",function(){l.value="",r.value=""})}),(document.querySelectorAll(".mini-background, .mini-close, .mini-card-head .delete, .mini-card-foot .button")||[]).forEach(function(e){var t=e.closest(".mini");e.addEventListener("click",function(){n(t)})}),window.onclick=function(e){e.target.closest(".mini,.input-mini")||d()},document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&d()}),(document.querySelectorAll(".mini-tags a.is-delete[value]")||[]).forEach(function(s){s.addEventListener("click",function(e){var t=s.parentNode.parentNode.parentNode.parentNode.querySelector("select.is-hidden"),n=s.parentNode.parentNode;t.removeChild(t.querySelector('option[value="'+s.getAttribute("value")+'"]')),n.parentNode.removeChild(n)})})}();