"use strict";function _createForOfIteratorHelper(e,t){var a,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(){var r=document;function a(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("tab-lnk")}),a=r.getElementById(e.getAttribute("href").replace("#","")),n=[].slice.call(a.parentElement.children).filter(function(e){return e.classList.contains("tab-dta")});[].forEach.call(n,function(e){e.classList.remove("active")}),[].forEach.call(t,function(e){e.classList.remove("active")}),a.classList.add("active"),e.classList.add("active"),r.dispatchEvent(new CustomEvent("tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}function a(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("panel-tab")}),a=r.getElementById(e.getAttribute("href").replace("#","")),n=[].slice.call(a.parentElement.children).filter(function(e){return e.classList.contains("panel-tab-data")});[].forEach.call(n,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),a.classList.add("is-active"),e.classList.add("is-active"),r.dispatchEvent(new CustomEvent("panel-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}function a(e){var t=[].slice.call(e.closest(".steps").querySelectorAll(".steps-segment")),a=r.getElementById(e.getAttribute("href").replace("#","")),n=[].slice.call(a.parentElement.children).filter(function(e){return e.classList.contains("step-tab-data")});[].forEach.call(n,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),a.classList.add("is-active"),e.closest(".steps-segment").classList.add("is-active"),r.dispatchEvent(new CustomEvent("step-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}r.addEventListener("click",function(e){e.target.closest(".tab-lnk")&&(e.preventDefault(),a(e.target.closest(".tab-lnk")))},!1),r.addEventListener("tab-open",function(e){void 0!==e.detail&&e.detail.el&&a(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("tab-open",{cancelable:!0,detail:{el:document.querySelector('.tab-lnk[href="'+document.location.hash.replace("#","")+'"], .tab-lnk[href="'+document.location.hash+'"]')}})),(document.querySelectorAll(".panel-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),a(t)},!1)}),(r=document).addEventListener("panel-tab-open",function(e){void 0!==e.detail&&e.detail.el&&a(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("panel-tab-open",{cancelable:!0,detail:{el:document.querySelector('.panel-tab[href="'+document.location.hash.replace("#","")+'"], .panel-tab[href="'+document.location.hash+'"]')}})),(document.querySelectorAll(".step-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),a(t)},!1)}),(r=document).addEventListener("step-tab-open",function(e){void 0!==e.detail&&e.detail.el&&a(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("step-tab-open",{cancelable:!0,detail:{el:document.querySelector('.step-tab[href="'+document.location.hash.replace("#","")+'"], .step-tab[href="'+document.location.hash+'"]')}}))}(),function(){var s=document;function o(e){e.style.maxHeight=e.scrollHeight+20+"px"}function l(e){e.style.maxHeight="",e.style.overflow="hidden",e.classList.remove("clps-o")}function a(t){t.classList.add("clps-o"),o(t);for(var e=t;e=e.parentElement.closest(".clps-o");)e.style.removeProperty("max-height");s.dispatchEvent(new CustomEvent("collapse-opened"));for(var a=t.parentElement.querySelector(".clps-o"),n=[];a;)a!==t&&a.nodeType===Node.ELEMENT_NODE&&n.push(a),a=a.nextElementSibling||a.nextSibling;for(var r=0;r<n.length;r++)l(n[r]);window.setTimeout(function(){for(var e=t.parentElement.closest(".clps-o");e;)o(e),e=e.parentElement.closest(".clps-o");t.classList.contains("clps-o")&&(t.style.overflow="visible")},300)}s.addEventListener("click",function(e){var t;e.target.closest('[data-toggle="clps"]')?null!=(t=s.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("clps-o")?l:a)(t):e.target.closest(".clps:not(.clps-o")&&a(e.target.closest(".clps:not(.clps-o"))}),s.addEventListener("change",function(t){if(t.target.closest(".clps-o")){for(var e=t.target.closest(".clps-o");e;)e.style.removeProperty("max-height"),e=e.parentElement.closest(".clps-o");window.setTimeout(function(){for(var e=t.target.closest(".clps-o");e;)o(e),e=e.parentElement.closest(".clps-o")},300)}}),s.addEventListener("clps-close",function(e){void 0!==e.detail&&l(e.detail.el)},!1),s.addEventListener("clps-open",function(e){void 0!==e.detail&&a(e.detail.el)},!1)}(),function(){var a=document;a.addEventListener("click",function(e){var t;e.target.closest('[data-action="collapse"]')&&(e=e.target.closest('[data-action="collapse"]'),null!=(t=a.getElementById(e.getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("is-active")?(t.classList.remove("is-active"),e.classList.remove("is-active")):(t.classList.add("is-active"),e.classList.add("is-active"))))})}(),function(){var e=document;function t(){for(var e=document.getElementsByClassName("carousel"),t=0;t<e.length;t++)e[t].classList.contains("carousel-p")||new a(e[t])}function a(e){this.target=e,this.next=e.getElementsByClassName("carousel-next")[0],this.prev=e.getElementsByClassName("carousel-prev")[0],this.dots=e.getElementsByClassName("carousel-dot"),this.slides=e.getElementsByClassName("carousel-itm"),this.target.classList.add("carousel-p"),this.next.addEventListener("click",this.showSlides.bind(this,1),!1),this.prev.addEventListener("click",this.showSlides.bind(this,-1),!1);for(var t=0;t<this.dots.length;t++)this.dots[t].addEventListener("click",this.showSlides.bind(this,0),!1)}var o=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};a.prototype={showSlides:function(e,t){var a,n,r=this.slides,s=this.dots;o(function(){if(t.target.matches(".carousel-dot"))e=t.target.getAttribute("slide");else{for(a=0;a<r.length;a++)if(0<r[a].offsetHeight&&0<r[a].offsetWidth){n=r[a];break}e+=Array.prototype.indexOf.call(r,n)}for((e=e>=r.length?0:e)<0&&(e=r.length-1),a=0;a<r.length;a++)r[a].style.display="none";for(a=0;a<s.length;a++)s[a].classList.remove("active");r[e].style.display="block",s[e].classList.add("active")})}},t(),e.addEventListener("load-carousel",function(){t()})}(),function(){function e(){setTimeout(function(){for(var e=i.querySelectorAll("table.sort"),t=0;t<e.length;t++){var a=e[t];if(!a.querySelectorAll("th .icon-sm").length)for(var n=a.getElementsByTagName("th"),r=0;r<n.length;r++){var s=n[r];s.style.cursor="pointer",s.innerHTML+='<svg class="icon-sm" viewBox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"/></svg>',s.parentElement.style.whiteSpace="nowrap",function(n){n.addEventListener("click",function(){var e=this.closest("table.sort"),t=Array.from(e.querySelectorAll("tr")).slice(1).sort(o(l(n)-1));this.asc=!this.asc,this.asc||(t=t.reverse());for(var a=0;a<t.length;a++)e.append(t[a])})}(s)}}},0)}function o(a){return function(e,t){e=r(e,a).replace("$",""),t=r(t,a).replace("$","");return/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(e)&&/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(t)?new Date(e)-new Date(t):n(e)&&n(t)?e-t:e.toString().localeCompare(t)}}function l(e){if(!e)return-1;for(var t=0;e;)t++,e=e.previousElementSibling;return t}var i=document,n=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r=function(e,t){return e.getElementsByTagName("td")[t].textContent};i.addEventListener("ajax",function(){e()}),e()}(),function(){var a,n,r=document,s=0,o=0,l=(r.addEventListener("mousedown",function(e){var t;e.target.closest(".drg-hdl")&&(n=e.target.closest(".drg"),a=n.cloneNode(!0),n.classList.add("drag-source"),a.classList.add("drag"),a.style.width=n.offsetWidth+1+"px",t=getComputedStyle(n),s=e.clientY-getOffset(n).top+parseInt(t.marginTop),o=e.clientX-getOffset(n).left+parseInt(t.marginLeft),n.parentElement.style.position="relative",n.parentElement.appendChild(a),a.style.top=e.clientY-s+"px",a.style.left=e.clientX-o+"px",l(e))},!1),function(e){(e=e||window.event).preventDefault(),r.addEventListener("mouseup",t),r.addEventListener("mousemove",i)}),i=function(e){(e=e||window.event).preventDefault(),a.style.top=e.clientY-s+"px",a.style.left=e.clientX-o+"px",a.dispatchEvent(new CustomEvent("dragMove",{cancelable:!0,bubbles:!0,detail:{el:a,x:e.clientX,y:e.clientY}}))},t=function e(t){n.parentElement.replaceChild(a,n),a.classList.remove("drag"),a.dispatchEvent(new CustomEvent("dragEnd",{cancelable:!0,bubbles:!0,detail:{el:a,x:t.clientX,y:t.clientY}})),a.style.width="",a.style.top="",a.style.left="",r.removeEventListener("mouseup",e),r.removeEventListener("mousemove",i)}}(),document.addEventListener("dragMove",function(e){var t,l,i,c,a,n,e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;debounce((a=(t=e).detail.el,n=e.detail.x,t=e.detail.y,void(a.closest(".reorder")&&(l=t,i=n,c=a.closest(".reorder").querySelector(".drg.drag-source"),a.closest(".reorder").querySelectorAll(".drg:not(.drag-source):not(.drag)").forEach(function(e){var t=getOffset(e),a=t.top,n=t.top+e.clientHeight,r=t.left,t=t.left+e.clientWidth,s=Array.prototype.indexOf.call(c.parentNode.children,e),o=Array.prototype.indexOf.call(c.parentNode.children,c);r<=i&&a<=l&&l<=n&&o<s?c.parentNode.insertBefore(e,c):i<=t&&a<=l&&l<=n&&s<o&&c.parentNode.insertBefore(c,e),l<a&&s<o?c.parentNode.insertBefore(c,e):n<l&&o<s&&c.parentNode.insertBefore(e,c)})))),250)}),document.addEventListener("dragEnd",function(e){e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;e.detail.el.closest(".reorder")&&e.detail.el.closest(".reorder").dispatchEvent(new CustomEvent("reorder",{bubbles:!0}))}),function(){var e=document,t=debounce(function(){setTimeout(function(){for(var e=document.getElementsByClassName("atlas-chart"),t=0;t<e.length;t++){var a=e[t].getElementsByTagName("script")[0].innerHTML,n=(0<e[t].getElementsByClassName("chart").length&&e[t].removeChild(e[t].getElementsByClassName("chart")[0]),0<e[t].getElementsByClassName("ajaxLoader").length&&e[t].removeChild(e[t].getElementsByClassName("ajaxLoader")[0]),e[t].clientWidth);0<n&&e[t].appendChild(new r(a,n))}},0)},250),n=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)},r=function(d,u){var e="";try{e=JSON.parse(d)}catch(e){}var t,m,f,a=e.height||400,d=e.options,n=e.data,p=e.axis,r="",v=u||800,s=[],h=0,g={},y=0,b=["one","two","three","four","five"];for(c in this.table=document.createElement("table"),n)-1==s.indexOf(n[c].axis)&&s.push(n[c].axis);var L,E=70*(Math.floor(s.length/2)+s.length%2),q=1<s.length?70*Math.floor(s.length/2):40,w=v-E-q;if(this.table.classList.add("chart"),this.table.style.height=a+"px",this.table.style.marginRight=q+"px",this.table.style.marginLeft=E+"px",this.table.style.width=w+"px",this.table.innerHTML+='<caption class="chart-caption">'+e.title+"</caption>",d&&d.hasOwnproperty("legend")&&"false"!==d.legend||!d){for(c in this.thead=document.createElement("thead"),this.thead.classList.add("chart-head"),n)(L=document.createElement("th")).innerHTML+='<span class="chart-headClr '+b[c]+'"></span>'+n[c].title,this.thead.appendChild(L);this.table.appendChild(this.thead)}for(c in this.table.addEventListener("mouseover",this.mouseover.bind(this)),this.table.addEventListener("mouseout",this.mouseout.bind(this)),n)h=Math.max(h,n[c].data.length);for(m in f=w/w/h*100,s){var x=0,S=0;for(c in n)if(n[c].axis===s[m])for(t in(l=n[c]).data)x=Math.max(x,parseFloat(l.data[t].data)),S=Math.min(S,parseFloat(l.data[t].data));for(c in n)n[c].axis==s[m]&&(n[c].range=x-S,n[c].max=x,n[c].min=S);g[m]=x-S}for(c in n)e.lastlinePointY=null,e.lastlinePointX=null,y+="bar"==n[c].type?1:0;r="<tbody>";for(var o=0;o<h;o++){var T=n[0].data[o].title+": ";for(c in n)T+=n[c].data[o].data+" "+p[n[c].axis].title+"; ";r+='<tr class="chart-col" style="left:'+f*o+"%;width:calc("+f+'% - 10px);">';var M=0,A=0;for(c in n){var l=n[c],i=0==parseFloat(l.data[o].data)?0:parseFloat(l.data[o].data)/l.range*100,A=Math.max(A,i),H=(0==c&&(r+='<th class="chart-xAxisTitle" scope="row" style="left:'+(f/100*w/2-26-15)+'px">'+l.data[o].title),i/100*a<30?'style="margin-top:-22px"':"");"bar"==l.type?r+='<td class="chart-'+l.type+" "+b[c]+'" style="height:'+i+"%;width:"+("calc("+100/y+"% - 5px)")+";left:"+M/y*100+'%"><p '+H+"></p></td>":"line"==l.type&&(r=r+('<td class="chart-'+l.type)+" "+b[c]+'" style="height:'+i+'%"><p '+H+"></p>",!l.lastlinePointY&&0!=l.lastlinePointY||(u=f/100*w,H=180*Math.atan2(i/100*a-l.lastlinePointY,-u)/Math.PI,r+='<div style="width:'+Math.sqrt(Math.pow(u,2)+Math.pow(i/100*a-l.lastlinePointY,2))+"px;transform: rotate("+H+'deg);"></div>'),l.lastlinePointY=i/100*a),"bar"==l.type&&M++,r+="</td>"}r=r+('<td class="chart-tooltip" data-tooltip="'+T+'" style="height:calc('+A+'% + 20px)"></td>')+"</tr>"}for(c in this.table.innerHTML+=r+"</tbody>",r='<caption class="chart-ticks">',s)I=55*(Math.floor(c/2)+1),k=c%2==1?"right":"left",void 0!==p[m]&&(r+='<div class="chart-yAxisTitle '+k+'" style="'+k+":-"+I+'px"><p>'+p[c].title+"</p></div>");for(var C=parseInt(a/50),c=1;c<=C;c++){for(t in r+='<div class="chart-ticksTick'+(1==c?" first ":"")+(c==C?" last ":"")+'">',g){var R,I=30*(Math.floor(t/2)+1),k=t%2==1?"right":"left";0<g[t]&&(R=(R=g[t]-g[t]/C*(c-1))<10?R.toFixed(2):Math.round(R),"left"==k&&(I+=parseFloat(3*(R.toString().length-1))),r+='<p style="'+k+":-"+I+'px">'+R+"</p>")}r+="</div>"}return this.table.innerHTML+="</tbody>"+(r+="</table>"),this.table};r.prototype={mouseover:function(){var r=event.target;n(function(){for(var e=Array.prototype.slice.call(r.closest("table").getElementsByClassName("hover")),t=0;t<e.length;t++)e[t].classList.remove("hover");if(r.closest(".chart-head th")&&r.closest(".chart-head th").getElementsByTagName("span")&&null!=r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value){for(var a=Array.prototype.slice.call(r.closest("table").getElementsByClassName("chart-line "+r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr",""))),t=0;t<a.length;t++)a[t].classList.add("hover");var n=Array.prototype.slice.call(r.closest("table").getElementsByClassName("chart-bar "+r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(t=0;t<n.length;t++)n[t].classList.add("hover")}})},mouseout:function(){var a=event.target;n(function(){for(var e=Array.prototype.slice.call(a.closest("table").getElementsByClassName("hover")),t=0;t<e.length;t++)e[t].classList.remove("hover")})}},t(),e.addEventListener("load-charts",function(){t()}),e.addEventListener("mdl-open",function(){t()}),e.addEventListener("tab-opened",function(){t()}),e.addEventListener("collapse-opened",function(){t()}),window.addEventListener("resize",function(){t()})}(),function(){function a(e){void 0===e?[].forEach.call(document.getElementsByClassName("mdl-o"),function(e){e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))}):(e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))),0<document.getElementsByClassName("mdl-o").length||document.getElementsByTagName("body")[0].classList.remove("b-mdl")}function n(e,t){document.getElementsByTagName("body")[0].classList.toggle("b-mdl"),e.classList.toggle("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-open",{cancelable:!0,detail:{e:t}}))}document.addEventListener("click",function(e){var t=document;e.target.closest("[data-toggle]")&&"mdl"==e.target.closest("[data-toggle]").getAttribute("data-toggle")?n(t.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target")),e.target.closest("[data-toggle]")):e.target.closest("[data-dismiss]")&&"mdl"==e.target.closest("[data-dismiss]").getAttribute("data-dismiss")||e.target.closest(".editorMdl-close")?a(e.target.closest(".mdl")):e.target.closest(".pop")&&(t.getElementsByClassName("imagepreview")[0].setAttribute("src",e.target.closest(".pop").children[0].getAttribute("src")),n(t.getElementById("image-modal"),null))},!0),document.addEventListener("modal-close",function(){a()})}(),function(){function o(e){e.classList.remove("is-active")}function l(){(document.querySelectorAll(".modal")||[]).forEach(function(e){o(e)})}document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&l()}),document.addEventListener("modal-close",function(){l()}),document.addEventListener("click",function(e){var t,a,n,r,s,e=e.target;e.closest(".js-modal-trigger")?(t=e.closest(".js-modal-trigger"),document.getElementById(t.dataset.target).classList.add("is-active"),document.dispatchEvent(new CustomEvent("modal-open"))):e.closest(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button")?o((t=e.closest(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button")).closest(".modal")):e.closest(".modal button.share-feedback")?(a=(t=e.closest(".modal button.share-feedback")).parentNode.getElementsByTagName("textarea")[0],n={reportName:t.hasAttribute("data-name")?t.getAttribute("data-name"):document.title,description:a.value,reportUrl:t.hasAttribute("data-url")?t.getAttribute("data-url"):window.location.href},r=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(s=new XMLHttpRequest).open("post","/Requests?handler=ShareFeedback&"+r,!0),s.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),ShowMessageBox("Thanks for the feedback."),a.value="",l()):e.closest(".modal button.request-access")&&(t=e.closest(".modal button.request-access"),n={reportName:t.getAttribute("report-name"),directorName:t.closest(".modal").querySelector(".director-name").value,reportUrl:window.location.href},r=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(s=new XMLHttpRequest).open("post","/Requests?handler=AccessRequest&"+r,!0),s.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),ShowMessageBox("Your request has been submitted."),l())})}(),function(){function t(e){[].forEach.call(e.querySelectorAll("source[data-srcset]"),function(e){var t;r(e)&&(t=e.getAttribute("data-srcset"),e.setAttribute("srcset",""),e.removeAttribute("data-srcset"),e.setAttribute("srcset",t))})}function a(e){[].forEach.call(e.querySelectorAll("img[data-src]"),function(e){var t;r(e)&&(t=e.getAttribute("data-src"),e.setAttribute("src",""),e.removeAttribute("data-src"),e.setAttribute("src",t))})}function e(){[].forEach.call(n.querySelectorAll("picture"),function(e){a(e),t(e)}),a(n),t(n)}var n=document,r=function(e){var t=e.getBoundingClientRect();return-600<=t.top&&0<=t.left&&t.bottom-e.clientHeight-600<=(document.documentElement.clientHeight||n.documentElement.clientHeight)&&t.right-600-e.clientWidth<=(document.documentElement.clientWidth||n.documentElement.clientWidth)&&null!==e.offsetParent};e(),n.addEventListener("ajax",function(){setTimeout(function(){e()},0)}),n.addEventListener("modal-open",function(){e()}),n.addEventListener("scroll",function(){debounce(e(),100)},{passive:!0})}(),function(){function e(e){var t=document.createElement("ul");(e=e.slice(Math.max(e.length-7,0))).reverse();for(var a=0;a<e.length;a++){for(var n=document.createElement("li"),r=document.createElement("a"),s=(0==a?(r.setAttribute("href","#"),n.classList.add("is-active")):r.setAttribute("href",e[a].url),e[a].title.split(" ")),o="",l=0;l<s.length;l++)if(15<(o+=s[l]+" ").length){l<s.length&&(o+="…",r.classList.add("is-block","has-tooltip-bottom","has-tooltip-arrow"),r.setAttribute("data-tooltip",e[a].title));break}r.innerText=o,n.appendChild(r),t.appendChild(n)}return t}var t,a,n,r;t=-1!=document.title.indexOf(" | ")?document.title.split(" | ")[0]:document.title,a=window.location.href,n={},0!==(r=null!==(r=sessionStorage.getItem("breadcrumbs"))?JSON.parse(r):[]).length&&r[r.length-1].title==t&&r[r.length-1].url==a||(n.title=t,n.url=a,0<r.length&&r[r.length-1].title.startsWith("Search")&&n.title.startsWith("Search")&&r.pop(),r.push(n),sessionStorage.setItem("breadcrumbs",JSON.stringify(r))),t=document.getElementsByClassName("breadcrumb")[0],r.length<=1||(t.innerHTML=e(r).outerHTML,t.style.opacity=1)}(),function(){function e(){for(var e,t,a=document.querySelectorAll(".body-main a[href]"),n=[],r=/[R|r]eports\?id=(\d+)/,s=0;s<a.length;s++)(e=a[s].getAttribute("href").match(r))&&n.push(e[1]);(e=window.location.href.match(r))&&n.push(e[1]),0<n.length&&document.getElementById("AdColTwo")&&((t=document.getElementById("related-reports"))||((t=document.createElement("div")).setAttribute("id","related-reports"),document.getElementById("AdColTwo").appendChild(t)),t.setAttribute("data-url","/Search/?handler=RelatedReports&id="+n.slice(0,5).join(",")),t.setAttribute("data-ajax","yes"),document.dispatchEvent(new CustomEvent("load-ajax-content")))}e(),document.addEventListener("related-reports",function(){e()})}(),1!=getUrlVars().EPIC&&1!=getCookie("EPIC")||setCookie("EPIC",1,99),function(){var d=document;function s(e,t,a){if(e.classList.contains("favorite")){for(var n,r,s,o,l,i=d.querySelectorAll(".favorite-folders .favorites-show-all,.favorite-folders .favorites-folder"),c=0;c<i.length;c++)if(n=i[c],r=(l=getOffset(n)).top,s=l.top+n.offsetHeight,o=l.left,l=l.left+n.offsetWidth,r<a&&a<s&&o<t&&t<l)return n;return!1}}d.addEventListener("click",function(e){var t,a;e.target.closest(".favorites-show-all")?((document.querySelectorAll(".favorites .favorite")||[]).forEach(function(e){e.style.display=""}),(document.querySelectorAll("a.favorites-filter.is-active")||[]).forEach(function(e){e.classList.remove("is-active")}),document.querySelector("input.favorites-filter").value="",(document.querySelectorAll(".favorites-folder.is-active")||[]).forEach(function(e){e.classList.remove("is-active")}),document.querySelector(".favorites-show-all .fa-folder")&&((a=document.querySelector(".favorites-show-all .fa-folder")).classList.remove("fa-folder"),a.classList.add("fa-folder-open")),(document.querySelectorAll(".favorites-folder .fa-folder-open")||[]).forEach(function(e){e.classList.remove("fa-folder-open"),e.classList.add("fa-folder")})):e.target.closest(".favorites-folder")&&(t=e.target.closest(".favorites-folder"),(document.querySelectorAll(".favorites-folder.is-active,.favorites-show-all.is-active")||[]).forEach(function(e){e.classList.remove("is-active")}),(document.querySelectorAll(".favorites-folder .fa-folder-open,.favorites-show-all .fa-folder-open")||[]).forEach(function(e){e.classList.remove("fa-folder-open"),e.classList.add("fa-folder")}),t.querySelector(".fa-folder")&&((a=t.querySelector(".fa-folder")).classList.remove("fa-folder"),a.classList.add("fa-folder-open")),t.classList.add("is-active"),document.querySelectorAll(".favorites .favorite").forEach(function(e){t.dataset.folderid==e.dataset.folderid?e.style.display="":e.style.display="None"}))}),document.addEventListener("click",function(e){var t,a;e.target.closest(".favorite-folder-delete")&&(e.preventDefault(),a=e.target.closest(".favorite-folder-delete"),(t=new XMLHttpRequest).open("post","/users/favorites?handler=DeleteFolder&id="+a.dataset.folderid,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),(a=e.target.closest(".favorites-folder")).parentElement.removeChild(a),document.querySelector(".favorites-show-all").click())}),d.addEventListener("submit",function(e){var t,a;e.target.closest(".favorite-folder-new")&&(e.preventDefault(),t=e.target.closest(".favorite-folder-new"),(a=new XMLHttpRequest).open("post",t.getAttribute("action")+"&name="+t.querySelector("input").value,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),window.location.reload()),e.target.closest(".favorite-folder-rename")&&(e.preventDefault(),t=e.target.closest(".favorite-folder-rename"),document.querySelector('.favorite-folders .favorites-folder[data-folderid="'+t.dataset.folderid+'"] .favorite-folder-name').innerText=t.querySelector("input").value,(a=new XMLHttpRequest).open("post",t.getAttribute("action")+"&name="+t.querySelector("input").value,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),document.dispatchEvent(new CustomEvent("modal-close")))},!1),d.addEventListener("reorder",function(e){var t,a=[],n=0;e.target.closest(".favorite-folders.reorder")?(document.querySelectorAll(".favorites-folder").forEach(function(e){var t={};t.FolderId=e.dataset.folderid,t.FolderRank=n,n++,a.push(t)}),(t=new XMLHttpRequest).open("post","/Users/Favorites?handler=ReorderFolders",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(a))):e.target.closest(".favorites .reorder")&&(document.querySelectorAll(".favorite").forEach(function(e){var t={};t.FavoriteId=e.dataset.favoriteid,t.FavoriteRank=n,t.FavoriteType=e.dataset.type,n++,a.push(t)}),(t=new XMLHttpRequest).open("post","/Users/Favorites?handler=ReorderFavorites",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(a)))},!1),d.addEventListener("dragEnd",function(e){var t,a,n,r;void 0!==e.detail&&(t=s(e.detail.el,e.detail.x,e.detail.y),e.target.closest(".favorite")&&t&&(n=e.detail.el.dataset.folderid,r=document.querySelector('.favorite-folders .favorites-folder[data-folderid="'+n+'"]'),n&&null!==r&&((a=r.querySelector(".fav-count")).innerText=parseInt(a.innerText)-1),n=e.detail.el,r=t,e={},n.dataset.folderid=r.dataset.folderid,e.FavoriteId=n.dataset.favoriteid,e.FolderId=r.dataset.folderid,e.FavoriteType=n.dataset.type,(r=new XMLHttpRequest).open("post","/Users/Favorites?handler=UpdateFavoriteFolder",!0),r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(JSON.stringify(e)),"0"!==t.dataset.folderid&&((a=t.querySelector(".fav-count")).innerText=parseInt(a.innerText)+1),t.click())),document.querySelectorAll(".favorite-folders .is-hover").forEach(function(e){e.classList.remove("is-hover")})}),d.addEventListener("dragMove",function(e){if(void 0!==e.detail){for(var t=d.querySelectorAll(".favorite-folders .favorites-show-all,.favorite-folders .favorites-folder"),a=0;a<t.length;a++)t[a].classList.remove("is-hover");(e=s(e.detail.el,e.detail.x,e.detail.y))&&null!==e&&e.classList.add("is-hover")}},!1),document.addEventListener("click",function(e){var a,t,n;e.target.closest("a.star")?(e.preventDefault(),t=(a=e.target.closest("a.star")).dataset,(n=new XMLHttpRequest).open("get",t.href,!0),n.send(),n.onload=function(){var e,t;a.querySelector(".fa-star").classList.contains("fas")?(a.querySelector(".fa-star").classList.remove("fas"),a.querySelector(".fa-star").classList.add("far"),a.querySelector(".icon").classList.remove("has-text-gold"),a.querySelector(".icon").classList.add("has-text-grey")):(a.querySelector(".fa-star").classList.remove("far"),a.querySelector(".fa-star").classList.add("fas"),a.querySelector(".icon").classList.remove("has-text-grey"),a.querySelector(".icon").classList.add("has-text-gold")),a.querySelector(".star-count")&&"error"!==n.responseText&&(a.querySelector(".star-count").innerText=n.responseText),null!=a.closest(".favorite")&&(t=a.closest(".favorite"),e=a.closest(".favorite").dataset.folderid,t.parentElement.removeChild(t),t=document.querySelector('.favorite-folders .favorites-folder[data-folderid="'+e+'"]'),null!==e&&"0"!=e&&null!=t&&(t.querySelector(".fav-count").innerText=parseInt(t.querySelector(".fav-count").innerText)-1),document.querySelector(".favorites-show-all .fav-count").innerText=parseInt(document.querySelector(".favorites-show-all .fav-count").innerText)-1)}):e.target.closest("a.favorites-filter.is-active")?(a=e.target.closest("a.favorites-filter.is-active"),t=a.dataset,a.classList.remove("is-active"),document.querySelectorAll(".favorites .favorite").forEach(function(e){e.style.display=""})):e.target.closest("a.favorites-filter")&&(a=e.target.closest("a.favorites-filter"),t=a.dataset,document.querySelectorAll("a.favorites-filter.is-active").forEach(function(e){e.classList.remove("is-active")}),document.querySelector("input.favorites-filter").value="",a.classList.add("is-active"),document.querySelectorAll(".favorites .favorite").forEach(function(e){e.classList.contains(t.type)?e.style.display="":e.style.display="None"}))}),document.addEventListener("input",function(e){var r;e.target.closest("input.favorites-filter")&&(r=e.target,document.querySelectorAll("a.favorites-filter.is-active").forEach(function(e){e.classList.remove("is-active")}),document.querySelectorAll(".favorites .favorite").forEach(function(e){var t,a,n;""===r.value.trim()?e.style.display="":(t=r.value,a=e.textContent,n=t.toLowerCase().split(" "),0<a.toLowerCase().split(" ").filter(function(t){return-1!=n.indexOf(t)||0<n.filter(function(e){return-1!=t.indexOf(e)}).length}).length?e.style.display="":e.style.display="None")}))})}(),function(){function s(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-e.clientHeight-400<=(document.documentElement.clientHeight||l.documentElement.clientHeight)&&t.right-400-e.clientWidth<=(document.documentElement.clientWidth||l.documentElement.clientWidth)}function t(e){var t,a=e.getAttribute("data-url"),n=e.getAttribute("data-param"),r=e.getAttribute("data-loadtag");e.classList.contains("no-loader")||(e.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==n&&""!==n&&(-1!=a.indexOf("?")?a+="&":a+="?",a+=n),(t=new XMLHttpRequest).open("get",a,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){o(e,r,t.responseText)}}function e(){[].forEach.call(l.querySelectorAll('[data-ajax="yes"]'),function(e){e.closest("#AdColOne")||e.closest('#AdColTwo [data-ajax="yes"]')||!s(e)||null===e.offsetParent||(t(e),e.removeAttribute("data-ajax"),e.addEventListener("reload",function(){t(e)}))})}function a(){[].forEach.call(l.querySelectorAll('#AdColTwo [data-ajax="yes"]'),function(e){var t,a,n,r;s(e)&&(t=e.getAttribute("data-url"),a=e.getAttribute("data-param"),n=e.getAttribute("data-loadtag"),e.classList.contains("no-loader")||(e.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==a&&""!==a&&(-1!=t.indexOf("?")?t+="&":t+="?",t+=a),e.style.visibility="hidden",e.removeAttribute("data-ajax"),(r=new XMLHttpRequest).open("get",t,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),r.onload=function(){o(e,n,r.responseText)})})}var l=document,o=function(e,t,a){if(null!=e)try{if(e.style.visibility="hidden",e.style.transition="visibility 0.3s ease-in-out",!e.parentNode)return;var n=l.createElement("div");if(n.innerHTML=a,null!==t&&""!==t?(n=n.querySelector(t)).setAttribute("data-loadtag",t):n=n.children[0],e.innerHTML=n.innerHTML,e.querySelector('script:not([type="application/json"])'))for(var r=Array.prototype.slice.call(e.querySelectorAll('script:not([type="application/json"])')),s=0;s<r.length;s++){var o=l.createElement("script");o.innerHTML=r[s].innerHTML,o.type="text/javascript",r[s].hasAttribute("src")&&(o.setAttribute("src",r[s].hasAttribute("src")),o.setAttribute("async","true")),e.appendChild(o),r[s].parentNode.removeChild(r[s])}e.style.visibility="visible",l.dispatchEvent(new CustomEvent("ajax"))}catch(e){console.log(e)}};e(),a(),l.addEventListener("load-ajax-content",function(){e(),a()}),l.addEventListener("modal-open",function(){e()}),l.addEventListener("panel-tab-opened",function(){e()}),l.addEventListener("step-tab-opened",function(){e()}),l.addEventListener("tab-opened",function(){e()}),l.addEventListener("scroll",function(){debounce(e(),100),debounce(a(),100)},{passive:!0})}(),document.addEventListener("click",function(e){e.target.matches(".message-close")&&e.target.parentElement.matches(".message-wrapper")&&e.target.parentElement.classList.add("hidden")}),document.addEventListener("show-message",function(e){var t,a;void 0!==e.detail&&e.detail&&e.detail.value&&(e=e.detail.value,t=document,a=t.getElementsByClassName("message-wrapper")[0],t.querySelector(".message-container .message-inner").innerHTML=e,a.classList.remove("hidden"),setTimeout(function(){a.classList.add("hidden")},2e3))},!1),function(){document.execCommand("defaultParagraphSeparator",!1,"div");function m(){var e=document.createElement("div");null!==t&&t.abort(),(t=new XMLHttpRequest).open("post","/mail?handler=CheckForMail",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){e.innerHTML=t.responseText,a(e)}}function a(e){var t,a=v.getElementsByClassName("mail-unread-cnt"),n=v.getElementsByClassName("mail-all-cnt"),r=0,s=e.querySelector("#unread_message_count").innerHTML,d=e.querySelector("#total_message_count").innerHTML,o=e.querySelector("#draft_message_count").innerHTML,l=e.querySelector("#new_message_alerts");for(v.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt")&&(v.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt").innerHTML=0<o?o:""),r=0;r<a.length;r++)0<s?(a[r].style.display="inline-block",a[r].innerHTML=s):(a[r].style.display="none",a[r].innerHTML="");for(r=0;r<n.length;r++)n[r].innerHTML=d;if(0<l.innerHTML.length&&((t=document.getElementsByClassName("mail-notification-container")[0]).innerHTML=l.innerHTML,t.style.transition="margin-right .5s",t.style.marginRight="500px",t.clientWidth,setTimeout(function(){t.style.marginRight="0px"},1e4)),null!==v.querySelector("#mlbx-fldrsInbox.active")){var i=document.createElement("div");if(i.innerHTML=e.querySelector("#new_message_previews").innerHTML,0<i.innerHTML.length)for(var c,u=Array.prototype.slice.call(v.querySelectorAll(".mlbx-msgsMsg[data-rep-id]")),r=0;r<u.length;r++)null!==(c=i.querySelector('.mlbx-msgsMsg[data-rep-id="'+u[r].getAttribute("data-rep-id")+'"]'))&&(c.parentElement.removeChild(c.nextElementSibling),c.parentElement.removeChild(c));i.querySelector(".mlbx-msgsMsg.active")&&i.querySelector(".mlbx-msgsMsg.active").classList.remove("active"),0<v.querySelector(".mlbx-msgs .ss-content").children.length?v.querySelector(".mlbx-msgs .ss-content").children[0].insertAdjacentHTML("beforebegin",i.innerHTML):v.querySelector(".mlbx-msgs .ss-content").innerHTML=i.innerHTML}}function o(t,a){v.getElementsByClassName("mlbx-rdr")[0].innerHTML="",null!==n&&n.abort(),n=new XMLHttpRequest,null!==t&&n.open("get","mail?handler=Messages&folder="+t,!0),null!=a&&n.open("get","mail?handler=Messages?folderId="+a,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n.onload=function(){var e=v.getElementsByClassName("mlbx-msgsScroll")[0];e.classList.remove("ss-container"),e.innerHTML=n.responseText,document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:e}})),"inbox"==t||"deleted"==t||"sent"==t||null!=a?v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")&&l(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-rep-id")):"drafts"==t&&(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")?f(v.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-draft-id")):p())}}function f(a){c=null,n&&n.abort(),(n=new XMLHttpRequest).open("get","mail?handler=DraftDetails&id="+a,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n.onload=function(){var e=v.createElement("div"),t=(e.innerHTML=n.responseText,v.createElement("input"));t.setAttribute("name","draftId"),t.setAttribute("value",a),t.style.display="none",e.querySelector("form").appendChild(t),v.getElementsByClassName("mlbx-rdr")[0].innerHTML=e.getElementsByClassName("mlbx-newMsg")[0].outerHTML,document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:v.querySelector("#new_msg_dynamic-dropdown")}})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:v.querySelector(".mlbx-rdr .mlbx-newMsg")}})),v.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("input",function(){d(this)}),v.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("change",function(){d(this)})}}function h(e){var t=new XMLHttpRequest;t.open("post","mail?handler=MarkMessageRead&id="+e,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send()}function p(e,t,a,n){c=null;for(var r=v.querySelectorAll(".mlbx-msgsMsg.active.unread"),s=0;s<r.length;s++)r[s].classList.remove("unread"),h(r[s].getAttribute("data-rep-id"));v.querySelector(".mlbx-msgsMsg.active")&&v.querySelector(".mlbx-msgsMsg.active").classList.remove("active");var o,l,i=v.getElementsByClassName("mlbx-rdr")[0];i.innerHTML="",i.appendChild(v.querySelector(".new_message_template .mlbx-newMsg").cloneNode(!0)),i.querySelector("form.mlbx-newMsgForm").addEventListener("input",function(){d(this)}),i.querySelector("form.mlbx-newMsgForm").addEventListener("change",function(){d(this)}),document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:i.querySelector("#new_msg_dynamic-dropdown")}})),void 0!==n&&(i.querySelector("#convid").value=n),void 0!==t&&(i.querySelector(".mlbx-newMsgSubjIpt").innerHTML=t),void 0!==a&&(i.querySelector(".mlbx-newMsgMsg").innerHTML=a.innerHTML),void 0!==e&&null!=e&&(o=i.querySelector(".dd-cntr .dd-wrp"),l=i.querySelector(".dd-cntr select.dd-hdn"),e.forEach(function(e){l.innerHTML+='<option selected="selected" class="'+e[2]+'" value="'+e[0]+'">'+e[1]+"</option>",o.children[0].insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e[2]+'">'+e[1]+"</div>")})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:i.querySelector(".mlbx-newMsg")}}))}function l(e){v.getElementsByClassName("mlbx-rdr")[0]&&(n&&n.abort(),(n=new XMLHttpRequest).open("get","mail?handler=MessageDetails&id="+e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n.onload=function(){v.getElementsByClassName("mlbx-rdr")[0]&&(v.getElementsByClassName("mlbx-rdr")[0].innerHTML=n.responseText),document.dispatchEvent(new CustomEvent("ss-load"))})}var v=document,t=null,n=null,c=null,i=null,u=null,d=function(t){var e;null!==c&&t.querySelector('input[name="draftId')&&c.abort(),null!==c&&!t.querySelector('input[name="draftId')||(e={To:t.querySelector(".dd-cntr .dd-hdn").innerHTML,Subject:t.querySelector(".mlbx-newMsgSubjIpt").innerHTML,Message:t.querySelector(".mlbx-newMsgMsg").innerHTML,Text:t.querySelector(".mlbx-newMsgMsgBx").innerText.replace(/\n/g," "),MsgId:null,ConvId:null},t.querySelector('input[name="draftId')&&(e.DraftId=t.querySelector('input[name="draftId').getAttribute("value")),(c=new XMLHttpRequest).open("post","mail?handler=SaveDraft",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(JSON.stringify(e)),c.onload=function(){var e;null==t.querySelector('input[name="draftId')&&((e=v.createElement("input")).setAttribute("name","draftId"),e.setAttribute("value",c.responseText),e.style.display="none",t.appendChild(e))})};setInterval(function(){void 0!==window.ajaxOn&&1!=window.ajaxOn||m()},1e4),document.addEventListener("loadMessage",function(e){void 0!==e.detail&&l(e.detail.id)}),v.addEventListener("click",function(e){if(e.target.closest(".mlbx-msgsMsg")){for(var t=e.target.closest(".mlbx-msgsMsg"),a=v.querySelectorAll(".mlbx-msgsMsg.active:not(.deleted"),n=0;n<a.length;n++)a[n].classList.remove("active"),v.querySelector("#mlbx-fldrsInbox.active")&&a[n].classList.contains("unread")&&(a[n].classList.remove("unread"),h(a[n].getAttribute("data-rep-id")));t.classList.add("active"),v.querySelector("#mlbx-fldrsInbox.active")&&t.classList.contains("unread")&&(t.classList.remove("unread"),h(t.getAttribute("data-rep-id"))),v.querySelector("#mlbx-fldrsDrafts.active")?f(t.getAttribute("data-draft-id")):l(t.getAttribute("data-rep-id")),m()}else{var r,s;e.target.closest(".mail-new-message")?(t=e.target.closest(".mail-new-message").getAttribute("data-from"),s=e.target.closest(".mail-new-message").getAttribute("data-fromid"),t&&s?p([[s,t]]):p()):e.target.closest(".mlbx-usrDrp")?(e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").style.display="block",e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").addEventListener("mouseleave",function e(){this.style.removeProperty("display"),this.removeEventListener("mouseleave",e,!1)})):e.target.closest("#mlbx-fldrsDrafts")?(o("drafts"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDrafts").classList.add("active")):e.target.closest("#mlbx-fldrsInbox")?(o("inbox"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsInbox").classList.add("active")):e.target.closest("#mlbx-fldrsSent")?(o("sent"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsSent").classList.add("active")):e.target.closest("#mlbx-fldrsDeleted")?(o("deleted"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDeleted").classList.add("active")):!e.target.closest(".mail-delete-message")||null!=(r=v.querySelector(".mlbx-msgsMsg.active:not(.deleted)"))&&(s=function(e,t){var a=e.nextElementSibling;if(!t)return a;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}if(a=e.previousElementSibling,!t)return a;for(;a;){if(a.matches(t))return a;a=a.previousElementSibling}}(r,".mlbx-msgsMsg"),r.hasAttribute("data-draft-id")?((i=new XMLHttpRequest).open("post","mail?handler=DeleteDraft&id="+r.getAttribute("data-draft-id"),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),void 0!==s?(f(s.getAttribute("data-draft-id")),s.classList.add("active")):v.querySelector(".mlbx-rdr").innerHTML=""):r.hasAttribute("data-rep-id")&&((i=new XMLHttpRequest).open("post","mail?handler=DeleteMessage&id="+r.getAttribute("data-rep-id"),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),void 0!==s?(l(s.getAttribute("data-rep-id")),s.classList.add("active")):v.querySelector(".mlbx-rdr").innerHTML=""),e=parseFloat(r.clientWidth),s=parseFloat(r.clientHeight),r.style.transition="margin-left 150ms, margin-right 150ms, margin-top 150ms",r.style.zIndex="-1",r.clientHeight,r.style.marginLeft=-e+"px",r.style.marginRight=e+"px",r.style.marginTop=-s+"px",r.classList.add("deleted"),setTimeout(function(){null!==r&&(r.parentElement.removeChild(r.nextElementSibling),r.parentElement.removeChild(r))},150))}}),v.addEventListener("submit",function(e){if(e.target.closest(".mlbx-newMsgForm")){e.preventDefault();var e=e.target.closest(".mlbx-newMsgForm"),t=[],a=e.querySelectorAll('.mlbx-newMsgRecip select option, .mail-to input[type="hidden"]');if(null!=a){console.log(a);for(var n=0;n<a.length;n++){var r=a[n].classList.contains("group")?"g":"";t.push({UserId:a[n].value,Type:r})}}var s,o=e.querySelector(".mlbx-newMsgSubjIpt")?e.querySelector(".mlbx-newMsgSubjIpt").innerText:e.querySelector("input.mail-subject").value,l=e.querySelector(".mlbx-newMsgMsg")?(s=e.querySelector(".mlbx-newMsgMsg").innerHTML,e.querySelector(".mlbx-newMsgMsg").innerText.replace(/\n/g," ")):s=e.querySelector('textarea[name="mail-message"]').value,i=e.querySelector(".mlbx-share")?"1":"0",c=e.querySelector(".mlbx-shareName")?e.querySelector(".mlbx-shareName").value:"",d=e.querySelector(".mlbx-shareUrl")?e.querySelector(".mlbx-shareUrl").value:window.location.href,o={To:JSON.stringify(t),Subject:o,Message:s,Text:l,Share:i,ShareName:c,ShareUrl:d};null!==e.querySelector('input[name="draftId"]')&&(s=e.querySelector('input[name="draftId"]').value,o.DraftId=s,v.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]')&&v.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]').parentElement.removeChild(v.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]'))),(u=new XMLHttpRequest).open("post",e.getAttribute("action"),!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(JSON.stringify(o)),u.onload=function(){m()},document.dispatchEvent(new CustomEvent("show-message",{cancelable:!0,detail:{value:"Messages sent! ¯\\_(ツ)_/¯"}})),null!==v.querySelector(".mlbx-rdr")&&(v.querySelector(".mlbx-rdr").innerHTML=""),v.dispatchEvent(new CustomEvent("modal-close"))}},!1),v.addEventListener("click",function(d){var e,t,a;if(d.target.closest(".mail-reply")&&null!==v.querySelector("#mlbx-fldrsInbox.active")){for(r=(n=v.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),u="Re: "+n.querySelector(".mailbox-subject").innerText,l=[[(s=n.querySelector("div.mailbox-sender-user")).getAttribute("data-user-id"),s.querySelector("span").innerText,""]],e=document.createElement("div"),(t=document.createElement("div")).classList.add("message-reply"),t.innerHTML=v.querySelector(".mlbx-rdr .ss-content").innerHTML,t.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(t.querySelector(".mlbx-rdrHead-controls")),a=t.querySelectorAll(".mlbx-usrDrp"),i=0;i<a.length;i++)a[i].parentElement.removeChild(a[i]);e.innerHTML="<br><br><br>",e.appendChild(t),p(l,u,e,r)}else if(d.target.closest(".mail-reply-all")&&null!==v.querySelector("#mlbx-fldrsInbox.active")){for(var n,r=(n=v.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),u="Re: "+n.querySelector(".mailbox-subject").innerText,s=n.querySelectorAll("div.mailbox-sender-user"),o=n.querySelectorAll("div.mailbox-to-user"),l=[],i=0;i<s.length;i++)l.push([s[i].getAttribute("data-user-id"),s[i].querySelector("span").innerText,s[i].classList.contains("group")?"group":""]);for(i=0;i<o.length;i++)l.push([o[i].getAttribute("data-user-id"),o[i].querySelector("span").innerText,o[i].classList.contains("group")?"group":""]);for(var m={},f=[],c=0;c<l.length;c++)l[c]in m||(f.push(l[c]),m[l[c]]=!0);for(l=f,e=document.createElement("div"),(t=document.createElement("div")).classList.add("message-reply"),t.innerHTML=v.querySelector(".mlbx-rdr .ss-content").innerHTML,t.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(t.querySelector(".mlbx-rdrHead-controls")),a=t.querySelectorAll(".mlbx-usrDrp"),i=0;i<a.length;i++)a[i].parentElement.removeChild(a[i]);e.innerHTML="<br><br><br>",e.appendChild(t),p(l,u,e,r)}})}(),function(){window.ajaxOn=!0;function a(e){var t={},a=navigator,n=window,r=document,s=n.location;return t.appCodeName=a.appCodeName,t.appName=a.appName,t.appVersion=a.appVersion,t.cookieEnabled=a.cookieEnabled,t.language=a.language,t.oscpu=a.oscpu,t.platform=a.platform,t.userAgent=a.userAgent,t.host=s.host,t.hostname=s.hostname,t.href=s.href,t.protocol=s.protocol,t.search=s.search,t.pathname=s.pathname,t.hash=s.hash,t.screenHeight=r.documentElement.clientHeight,t.screenWidth=r.documentElement.clientWidth,t.origin=n.origin,t.title=r.title,t.referrer=r.referrer,t.loadTime=e||n.performance.timing.domContentLoadedEventEnd-n.performance.timing.navigationStart,t.zoom=n.devicePixelRatio,t.sessionId=l(),t.pageId=i(),t.pageTime=(new Date).getTime()-o.getTime(),t}function t(e,t){"newpage"==t&&(i("reset"),window.ajaxOn=!0),!0===window.ajaxOn&&(navigator.sendBeacon?navigator.sendBeacon("/analytics?handler=Beacon",JSON.stringify(a(e))):((t=new XMLHttpRequest).open("post","/analytics?handler=Beacon",!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(a(e))))),d()}function e(){debounce((window.clearTimeout(r),c(),void(window.ajaxOn=!0)),500)}function n(){document.addEventListener("mousemove",e,!1),document.addEventListener("mousedown",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("touchmove",e,!1),document.addEventListener("scroll",e,{passive:!0},!1),c()}function d(){window.clearTimeout(s),m()}var r,s,o=new Date,l=function(e){return"clear"==e?(sessionStorage.removeItem("_sid"),!1):("reset"!=e&&void 0!==sessionStorage._sid||(sessionStorage._sid=btoa((new Date).toString()),i("reset"),o=new Date),sessionStorage._sid)},i=function(e){return"reset"!=e&&void 0!==sessionStorage._pid||(o=new Date,sessionStorage._pid=btoa((new Date).toString())),sessionStorage._pid},c=function(){r=window.setTimeout(u,12e4),l()},u=function(){window.ajaxOn=!1,l("clear"),sessionStorage.clear()},m=function(){s=window.setTimeout(t,3e4)};"complete"==document.readyState&&(n(),t()),window.addEventListener("load",function(){n(),t()},!1),document.addEventListener("analytics-post",function(e){void 0!==e.detail&&t(e.detail.value,e.detail.type)}),document.addEventListener("click",function(e){if(e.target.closest(".dropdown.is-select .dropdown-item")){(e.target.closest(".dropdown").querySelectorAll(".dropdown-item.is-active")||[]).forEach(function(e){e.classList.remove("is-active")}),e.target.classList.add("is-active");var e=e.target.closest(".dropdown.is-select .dropdown-item"),t=(e.closest(".dropdown").querySelector(".select-value").innerText=e.innerText,document.getElementById(e.closest(".dropdown").dataset.target)),a=new Date;switch(e.dataset.range){case"1":console.log("1"),t.dataset.param="start_at="+differenceInSeconds(startOfDay(a),a)+"&end_at="+differenceInSeconds(endOfDay(a),a);break;default:case"2":console.log("2"),t.dataset.param="start_at="+differenceInSeconds(addHours(a,-24),a)+"&end_at=0";break;case"3":console.log("3"),t.dataset.param="start_at="+differenceInSeconds(startOfWeek(a,-24),a)+"&end_at="+differenceInSeconds(endOfWeek(a),a);break;case"4":console.log("4"),t.dataset.param="start_at="+differenceInSeconds(startOfDay(addDays(a,-7)),a)+"&end_at=0";break;case"5":console.log("5"),t.dataset.param="start_at="+differenceInSeconds(startOfMonth(a),a)+"&end_at="+differenceInSeconds(endOfMonth(a),a);break;case"6":console.log("6"),t.dataset.param="start_at="+differenceInSeconds(startOfDay(addDays(a,-30)),a)+"&end_at=0";break;case"7":console.log("7"),t.dataset.param="start_at="+differenceInSeconds(startOfDay(addDays(a,-90)),a)+"&end_at=0";break;case"8":console.log("8"),t.dataset.param="start_at="+differenceInSeconds(startOfYear(a),a)+"&end_at="+differenceInSeconds(endOfYear(a),a);break;case"9":console.log("9"),t.dataset.param="start_at="+differenceInSeconds(addYears(a,-10),a)+"&end_at=0";break;case"10":console.log("10")}document.getElementById(e.closest(".dropdown").dataset.target).dispatchEvent(new CustomEvent("reload"))}})}(),(document.querySelectorAll(".navbar-burger")||[]).forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,e=document.getElementById(e);t.classList.toggle("is-active"),e.classList.toggle("is-active")})}),function(){function a(e){e.classList.remove("is-active")}function d(){(document.querySelectorAll(".mini")||[]).forEach(function(e){a(e)})}function u(e){for(var t=e.querySelectorAll('input[type="hidden"][name]:not(.drag)'),a=0;a<t.length;a++)t[a].setAttribute("name",t[a].getAttribute("name").replace(/\[\d*?\]/,"["+a+"]"))}function c(l,e,i,c){e=JSON.parse(e);if(0===e.length)l.innerHTML='<div class="mini-waiting">No matches found.</div>';else{l.innerText="";var t,a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=document.createElement("a");r.classList.add("mini-item"),r.innerText=n.Name,r.setAttribute("value",n.ObjectId||n.Description),r.addEventListener("click",function(e){var t,a,n,r,s,o;c.classList.contains("multiselect")?c.classList.contains("multiselect")&&(t=c.closest(".field").parentNode.querySelector(".mini-tags"),(a=document.createElement("div")).classList.add("control"),(n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("value",e.target.getAttribute("value")),c.hasAttribute("data-name")&&n.setAttribute("name",c.getAttribute("data-name")),(r=document.createElement("div")).classList.add("tags","has-addons"),(s=document.createElement("span")).classList.add("tag","is-link"),s.innerText=e.target.innerText,(o=document.createElement("a")).classList.add("tag","is-delete"),o.addEventListener("click",function(){a.parentElement.removeChild(a),u(t)}),t.classList.contains("reorder")&&(a.classList.add("drg"),s.classList.add("drg-hdl")),a.appendChild(r),r.appendChild(s),r.appendChild(n),r.appendChild(o),null!=t&&(t.appendChild(a),u(t)),c.value="",c.hasAttribute("lookup-area")&&f(c,l),c.classList.contains("mini-close-fast")&&d()):(c.value=e.target.innerText,i.value=e.target.getAttribute("value"),d())}),l.appendChild(r)}}catch(e){a.e(e)}finally{a.f()}l.querySelectorAll(".mini-item:not(.hidden)").length<1&&(l.innerHTML+='<div class="mini-waiting">No matches found.</div>')}}var m=null;function f(t,e){e.querySelectorAll(".mini-item").forEach(function(e){""===t.value||-1!=e.innerText.toLowerCase().indexOf(t.value.toLowerCase())?e.style.display="":e.style.display="none"})}var p=null;function e(){(document.querySelectorAll(".mini-tags .tag.is-delete")||[]).forEach(function(a){a.addEventListener("click",function(){var e=a.closest(".control"),t=a.closest(".mini-tags");e.parentElement.removeChild(e),u(t)})}),(document.querySelectorAll(".input-mini:not(.loaded)")||[]).forEach(function(s){s.classList.add("loaded");var t,a,e,n,r,o=s.parentElement.querySelector(".mini"),l=s.parentElement.querySelector('input[type="hidden"], select.is-hidden'),i=s.parentElement.parentElement.querySelector(".mini-clear");s.addEventListener("click",function(){d(),o.classList.add("is-active")}),s.hasAttribute("search-area")?s.addEventListener("input",function(){window.clearTimeout(p),p=window.setTimeout(function(){var t,a,e,n,r;a=o,e=(t=s).getAttribute("search-area"),n=l,r=t.value,0<t.value.length?(null!==m&&m.abort(),(m=new XMLHttpRequest).open("post","/Search?handler="+e+"&s="+r,!0),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(),m.onload=function(){var e=m.responseText;c(a,e,n,t)}):a.innerHTML='<div class="mini-waiting">\n                    <span class="icon">\n                        <i class="fas fa-circle-notch fa-spin"></i>\n                    </span>\n                </div>',window.clearTimeout(p)},250)}):s.hasAttribute("lookup-area")&&(a=o,e=(t=s).getAttribute("lookup-area"),n=l,(r=new XMLHttpRequest).open("post","/Search?handler=ValueList&s="+e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),r.onload=function(){var e=r.responseText;c(a,e,n,t)},s.classList.contains("multiselect")&&s.addEventListener("input",function(){f(s,o)})),null!=i&&i.addEventListener("click",function(){l.value="",s.value=""})}),(document.querySelectorAll(".mini-background:not(.loaded), .mini-close:not(.loaded), .mini-card-head:not(.loaded) .delete:not(.loaded), .mini-card-foot:not(.loaded) .button:not(.loaded)")||[]).forEach(function(e){var t=e.closest(".mini");e.classList.add("loaded"),e.addEventListener("click",function(){a(t)})}),window.onclick=function(e){e.target.closest(".mini,.input-mini")||d()},document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&d()}),(document.querySelectorAll(".mini-tags a.is-delete[value]:not(.loaded)")||[]).forEach(function(a){a.classList.add("loaded"),a.addEventListener("click",function(){var e=a.closest(".field:not(.mini-tags)").querySelector("select.is-hidden"),t=a.closest(".control");e.removeChild(e.querySelector('option[value="'+a.getAttribute("value")+'"]')),t.parentNode.removeChild(t)})}),(document.querySelectorAll(".mini-tags.reorder:not(.loaded)")||[]).forEach(function(e){e.classList.add("loaded"),e.addEventListener("reorder",function(){u(e)})})}e(),document.addEventListener("ajax",function(){e()})}(),function(){function t(){(document.querySelectorAll(".dropdown:not(.is-hoverable)")||[]).forEach(function(e){e.classList.remove("is-active")})}document.addEventListener("click",function(e){e.target.closest(".dropdown.is-active")||t()}),document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&t()}),document.addEventListener("click",function(e){var t;e.target.closest(".dropdown:not(.is-hoverable)")&&(t=e.target.closest(".dropdown:not(.is-hoverable)"),e.stopPropagation(),t.classList.contains("is-active")?t.classList.remove("is-active"):t.classList.add("is-active"))})}();