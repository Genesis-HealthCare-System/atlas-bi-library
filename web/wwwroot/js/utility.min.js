"use strict";function _createForOfIteratorHelper(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}!function(){var r=document;function t(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("tab-lnk")}),n=r.getElementById(e.getAttribute("href").replace("#","")),a=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("tab-dta")});[].forEach.call(a,function(e){e.classList.remove("active")}),[].forEach.call(t,function(e){e.classList.remove("active")}),n.classList.add("active"),e.classList.add("active"),r.dispatchEvent(new CustomEvent("tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}r.addEventListener("click",function(e){e.target.closest(".tab-lnk")&&(e.preventDefault(),t(e.target.closest(".tab-lnk")))},!1),r.addEventListener("tab-open",function(e){void 0!==e.detail&&e.detail.el&&t(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("tab-open",{cancelable:!0,detail:{el:document.querySelector('.tab-lnk[href="'+document.location.hash.replace("#","")+'"], .tab-lnk[href="'+document.location.hash+'"]')}}))}(),function(){(document.querySelectorAll(".panel-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),console.log("clicked"),n(t)},!1)});var r=document;function n(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("panel-tab")}),n=r.getElementById(e.getAttribute("href").replace("#","")),a=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("panel-tab-data")});[].forEach.call(a,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),n.classList.add("is-active"),e.classList.add("is-active"),r.dispatchEvent(new CustomEvent("panel-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}r.addEventListener("panel-tab-open",function(e){void 0!==e.detail&&e.detail.el&&n(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("panel-tab-open",{cancelable:!0,detail:{el:document.querySelector('.panel-tab[href="'+document.location.hash.replace("#","")+'"], .panel-tab[href="'+document.location.hash+'"]')}}))}(),function(){(document.querySelectorAll(".step-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),console.log("clicked"),n(t)},!1)});var r=document;function n(e){var t=[].slice.call(e.closest(".steps").querySelectorAll(".steps-segment")),n=r.getElementById(e.getAttribute("href").replace("#","")),a=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("step-tab-data")});[].forEach.call(a,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),n.classList.add("is-active"),e.closest(".steps-segment").classList.add("is-active"),r.dispatchEvent(new CustomEvent("step-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}r.addEventListener("step-tab-open",function(e){void 0!==e.detail&&e.detail.el&&n(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("step-tab-open",{cancelable:!0,detail:{el:document.querySelector('.step-tab[href="'+document.location.hash.replace("#","")+'"], .step-tab[href="'+document.location.hash+'"]')}}))}(),function(){var s=document;function l(e){e.style.maxHeight=e.scrollHeight+20+"px"}function o(e){e.style.maxHeight=null,e.style.overflow="hidden",e.classList.remove("clps-o")}function n(t){t.classList.add("clps-o"),l(t);for(var e=t;e=e.parentElement.closest(".clps-o");)e.style.removeProperty("max-height");s.dispatchEvent(new CustomEvent("collapse-opened"));for(var n=t.parentElement.querySelector(".clps-o"),a=[];n;)n!==t&&n.nodeType===Node.ELEMENT_NODE&&a.push(n),n=n.nextElementSibling||n.nextSibling;for(var r=0;r<a.length;r++)o(a[r]);window.setTimeout(function(){for(var e=t.parentElement.closest(".clps-o");e;)l(e),e=e.parentElement.closest(".clps-o");t.classList.contains("clps-o")&&(t.style.overflow="visible")},300)}s.addEventListener("click",function(e){var t;e.target.closest('[data-toggle="clps"]')?null!=(t=s.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("clps-o")?o:n)(t):e.target.closest(".clps:not(.clps-o")&&n(e.target.closest(".clps:not(.clps-o"))}),s.addEventListener("change",function(t){if(t.target.closest(".clps-o")){for(var e=t.target.closest(".clps-o");e;)e.style.removeProperty("max-height"),e=e.parentElement.closest(".clps-o");window.setTimeout(function(){for(var e=t.target.closest(".clps-o");e;)l(e),e=e.parentElement.closest(".clps-o")},300)}}),s.addEventListener("clps-close",function(e){void 0!==e.detail&&o(e.detail.el)},!1),s.addEventListener("clps-open",function(e){void 0!==e.detail&&n(e.detail.el)},!1)}(),function(){var n=document;n.addEventListener("click",function(e){var t;e.target.closest('[data-action="collapse"]')&&(e=e.target.closest('[data-action="collapse"]'),null!=(t=n.getElementById(e.getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("is-active")?(t.classList.remove("is-active"),e.classList.remove("is-active")):(t.classList.add("is-active"),e.classList.add("is-active"))))})}(),function(){var e=document;function t(){for(var e=document.getElementsByClassName("carousel"),t=0;t<e.length;t++)e[t].classList.contains("carousel-p")||new n(e[t])}function n(e){this.target=e,this.next=e.getElementsByClassName("carousel-next")[0],this.prev=e.getElementsByClassName("carousel-prev")[0],this.dots=e.getElementsByClassName("carousel-dot"),this.slides=e.getElementsByClassName("carousel-itm"),this.target.classList.add("carousel-p"),this.next.addEventListener("click",this.showSlides.bind(this,1),!1),this.prev.addEventListener("click",this.showSlides.bind(this,-1),!1);for(var t=0;t<this.dots.length;t++)this.dots[t].addEventListener("click",this.showSlides.bind(this,0),!1)}var l=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};n.prototype={showSlides:function(e,t){var n,a,r=this.slides,s=this.dots;l(function(){if(t.target.matches(".carousel-dot"))e=t.target.getAttribute("slide");else{for(n=0;n<r.length;n++)if(0<r[n].offsetHeight&&0<r[n].offsetWidth){a=r[n];break}e+=Array.prototype.indexOf.call(r,a)}for((e=e>=r.length?0:e)<0&&(e=r.length-1),n=0;n<r.length;n++)r[n].style.display="none";for(n=0;n<s.length;n++)s[n].classList.remove("active");r[e].style.display="block",s[e].classList.add("active")})}},t(),e.addEventListener("load-carousel",function(){t()})}(),function(){function e(){setTimeout(function(){for(var e=i.querySelectorAll("table.sort"),t=0;t<e.length;t++){var n=e[t];if(!n.querySelectorAll("th .icon-sm").length)for(var a=n.getElementsByTagName("th"),r=0;r<a.length;r++){var s=a[r];s.style.cursor="pointer",s.innerHTML+='<svg class="icon-sm" viewBox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"/></svg>',s.parentElement.style.whiteSpace="nowrap",function(a){a.addEventListener("click",function(){var e=this.closest("table.sort"),t=Array.from(e.querySelectorAll("tr")).slice(1).sort(l(o(a)-1));this.asc=!this.asc,this.asc||(t=t.reverse());for(var n=0;n<t.length;n++)e.append(t[n])})}(s)}}},0)}function l(n){return function(e,t){e=r(e,n).replace("$",""),t=r(t,n).replace("$","");return/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(e)&&/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(t)?new Date(e)-new Date(t):a(e)&&a(t)?e-t:e.toString().localeCompare(t)}}function o(e){if(!e)return-1;for(var t=0;e;)t++,e=e.previousElementSibling;return t}var i=document,a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r=function(e,t){return e.getElementsByTagName("td")[t].textContent};i.addEventListener("ajax",function(){e()}),e()}(),function(){var n,a,r=document,s=0,l=0,o=(r.addEventListener("mousedown",function(e){var t;e.target.closest(".drg-hdl")&&(a=e.target.closest(".drg"),n=a.cloneNode(!0),a.classList.add("drag-source"),n.classList.add("drag"),n.style.width=a.offsetWidth+1+"px",t=getComputedStyle(a),console.log(parseInt(t.marginTop)),console.log(parseInt(t.marginLeft)),s=e.clientY-getOffset(a).top+parseInt(t.marginTop),l=e.clientX-getOffset(a).left+parseInt(t.marginLeft),a.parentElement.style.position="relative",a.parentElement.appendChild(n),n.style.top=e.clientY-s+"px",n.style.left=e.clientX-l+"px",o(e))},!1),function(e){(e=e||window.event).preventDefault(),r.addEventListener("mouseup",t),r.addEventListener("mousemove",i)}),i=function(e){(e=e||window.event).preventDefault(),n.style.top=e.clientY-s+"px",n.style.left=e.clientX-l+"px",r.dispatchEvent(new CustomEvent("dragMove",{cancelable:!0,detail:{el:n,x:e.clientX,y:e.clientY}}))},t=function e(t){a.parentElement.replaceChild(n,a),n.classList.remove("drag"),r.dispatchEvent(new CustomEvent("dragEnd",{cancelable:!0,detail:{el:n,x:t.clientX,y:t.clientY}})),n.style.width=null,n.style.top=null,n.style.left=null,r.removeEventListener("mouseup",e),r.removeEventListener("mousemove",i)}}();var dragMoveOrder=function(e){var l,o,i,t=e.detail.el,n=e.detail.x,e=e.detail.y;t.closest(".reorder")&&(l=e,o=n,i=t.closest(".reorder").querySelector(".drg.drag-source"),t.closest(".reorder").querySelectorAll(".drg:not(.drag-source):not(.drag)").forEach(function(e){var t=getOffset(e),n=t.top,a=t.top+e.clientHeight,r=t.left,s=t.left+e.clientWidth/2,t=t.left+e.clientWidth;n<=l&&l<=a&&(o<=s&&r<=o?i.parentNode.insertBefore(i,e):s<=o&&o<=t&&i.parentNode.insertBefore(e,i))}))};function ShowMessageBox(e){var t=document,n=t.getElementsByClassName("message-wrapper")[0];t.querySelector(".message-container .message-inner").innerHTML=e,n.classList.remove("hidden"),setTimeout(function(){n.classList.add("hidden")},2e3)}document.addEventListener("dragMove",function(e){e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;debounce(dragMoveOrder(e),250)}),document.addEventListener("dragEnd",function(e){e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;e.detail.el.closest(".reorder")&&e.detail.el.closest(".reorder").dispatchEvent(new CustomEvent("reorder"))}),function(){var e=document,t=debounce(function(){setTimeout(function(){for(var e=document.getElementsByClassName("atlas-chart"),t=0;t<e.length;t++){var n=e[t].getElementsByTagName("script")[0].innerHTML,a=(0<e[t].getElementsByClassName("chart").length&&e[t].removeChild(e[t].getElementsByClassName("chart")[0]),0<e[t].getElementsByClassName("ajaxLoader").length&&e[t].removeChild(e[t].getElementsByClassName("ajaxLoader")[0]),e[t].clientWidth);0<a&&e[t].appendChild(new r(n,a))}},0)},250),a=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)},r=function(d,u){var e="";try{e=JSON.parse(d)}catch(e){}var t,m,p,n=e.height||400,d=e.options,a=e.data,f=e.axis,r="",g=u||800,s=[],v=0,h={},y=0,b=["one","two","three","four","five"];for(c in this.table=document.createElement("table"),a)-1==s.indexOf(a[c].axis)&&s.push(a[c].axis);var L,E=70*(Math.floor(s.length/2)+s.length%2),q=1<s.length?70*Math.floor(s.length/2):40,x=g-E-q;if(this.table.classList.add("chart"),this.table.style.height=n+"px",this.table.style.marginRight=q+"px",this.table.style.marginLeft=E+"px",this.table.style.width=x+"px",this.table.innerHTML+='<caption class="chart-caption">'+e.title+"</caption>",d&&d.hasOwnproperty("legend")&&"false"!==d.legend||!d){for(c in this.thead=document.createElement("thead"),this.thead.classList.add("chart-head"),a)(L=document.createElement("th")).innerHTML+='<span class="chart-headClr '+b[c]+'"></span>'+a[c].title,this.thead.appendChild(L);this.table.appendChild(this.thead)}for(c in this.table.addEventListener("mouseover",this.mouseover.bind(this)),this.table.addEventListener("mouseout",this.mouseout.bind(this)),a)v=Math.max(v,a[c].data.length);for(m in p=x/x/v*100,s){var w=0,S=0;for(c in a)if(a[c].axis===s[m])for(t in(o=a[c]).data)w=Math.max(w,parseFloat(o.data[t].data)),S=Math.min(S,parseFloat(o.data[t].data));for(c in a)a[c].axis==s[m]&&(a[c].range=w-S,a[c].max=w,a[c].min=S);h[m]=w-S}for(c in a)e.lastlinePointY=null,e.lastlinePointX=null,y+="bar"==a[c].type?1:0;r="<tbody>";for(var l=0;l<v;l++){var T=a[0].data[l].title+": ";for(c in a)T+=a[c].data[l].data+" "+f[a[c].axis].title+"; ";r+='<tr class="chart-col" style="left:'+p*l+"%;width:calc("+p+'% - 10px);">';var M=0,A=0;for(c in a){var o=a[c],i=0==parseFloat(o.data[l].data)?0:parseFloat(o.data[l].data)/o.range*100,A=Math.max(A,i),H=(0==c&&(r+='<th class="chart-xAxisTitle" scope="row" style="left:'+(p/100*x/2-26-15)+'px">'+o.data[l].title),i/100*n<30?'style="margin-top:-22px"':"");"bar"==o.type?r+='<td class="chart-'+o.type+" "+b[c]+'" style="height:'+i+"%;width:"+("calc("+100/y+"% - 5px)")+";left:"+M/y*100+'%"><p '+H+"></p></td>":"line"==o.type&&(r=r+('<td class="chart-'+o.type)+" "+b[c]+'" style="height:'+i+'%"><p '+H+"></p>",!o.lastlinePointY&&0!=o.lastlinePointY||(u=p/100*x,H=180*Math.atan2(i/100*n-o.lastlinePointY,-u)/Math.PI,r+='<div style="width:'+Math.sqrt(Math.pow(u,2)+Math.pow(i/100*n-o.lastlinePointY,2))+"px;transform: rotate("+H+'deg);"></div>'),o.lastlinePointY=i/100*n),"bar"==o.type&&M++,r+="</td>"}r=r+('<td class="chart-tooltip" data-tooltip="'+T+'" style="height:calc('+A+'% + 20px)"></td>')+"</tr>"}for(c in this.table.innerHTML+=r+"</tbody>",r='<caption class="chart-ticks">',s)N=55*(Math.floor(c/2)+1),B=c%2==1?"right":"left",void 0!==f[m]&&(r+='<div class="chart-yAxisTitle '+B+'" style="'+B+":-"+N+'px"><p>'+f[c].title+"</p></div>");for(var C=parseInt(n/50),c=1;c<=C;c++){for(t in r+='<div class="chart-ticksTick'+(1==c?" first ":"")+(c==C?" last ":"")+'">',h){var R,N=30*(Math.floor(t/2)+1),B=t%2==1?"right":"left";0<h[t]&&(R=(R=h[t]-h[t]/C*(c-1))<10?R.toFixed(2):Math.round(R),"left"==B&&(N+=parseFloat(3*(R.toString().length-1))),r+='<p style="'+B+":-"+N+'px">'+R+"</p>")}r+="</div>"}return this.table.innerHTML+="</tbody>"+(r+="</table>"),this.table};r.prototype={mouseover:function(){var r=event.target;a(function(){for(var e=Array.prototype.slice.call(r.closest("table").getElementsByClassName("hover")),t=0;t<e.length;t++)e[t].classList.remove("hover");if(r.closest(".chart-head th")&&r.closest(".chart-head th").getElementsByTagName("span")&&null!=r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value){for(var n=Array.prototype.slice.call(r.closest("table").getElementsByClassName("chart-line "+r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr",""))),t=0;t<n.length;t++)n[t].classList.add("hover");var a=Array.prototype.slice.call(r.closest("table").getElementsByClassName("chart-bar "+r.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(t=0;t<a.length;t++)a[t].classList.add("hover")}})},mouseout:function(){var n=event.target;a(function(){for(var e=Array.prototype.slice.call(n.closest("table").getElementsByClassName("hover")),t=0;t<e.length;t++)e[t].classList.remove("hover")})}},t(),e.addEventListener("load-charts",function(){t()}),e.addEventListener("mdl-open",function(){t()}),e.addEventListener("tab-opened",function(){t()}),e.addEventListener("collapse-opened",function(){t()}),window.addEventListener("resize",function(){t()})}(),function(){function n(e){void 0===e?[].forEach.call(document.getElementsByClassName("mdl-o"),function(e){e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))}):(e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))),0<document.getElementsByClassName("mdl-o").length||document.getElementsByTagName("body")[0].classList.remove("b-mdl")}function a(e,t){document.getElementsByTagName("body")[0].classList.toggle("b-mdl"),e.classList.toggle("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-open",{cancelable:!0,detail:{e:t}}))}document.addEventListener("click",function(e){var t=document;e.target.closest("[data-toggle]")&&"mdl"==e.target.closest("[data-toggle]").getAttribute("data-toggle")?a(t.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target")),e.target.closest("[data-toggle]")):e.target.closest("[data-dismiss]")&&"mdl"==e.target.closest("[data-dismiss]").getAttribute("data-dismiss")||e.target.closest(".editorMdl-close")?n(e.target.closest(".mdl")):e.target.closest(".pop")&&(t.getElementsByClassName("imagepreview")[0].setAttribute("src",e.target.closest(".pop").children[0].getAttribute("src")),a(t.getElementById("image-modal"),null))},!0),document.addEventListener("modal-close",function(){n()})}(),function(){function l(e){e.classList.remove("is-active")}function o(){(document.querySelectorAll(".modal")||[]).forEach(function(e){l(e)})}document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&o()}),document.addEventListener("modal-close",function(){o()}),document.addEventListener("click",function(e){var t,n,a,r,s,e=e.target;e.closest(".js-modal-trigger")?(t=e.closest(".js-modal-trigger"),document.getElementById(t.dataset.target).classList.add("is-active"),document.dispatchEvent(new CustomEvent("modal-open"))):e.closest(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button")?l((t=e.closest(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button")).closest(".modal")):e.closest(".modal button.share-feedback")?(n=(t=e.closest(".modal button.share-feedback")).parentNode.getElementsByTagName("textarea")[0],a={reportName:t.hasAttribute("data-name")?t.getAttribute("data-name"):document.title,description:n.value,reportUrl:t.hasAttribute("data-url")?t.getAttribute("data-url"):window.location.href},r=Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&"),(s=new XMLHttpRequest).open("post","/Requests?handler=ShareFeedback&"+r,!0),s.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),ShowMessageBox("Thanks for the feedback."),n.value="",o()):e.closest(".modal button.request-access")&&(t=e.closest(".modal button.request-access"),a={reportName:t.getAttribute("report-name"),directorName:t.closest(".modal").querySelector(".director-name").value,reportUrl:window.location.href},r=Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&"),(s=new XMLHttpRequest).open("post","/Requests?handler=AccessRequest&"+r,!0),s.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),ShowMessageBox("Your request has been submitted."),o())})}(),function(){function t(e){[].forEach.call(e.querySelectorAll("source[data-srcset]"),function(e){var t;r(e)&&(t=e.getAttribute("data-srcset"),e.setAttribute("srcset",""),e.removeAttribute("data-srcset"),e.setAttribute("srcset",t))})}function n(e){[].forEach.call(e.querySelectorAll("img[data-src]"),function(e){var t;r(e)&&(t=e.getAttribute("data-src"),e.setAttribute("src",""),e.removeAttribute("data-src"),e.setAttribute("src",t))})}function e(){[].forEach.call(a.querySelectorAll("picture"),function(e){n(e),t(e)}),n(a),t(a)}var a=document,r=function(e){var t=e.getBoundingClientRect();return-600<=t.top&&0<=t.left&&t.bottom-e.clientHeight-600<=(document.documentElement.clientHeight||a.documentElement.clientHeight)&&t.right-600-e.clientWidth<=(document.documentElement.clientWidth||a.documentElement.clientWidth)&&null!==e.offsetParent};e(),a.addEventListener("ajax",function(){setTimeout(function(){e()},0)}),a.addEventListener("modal-open",function(){e()}),a.addEventListener("scroll",function(){debounce(e(),100)},{passive:!0})}(),function(){function e(e){var t=document.createElement("ul");(e=e.slice(Math.max(e.length-7,0))).reverse();for(var n=0;n<e.length;n++){for(var a=document.createElement("li"),r=document.createElement("a"),s=(0==n?(r.setAttribute("href","#"),a.classList.add("is-active")):r.setAttribute("href",e[n].url),e[n].title.split(" ")),l="",o=0;o<s.length;o++)if(15<(l+=s[o]+" ").length){o<s.length&&(l+="…",r.classList.add("is-block","has-tooltip-bottom","has-tooltip-arrow"),r.setAttribute("data-tooltip",e[n].title));break}r.innerText=l,a.appendChild(r),t.appendChild(a)}return t}var t,n,a,r;t=-1!=document.title.indexOf(" | ")?document.title.split(" | ")[0]:document.title,n=window.location.href,a={},0!==(r=null!==(r=sessionStorage.getItem("breadcrumbs"))?JSON.parse(r):[]).length&&r[r.length-1].title==t&&r[r.length-1].url==n||(a.title=t,a.url=n,0<r.length&&r[r.length-1].title.startsWith("Search")&&a.title.startsWith("Search")&&r.pop(),r.push(a),sessionStorage.setItem("breadcrumbs",JSON.stringify(r))),t=document.getElementsByClassName("breadcrumb")[0],r.length<=1||(t.innerHTML=e(r).outerHTML,t.style.opacity=1)}(),function(){function e(){for(var e,t,n=document.querySelectorAll(".body-main a[href]"),a=[],r=/[R|r]eports\?id=(\d+)/,s=0;s<n.length;s++)(e=n[s].getAttribute("href").match(r))&&a.push(e[1]);(e=window.location.href.match(r))&&a.push(e[1]),0<a.length&&document.getElementById("AdColTwo")&&((t=document.getElementById("related-reports"))||((t=document.createElement("div")).setAttribute("id","related-reports"),document.getElementById("AdColTwo").appendChild(t)),t.setAttribute("data-url","/Search/?handler=RelatedReports&id="+a.slice(0,5).join(",")),t.setAttribute("data-ajax","yes"),document.dispatchEvent(new CustomEvent("load-ajax-content")))}e(),document.addEventListener("related-reports",function(){e()})}(),1!=getUrlVars().EPIC&&1!=getCookie("EPIC")||setCookie("EPIC",1,99),function(){var d=document;function c(e){var t,n,a,r,e=e||d.getElementsByClassName("fav-show-all")[0],s=e.getAttribute("folder-id"),l=d.getElementById("favs-none");for(l.style.display="none",t=e.parentElement.getElementsByClassName("active"),n=0;n<t.length;n++)(a=t[n]).classList.remove("active"),(r=a.getElementsByTagName("i")[0]).classList.remove("fa-folder-open"),r.classList.add("fa-folder");if(null!==s){for(t=d.querySelectorAll('.favs div[folder-id]:not([folder-id="'+s+'"])'),n=0;n<t.length;n++)(a=t[n]).style.display="none";t=d.querySelectorAll('.favs div[folder-id="'+s+'"]')}else t=d.querySelectorAll(".favs div[folder-id]");for(n=0;n<t.length;n++)(a=t[n]).style.opacity=0,a.style.removeProperty("display"),a.style.transition="opacity 0.1s ease-in-out",a.offsetHeight,a.style.opacity=1;if(e.classList.add("active"),(t=e.getElementsByTagName("i")[0]).classList.remove("fa-folder"),t.classList.add("fa-folder-open"),null!==s&&0==d.querySelectorAll('.favs div[folder-id="'+s+'"]').length||null==s&&0==d.querySelectorAll(".favs div[folder-id]").length){for(t=l.childNodes,n=0;n<t.length;n++)(a=t[n]).style.removeProperty("display");l.style.opacity=0,l.style.removeProperty("display"),l.style.transition="opacity 0.1s ease-in-out",l.offsetHeight,l.style.opacity=1,d.getElementById("Folder_UserFavoriteFolderId").value=s}}function u(e,t,n){if(e.classList.contains("fav")){for(var a,r,s,l,o,i=d.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),c=0;c<i.length;c++)if(a=i[c],r=(o=getOffset(a)).top,s=o.top+a.offsetHeight,l=o.left,o=o.left+a.offsetWidth,r<n&&n<s&&l<t&&t<o)return a;return!1}}d.addEventListener("click",function(e){if(e.target.closest(".favorite:not(.disabled)")||e.target.closest(".favorite-search:not(.disabled)")||e.target.closest(".fav-star:not(.disabled)")||e.target.closest("[fav-type]")){e.preventDefault(),e.stopPropagation();for(var t,n,e=e.target.closest(".favorite-search:not(.disabled)")?e.target.getElementsByTagName("i")[0]:e.target,a=null!=e.closest(".favs"),r=null!=document.getElementsByClassName("favs")[0],s=1,l=e.getAttribute("fav-type"),o=e.getAttribute("object-id"),e=e.getAttribute("object-name"),i=d.querySelectorAll('[fav-type="'+l+'"][object-id="'+o+'"]'),c=0;c<i.length;c++)(t=i[c]).classList.contains("favorite")?(t.classList.remove("favorite"),s=0):t.classList.add("favorite");if(a)for(d.querySelectorAll(".favs div[folder-id]").length<=1&&((t=d.getElementById("favs-none")).style.opacity=0,t.style.removeProperty("display"),t.style.transition="opacity 0.3s ease-in-out",t.offsetHeight,t.style.opacity=1),c=0;c<i.length;c++)(t=i[c].closest(".fav")).parentElement.removeChild(t);n={actionType:s,favoriteType:l,objectId:o,objectName:e},a=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(l=new XMLHttpRequest).open("post","/users?handler=EditFavorites&"+a,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){r&&d.dispatchEvent(new CustomEvent("reload-favs"))}}},!1),d.addEventListener("click",function(e){if(e.target.closest(".fav-show-all"))c();else{if(e.target.closest(".fav-folder-new"))return!1;e.target.closest(".fav-folder")&&(e.target.classList.contains("active")?c():c(e.target.closest(".fav-folder")))}}),d.addEventListener("submit",function(e){var t,n,a,r,s,l,o;e.target.closest("#CreateFolderForm")?(e.preventDefault(),t=e.target.getElementsByTagName("input")[0],n=e.target.getElementsByTagName("span")[0],a=t.value,r=d.getElementById("fav-folders"),s=serialize(e.target),(l=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+s,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),t.value="",e.target.querySelector(".submit").innerHTML="",l.onload=function(){var e=d.createElement("div"),t=(e.classList.add("fav-folder"),e.classList.add("drg"),e.setAttribute("folder-id",l.responseText),e.innerHTML='<i class="fas fa-folder"></i><span>'+a+'</span><div class="fav-count">0</div><div class="folder-grip drg-hdl"><i class="fas fa-grip-lines"></i></div>',r.getElementsByClassName("fav-folder-new")[0]);t.parentElement.insertBefore(e,t),n.innerHTML="",document.dispatchEvent(new CustomEvent("clps-close",{cancelable:!0,detail:{el:d.getElementById("fav-folder-new")}}))}):e.target.closest("#DeleteFolderForm")&&(e.preventDefault(),o=d.getElementById("Folder_UserFavoriteFolderId").value,s=serialize(e.target),(l=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+s,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){var e=d.getElementById("fav-folders").querySelector("div[folder-id][folder-id='"+o+"']");e.parentElement.removeChild(e),c()})},!1),d.addEventListener("dragEnd",function(e){if(void 0!==e.detail){var t,n,a,r,s=e.detail.el,l=e.detail.x,e=e.detail.y;if(s.classList.contains("fav-folder")){t=s.parentElement.querySelectorAll(".fav-folder:not(.fav-folder-new):not(.fav-show-all"),n=Array.from(t).sort(function(e,t){return getOffset(e).top-getOffset(t).top});var o=s.parentElement.getElementsByClassName("fav-folder-new")[0];for(a=0;a<n.length;a++)o.parentElement.insertBefore(n[a],o);!function(){var e,t,n=[],a=d.querySelectorAll("#fav-folders .fav-folder:not(.drag-source)");for(e=0;e<a.length;e++){var r;a[e].hasAttribute("folder-id")&&((r={}).FolderId=a[e].getAttribute("folder-id"),r.FolderRank=e+1,n.push(r))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFolders",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}else if(s.classList.contains("fav"))if((t=u(s,l,e))&&null!==t){{l=s.getAttribute("fav-id");e=t.getAttribute("folder-id");var i={};i.FavoriteId=l,i.FolderId=e,(l=new XMLHttpRequest).open("post","/Users?handler=UpdateFavoriteFolder",!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(JSON.stringify(i))}s.setAttribute("folder-id",t.getAttribute("folder-id")),c(d.querySelector(".fav-folder.active"))}else{for(t=s.parentElement.getElementsByClassName("fav"),n=Array.from(t).sort(function(e,t){return getOffset(e).top-getOffset(t).top}),a=0;a<n.length;a++)s.parentElement.appendChild(n[a]);!function(){var e,t,n=[],a=d.querySelectorAll(".favs div[folder-id]:not(.drag-source)");for(e=0;e<a.length;e++){var r;a[e].hasAttribute("folder-id")&&((r={}).FavoriteId=a[e].getAttribute("fav-id"),r.FavoriteRank=e+1,n.push(r))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFavorites",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}for(s.style.transition="top 0.3s; left 0.3s;",s.style.top=0,s.style.left=0,a=d.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),r=0;r<a.length;r++)a[r].classList.remove("hover")}},!1),d.addEventListener("dragMove",function(e){if(void 0!==e.detail){for(var t=d.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),n=0;n<t.length;n++)t[n].classList.remove("hover");(e=u(e.detail.el,e.detail.x,e.detail.y))&&null!==e&&e.classList.add("hover")}},!1)}(),document.addEventListener("click",function(e){var t,n;e.target.closest("a.star")&&(e.preventDefault(),e=(t=e.target.closest("a.star")).dataset,(n=new XMLHttpRequest).open("get",e.href,!0),n.send(),n.onload=function(){t.querySelector(".fa-star").classList.contains("fas")?(t.querySelector(".fa-star").classList.remove("fas"),t.querySelector(".fa-star").classList.add("far"),t.querySelector(".icon").classList.remove("has-text-gold"),t.querySelector(".icon").classList.add("has-text-grey")):(t.querySelector(".fa-star").classList.remove("far"),t.querySelector(".fa-star").classList.add("fas"),t.querySelector(".icon").classList.remove("has-text-grey"),t.querySelector(".icon").classList.add("has-text-gold")),t.querySelector(".star-count")&&"error"!==n.responseText&&(t.querySelector(".star-count").innerText=n.responseText)})}),function(){function e(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-e.clientHeight-400<=(document.documentElement.clientHeight||d.documentElement.clientHeight)&&t.right-400-e.clientWidth<=(document.documentElement.clientWidth||d.documentElement.clientWidth)}function t(){[].forEach.call(d.querySelectorAll('[data-ajax="yes"]'),function(t){var n,a,r,s,l;t.matches("#AdColOne")||t.matches('#AdColTwo [data-ajax="yes"]')||!e(t)||null===t.offsetParent||(n=t.getAttribute("data-url"),a=t.getAttribute("data-param"),r=t.getAttribute("data-loadtag"),s=t.getAttribute("id"),t.removeAttribute("data-ajax"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==a&&""!==a&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=a),cache.exists(n)?o(t,r,a,cache.get(n),n,s):((l=new XMLHttpRequest).open("get",n,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){var e=null!=l.getResponseHeader("Cache-Control")?(l.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;o(t,r,a,l.responseText,n,s),(t.hasAttribute("cache")||e)&&cache.set(n,l.responseText,e)}))})}function o(e,t,n,a,r,s){if(null!=e)try{if(e.style.opacity=0,!e.parentNode)return;var l=d.createElement("div");if(l.innerHTML=a,null!==t&&""!==t?(l=l.querySelector(t)).setAttribute("data-loadtag",t):l=l.children[0],s&&l.setAttribute("id",s),l.style.visibility="hidden",l.style.transition="visibility 0.3s ease-in-out",l.setAttribute("data-url",r),l.setAttribute("data-param",n),e.parentNode.replaceChild(l,e),l.querySelector('script:not([type="application/json"])'))for(var o=Array.prototype.slice.call(l.querySelectorAll('script:not([type="application/json"])')),i=0;i<o.length;i++){var c=d.createElement("script");c.innerHTML=o[i].innerHTML,c.type="text/javascript",c.setAttribute("async","true"),l.appendChild(c),o[i].parentNode.removeChild(o[i])}l.style.visibility="visible",d.dispatchEvent(new CustomEvent("ajax"))}catch(e){console.log(e)}}function n(){[].forEach.call(d.querySelectorAll('#AdColOne, #AdColTwo [data-ajax="yes"]'),function(t){var n,a,r,s,l;e(t)&&(n=t.getAttribute("data-url"),a=t.getAttribute("data-param"),r=t.getAttribute("data-loadtag"),s=t.getAttribute("id"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==a&&""!==a&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=a),t.style.visibility="hidden",cache.exists(n)?o(t,r,a,cache.get(n),n,s):((l=new XMLHttpRequest).open("get",n,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(),l.onload=function(){var e=null!=l.getResponseHeader("Cache-Control")?(l.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;o(t,r,a,l.responseText,n,s),(t.hasAttribute("cache")||e)&&cache.set(n,l.responseText,e)}))})}var d=document;t(),n(),d.addEventListener("load-ajax-content",function(){t(),n()}),d.addEventListener("reload-favs",function(){var t,e;e=d.getElementsByClassName("favs-cntr"),[].forEach.call(e,function(e){(t=new XMLHttpRequest).open("get",e.getAttribute("data-url"),!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){o(e,null,null,t.responseText,e.getAttribute("data-url"))}})}),d.addEventListener("modal-open",function(){t()}),d.addEventListener("scroll",function(){debounce(t(),100),debounce(n(),100)},{passive:!0})}(),document.addEventListener("click",function(e){e.target.matches(".message-close")&&e.target.parentElement.matches(".message-wrapper")&&e.target.parentElement.classList.add("hidden")}),document.addEventListener("show-message",function(e){void 0!==e.detail&&e.detail&&e.detail.value&&ShowMessageBox(e.detail.value)},!1),function(){document.execCommand("defaultParagraphSeparator",!1,"div");function m(){var e=document.createElement("div");null!==t&&t.abort(),(t=new XMLHttpRequest).open("post","/mail?handler=CheckForMail",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){e.innerHTML=t.responseText,n(e)}}function n(e){var t,n=g.getElementsByClassName("mail-unread-cnt"),a=g.getElementsByClassName("mail-all-cnt"),r=0,s=e.querySelector("#unread_message_count").innerHTML,d=e.querySelector("#total_message_count").innerHTML,l=e.querySelector("#draft_message_count").innerHTML,o=e.querySelector("#new_message_alerts");for(g.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt")&&(g.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt").innerHTML=0<l?l:""),r=0;r<n.length;r++)0<s?(n[r].style.display="inline-block",n[r].innerHTML=s):(n[r].style.display="none",n[r].innerHTML="");for(r=0;r<a.length;r++)a[r].innerHTML=d;if(0<o.innerHTML.length&&((t=document.getElementsByClassName("mail-notification-container")[0]).innerHTML=o.innerHTML,t.style.transition="margin-right .5s",t.style.marginRight="500px",t.clientWidth,setTimeout(function(){t.style.marginRight="0px"},1e4)),null!==g.querySelector("#mlbx-fldrsInbox.active")){var i=document.createElement("div");if(i.innerHTML=e.querySelector("#new_message_previews").innerHTML,0<i.innerHTML.length)for(var c,u=Array.prototype.slice.call(g.querySelectorAll(".mlbx-msgsMsg[data-rep-id]")),r=0;r<u.length;r++)null!==(c=i.querySelector('.mlbx-msgsMsg[data-rep-id="'+u[r].getAttribute("data-rep-id")+'"]'))&&(c.parentElement.removeChild(c.nextElementSibling),c.parentElement.removeChild(c));i.querySelector(".mlbx-msgsMsg.active")&&i.querySelector(".mlbx-msgsMsg.active").classList.remove("active"),0<g.querySelector(".mlbx-msgs .ss-content").children.length?g.querySelector(".mlbx-msgs .ss-content").children[0].insertAdjacentHTML("beforebegin",i.innerHTML):g.querySelector(".mlbx-msgs .ss-content").innerHTML=i.innerHTML}}function l(t,n){g.getElementsByClassName("mlbx-rdr")[0].innerHTML="",null!==a&&a.abort(),a=new XMLHttpRequest,null!==t&&a.open("get","mail?handler=Messages&folder="+t,!0),null!=n&&a.open("get","mail?handler=Messages?folderId="+n,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),a.onload=function(){var e=g.getElementsByClassName("mlbx-msgsScroll")[0];e.classList.remove("ss-container"),e.innerHTML=a.responseText,document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:e}})),"inbox"==t||"deleted"==t||"sent"==t||null!=n?g.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")&&o(g.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-rep-id")):"drafts"==t&&(g.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")?p(g.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-draft-id")):f())}}function p(n){c=null,a&&a.abort(),(a=new XMLHttpRequest).open("get","mail?handler=DraftDetails&id="+n,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),a.onload=function(){var e=g.createElement("div"),t=(e.innerHTML=a.responseText,g.createElement("input"));t.setAttribute("name","draftId"),t.setAttribute("value",n),t.style.display="none",e.querySelector("form").appendChild(t),g.getElementsByClassName("mlbx-rdr")[0].innerHTML=e.getElementsByClassName("mlbx-newMsg")[0].outerHTML,document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:g.querySelector("#new_msg_dynamic-dropdown")}})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:g.querySelector(".mlbx-rdr .mlbx-newMsg")}})),g.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("input",function(){d(this)}),g.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("change",function(){d(this)})}}function v(e){var t=new XMLHttpRequest;t.open("post","mail?handler=MarkMessageRead&id="+e,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send()}function f(e,t,n,a){c=null;for(var r=g.querySelectorAll(".mlbx-msgsMsg.active.unread"),s=0;s<r.length;s++)r[s].classList.remove("unread"),v(r[s].getAttribute("data-rep-id"));g.querySelector(".mlbx-msgsMsg.active")&&g.querySelector(".mlbx-msgsMsg.active").classList.remove("active");var l,o,i=g.getElementsByClassName("mlbx-rdr")[0];i.innerHTML="",i.appendChild(g.querySelector(".new_message_template .mlbx-newMsg").cloneNode(!0)),i.querySelector("form.mlbx-newMsgForm").addEventListener("input",function(){d(this)}),i.querySelector("form.mlbx-newMsgForm").addEventListener("change",function(){d(this)}),document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:i.querySelector("#new_msg_dynamic-dropdown")}})),void 0!==a&&(i.querySelector("#convid").value=a),void 0!==t&&(i.querySelector(".mlbx-newMsgSubjIpt").innerHTML=t),void 0!==n&&(i.querySelector(".mlbx-newMsgMsg").innerHTML=n.innerHTML),void 0!==e&&null!=e&&(l=i.querySelector(".dd-cntr .dd-wrp"),o=i.querySelector(".dd-cntr select.dd-hdn"),e.forEach(function(e){o.innerHTML+='<option selected="selected" class="'+e[2]+'" value="'+e[0]+'">'+e[1]+"</option>",l.children[0].insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e[2]+'">'+e[1]+"</div>")})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:i.querySelector(".mlbx-newMsg")}}))}function o(e){g.getElementsByClassName("mlbx-rdr")[0]&&(a&&a.abort(),(a=new XMLHttpRequest).open("get","mail?handler=MessageDetails&id="+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),a.onload=function(){g.getElementsByClassName("mlbx-rdr")[0]&&(g.getElementsByClassName("mlbx-rdr")[0].innerHTML=a.responseText),document.dispatchEvent(new CustomEvent("ss-load"))})}var g=document,t=null,a=null,c=null,i=null,u=null,d=function(t){var e;null!==c&&t.querySelector('input[name="draftId')&&c.abort(),null!==c&&!t.querySelector('input[name="draftId')||(e={To:t.querySelector(".dd-cntr .dd-hdn").innerHTML,Subject:t.querySelector(".mlbx-newMsgSubjIpt").innerHTML,Message:t.querySelector(".mlbx-newMsgMsg").innerHTML,Text:t.querySelector(".mlbx-newMsgMsgBx").innerText.replace(/\n/g," "),MsgId:null,ConvId:null},t.querySelector('input[name="draftId')&&(e.DraftId=t.querySelector('input[name="draftId').getAttribute("value")),(c=new XMLHttpRequest).open("post","mail?handler=SaveDraft",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(JSON.stringify(e)),c.onload=function(){var e;null==t.querySelector('input[name="draftId')&&((e=g.createElement("input")).setAttribute("name","draftId"),e.setAttribute("value",c.responseText),e.style.display="none",t.appendChild(e))})};setInterval(function(){void 0!==window.ajaxOn&&1!=window.ajaxOn||m()},1e4),document.addEventListener("loadMessage",function(e){void 0!==e.detail&&o(e.detail.id)}),g.addEventListener("click",function(e){if(e.target.closest(".mlbx-msgsMsg")){for(var t=e.target.closest(".mlbx-msgsMsg"),n=g.querySelectorAll(".mlbx-msgsMsg.active:not(.deleted"),a=0;a<n.length;a++)n[a].classList.remove("active"),g.querySelector("#mlbx-fldrsInbox.active")&&n[a].classList.contains("unread")&&(n[a].classList.remove("unread"),v(n[a].getAttribute("data-rep-id")));t.classList.add("active"),g.querySelector("#mlbx-fldrsInbox.active")&&t.classList.contains("unread")&&(t.classList.remove("unread"),v(t.getAttribute("data-rep-id"))),g.querySelector("#mlbx-fldrsDrafts.active")?p(t.getAttribute("data-draft-id")):o(t.getAttribute("data-rep-id")),m()}else{var r,s;e.target.closest(".mail-new-message")?(t=e.target.closest(".mail-new-message").getAttribute("data-from"),s=e.target.closest(".mail-new-message").getAttribute("data-fromid"),t&&s?f([[s,t]]):f()):e.target.closest(".mlbx-usrDrp")?(e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").style.display="block",e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").addEventListener("mouseleave",function e(){this.style.removeProperty("display"),this.removeEventListener("mouseleave",e,!1)})):e.target.closest("#mlbx-fldrsDrafts")?(l("drafts"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDrafts").classList.add("active")):e.target.closest("#mlbx-fldrsInbox")?(l("inbox"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsInbox").classList.add("active")):e.target.closest("#mlbx-fldrsSent")?(l("sent"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsSent").classList.add("active")):e.target.closest("#mlbx-fldrsDeleted")?(l("deleted"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDeleted").classList.add("active")):!e.target.closest(".mail-delete-message")||null!=(r=g.querySelector(".mlbx-msgsMsg.active:not(.deleted)"))&&(s=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}if(n=e.previousElementSibling,!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(r,".mlbx-msgsMsg"),r.hasAttribute("data-draft-id")?((i=new XMLHttpRequest).open("post","mail?handler=DeleteDraft&id="+r.getAttribute("data-draft-id"),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),void 0!==s?(p(s.getAttribute("data-draft-id")),s.classList.add("active")):g.querySelector(".mlbx-rdr").innerHTML=""):r.hasAttribute("data-rep-id")&&((i=new XMLHttpRequest).open("post","mail?handler=DeleteMessage&id="+r.getAttribute("data-rep-id"),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),void 0!==s?(o(s.getAttribute("data-rep-id")),s.classList.add("active")):g.querySelector(".mlbx-rdr").innerHTML=""),e=parseFloat(r.clientWidth),s=parseFloat(r.clientHeight),r.style.transition="margin-left 150ms, margin-right 150ms, margin-top 150ms",r.style.zIndex="-1",r.clientHeight,r.style.marginLeft=-e+"px",r.style.marginRight=e+"px",r.style.marginTop=-s+"px",r.classList.add("deleted"),setTimeout(function(){null!==r&&(r.parentElement.removeChild(r.nextElementSibling),r.parentElement.removeChild(r))},150))}}),g.addEventListener("submit",function(e){if(e.target.closest(".mlbx-newMsgForm")){e.preventDefault();var e=e.target.closest(".mlbx-newMsgForm"),t=[],n=e.querySelectorAll('.mlbx-newMsgRecip select option, .mail-to input[type="hidden"]');if(null!=n){console.log(n);for(var a=0;a<n.length;a++){var r=n[a].classList.contains("group")?"g":"";t.push({UserId:n[a].value,Type:r})}}var s,l=e.querySelector(".mlbx-newMsgSubjIpt")?e.querySelector(".mlbx-newMsgSubjIpt").innerText:e.querySelector("input.mail-subject").value,o=e.querySelector(".mlbx-newMsgMsg")?(s=e.querySelector(".mlbx-newMsgMsg").innerHTML,e.querySelector(".mlbx-newMsgMsg").innerText.replace(/\n/g," ")):s=e.querySelector('textarea[name="mail-message"]').value,i=e.querySelector(".mlbx-share")?"1":"0",c=e.querySelector(".mlbx-shareName")?e.querySelector(".mlbx-shareName").value:"",d=e.querySelector(".mlbx-shareUrl")?e.querySelector(".mlbx-shareUrl").value:window.location.href,l={To:JSON.stringify(t),Subject:l,Message:s,Text:o,Share:i,ShareName:c,ShareUrl:d};null!==e.querySelector('input[name="draftId"]')&&(s=e.querySelector('input[name="draftId"]').value,l.DraftId=s,g.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]')&&g.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]').parentElement.removeChild(g.querySelector('.mlbx-msgsMsg[data-draft-id="'+s+'"]'))),(u=new XMLHttpRequest).open("post",e.getAttribute("action"),!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(JSON.stringify(l)),u.onload=function(){m()},document.dispatchEvent(new CustomEvent("show-message",{cancelable:!0,detail:{value:"Messages sent! ¯\\_(ツ)_/¯"}})),null!==g.querySelector(".mlbx-rdr")&&(g.querySelector(".mlbx-rdr").innerHTML=""),g.dispatchEvent(new CustomEvent("modal-close"))}},!1),g.addEventListener("click",function(d){var e,t,n;if(d.target.closest(".mail-reply")&&null!==g.querySelector("#mlbx-fldrsInbox.active")){for(r=(a=g.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),u="Re: "+a.querySelector(".mailbox-subject").innerText,o=[[(s=a.querySelector("div.mailbox-sender-user")).getAttribute("data-user-id"),s.querySelector("span").innerText,""]],e=document.createElement("div"),(t=document.createElement("div")).classList.add("message-reply"),t.innerHTML=g.querySelector(".mlbx-rdr .ss-content").innerHTML,t.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(t.querySelector(".mlbx-rdrHead-controls")),n=t.querySelectorAll(".mlbx-usrDrp"),i=0;i<n.length;i++)n[i].parentElement.removeChild(n[i]);e.innerHTML="<br><br><br>",e.appendChild(t),f(o,u,e,r)}else if(d.target.closest(".mail-reply-all")&&null!==g.querySelector("#mlbx-fldrsInbox.active")){for(var a,r=(a=g.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),u="Re: "+a.querySelector(".mailbox-subject").innerText,s=a.querySelectorAll("div.mailbox-sender-user"),l=a.querySelectorAll("div.mailbox-to-user"),o=[],i=0;i<s.length;i++)o.push([s[i].getAttribute("data-user-id"),s[i].querySelector("span").innerText,s[i].classList.contains("group")?"group":""]);for(i=0;i<l.length;i++)o.push([l[i].getAttribute("data-user-id"),l[i].querySelector("span").innerText,l[i].classList.contains("group")?"group":""]);for(var m={},p=[],c=0;c<o.length;c++)o[c]in m||(p.push(o[c]),m[o[c]]=!0);for(o=p,e=document.createElement("div"),(t=document.createElement("div")).classList.add("message-reply"),t.innerHTML=g.querySelector(".mlbx-rdr .ss-content").innerHTML,t.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(t.querySelector(".mlbx-rdrHead-controls")),n=t.querySelectorAll(".mlbx-usrDrp"),i=0;i<n.length;i++)n[i].parentElement.removeChild(n[i]);e.innerHTML="<br><br><br>",e.appendChild(t),f(o,u,e,r)}})}(),function(){window.ajaxOn=!0;function n(e){var t={},n=navigator,a=window,r=document,s=a.location;return t.appCodeName=n.appCodeName,t.appName=n.appName,t.appVersion=n.appVersion,t.cookieEnabled=n.cookieEnabled,t.language=n.language,t.oscpu=n.oscpu,t.platform=n.platform,t.userAgent=n.userAgent,t.host=s.host,t.hostname=s.hostname,t.href=s.href,t.protocol=s.protocol,t.search=s.search,t.pathname=s.pathname,t.hash=s.hash,t.screenHeight=r.documentElement.clientHeight,t.screenWidth=r.documentElement.clientWidth,t.origin=a.origin,t.title=r.title,t.referrer=r.referrer,t.loadTime=e||a.performance.timing.domContentLoadedEventEnd-a.performance.timing.navigationStart,t.zoom=a.devicePixelRatio,t.sessionId=o(),t.pageId=i(),t.pageTime=(new Date).getTime()-l.getTime(),t}function t(e,t){"newpage"==t&&(i("reset"),window.ajaxOn=!0),!0===window.ajaxOn&&(navigator.sendBeacon?navigator.sendBeacon("/analytics?handler=Beacon",JSON.stringify(n(e))):((t=new XMLHttpRequest).open("post","/analytics?handler=Beacon",!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n(e))))),d()}function e(){debounce((window.clearTimeout(r),c(),void(window.ajaxOn=!0)),500)}function a(){document.addEventListener("mousemove",e,!1),document.addEventListener("mousedown",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("touchmove",e,!1),document.addEventListener("scroll",e,{passive:!0},!1),c()}function d(){window.clearTimeout(s),m()}var r,s,l=new Date,o=function(e){return"clear"==e?(sessionStorage.removeItem("_sid"),!1):("reset"!=e&&void 0!==sessionStorage._sid||(sessionStorage._sid=btoa((new Date).toString()),i("reset"),l=new Date),sessionStorage._sid)},i=function(e){return"reset"!=e&&void 0!==sessionStorage._pid||(l=new Date,sessionStorage._pid=btoa((new Date).toString())),sessionStorage._pid},c=function(){r=window.setTimeout(u,12e4),o()},u=function(){window.ajaxOn=!1,o("clear"),sessionStorage.clear()},m=function(){s=window.setTimeout(t,3e4)};"complete"==document.readyState&&(a(),t()),window.addEventListener("load",function(){a(),t()},!1),document.addEventListener("analytics-post",function(e){void 0!==e.detail&&t(e.detail.value,e.detail.type)})}();var $navbarBurgers=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);0<$navbarBurgers.length&&$navbarBurgers.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,e=document.getElementById(e);t.classList.toggle("is-active"),e.classList.toggle("is-active")})}),function(){function n(e){e.classList.remove("is-active")}function d(){(document.querySelectorAll(".mini")||[]).forEach(function(e){n(e)})}function u(e){for(var t=e.querySelectorAll('input[type="hidden"][name]:not(.drag)'),n=0;n<t.length;n++)t[n].setAttribute("name",t[n].getAttribute("name").replace(/\[\d*?\]/,"["+n+"]"))}function c(o,e,i,c){e=JSON.parse(e);if(0===e.length)o.innerHTML='<div class="mini-waiting">No matches found.</div>';else{o.innerText="";var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=document.createElement("a");r.classList.add("mini-item"),r.innerText=a.Name,r.setAttribute("value",a.ObjectId||a.Description),r.addEventListener("click",function(e){var t,n,a,r,s,l;c.classList.contains("multiselect")?c.classList.contains("multiselect")&&(t=c.closest(".field").parentNode.querySelector(".mini-tags"),(n=document.createElement("div")).classList.add("control"),(a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("value",e.target.getAttribute("value")),c.hasAttribute("data-name")&&a.setAttribute("name",c.getAttribute("data-name")),(r=document.createElement("div")).classList.add("tags","has-addons"),(s=document.createElement("span")).classList.add("tag","is-link"),s.innerText=e.target.innerText,(l=document.createElement("a")).classList.add("tag","is-delete"),l.addEventListener("click",function(){n.parentElement.removeChild(n),u(t)}),t.classList.contains("reorder")&&(n.classList.add("drg"),s.classList.add("drg-hdl")),n.appendChild(r),r.appendChild(s),r.appendChild(a),r.appendChild(l),null!=t&&(t.appendChild(n),u(t)),c.value="",c.hasAttribute("lookup-area")&&p(c,o),c.classList.contains("mini-close-fast")&&d()):(c.value=e.target.innerText,i.value=e.target.getAttribute("value"),d())}),o.appendChild(r)}}catch(e){n.e(e)}finally{n.f()}o.querySelectorAll(".mini-item:not(.hidden)").length<1&&(o.innerHTML+='<div class="mini-waiting">No matches found.</div>')}}var m=null;function p(t,e){e.querySelectorAll(".mini-item").forEach(function(e){console.log(e.innerText),console.log(t.value),""===t.value||-1!=e.innerText.toLowerCase().indexOf(t.value.toLowerCase())?e.style.display=null:e.style.display="none"})}var f=null;(document.querySelectorAll(".mini-tags .tag.is-delete")||[]).forEach(function(n){n.addEventListener("click",function(){var e=n.closest(".control"),t=n.closest(".mini-tags");e.parentElement.removeChild(e),u(t)})}),(document.querySelectorAll(".input-mini")||[]).forEach(function(s){var t,n,e,a,r,l=s.parentElement.querySelector(".mini"),o=s.parentElement.querySelector('input[type="hidden"], select.is-hidden'),i=s.parentElement.parentElement.querySelector(".mini-clear");s.addEventListener("click",function(){d(),l.classList.add("is-active")}),s.hasAttribute("search-area")?s.addEventListener("input",function(){window.clearTimeout(f),f=window.setTimeout(function(){var t,n,e,a,r;n=l,e=(t=s).getAttribute("search-area"),a=o,r=t.value,0<t.value.length?(null!==m&&m.abort(),(m=new XMLHttpRequest).open("post","/Search?handler="+e+"&s="+r,!0),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(),m.onload=function(){var e=m.responseText;c(n,e,a,t)}):n.innerHTML='<div class="mini-waiting">\n                    <span class="icon">\n                        <i class="fas fa-circle-notch fa-spin"></i>\n                    </span>\n                </div>',window.clearTimeout(f)},250)}):s.hasAttribute("lookup-area")&&(n=l,e=(t=s).getAttribute("lookup-area"),a=o,(r=new XMLHttpRequest).open("post","/Search?handler=ValueList&s="+e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),r.onload=function(){var e=r.responseText;c(n,e,a,t)},s.classList.contains("multiselect")&&s.addEventListener("input",function(){p(s,l)})),null!=i&&i.addEventListener("click",function(){o.value="",s.value=""})}),(document.querySelectorAll(".mini-background, .mini-close, .mini-card-head .delete, .mini-card-foot .button")||[]).forEach(function(e){var t=e.closest(".mini");e.addEventListener("click",function(){n(t)})}),window.onclick=function(e){e.target.closest(".mini,.input-mini")||d()},document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&d()}),(document.querySelectorAll(".mini-tags a.is-delete[value]")||[]).forEach(function(n){n.addEventListener("click",function(){var e=n.closest(".field:not(.mini-tags)").querySelector("select.is-hidden"),t=n.closest(".control");e.removeChild(e.querySelector('option[value="'+n.getAttribute("value")+'"]')),t.parentNode.removeChild(t)})}),(document.querySelectorAll(".mini-tags.reorder")||[]).forEach(function(e){e.addEventListener("reorder",function(){u(e)})})}();