"use strict";function _createForOfIteratorHelper(e,t){var n,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,i=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return r=e.done,e},e:function(e){i=!0,a=e},f:function(){try{r||null==s.return||s.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}!function(){var a=document;function t(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("tab-lnk")}),n=a.getElementById(e.getAttribute("href").replace("#","")),s=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("tab-dta")});[].forEach.call(s,function(e){e.classList.remove("active")}),[].forEach.call(t,function(e){e.classList.remove("active")}),n.classList.add("active"),e.classList.add("active"),a.dispatchEvent(new CustomEvent("tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}a.addEventListener("click",function(e){e.target.closest(".tab-lnk")&&(e.preventDefault(),t(e.target.closest(".tab-lnk")))},!1),a.addEventListener("tab-open",function(e){void 0!==e.detail&&e.detail.el&&t(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("tab-open",{cancelable:!0,detail:{el:document.querySelector('.tab-lnk[href="'+document.location.hash.replace("#","")+'"], .tab-lnk[href="'+document.location.hash+'"]')}}))}(),function(){(document.querySelectorAll(".panel-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),console.log("clicked"),n(t)},!1)});var a=document;function n(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("panel-tab")}),n=a.getElementById(e.getAttribute("href").replace("#","")),s=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("panel-tab-data")});[].forEach.call(s,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),n.classList.add("is-active"),e.classList.add("is-active"),a.dispatchEvent(new CustomEvent("panel-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}a.addEventListener("panel-tab-open",function(e){void 0!==e.detail&&e.detail.el&&n(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("panel-tab-open",{cancelable:!0,detail:{el:document.querySelector('.panel-tab[href="'+document.location.hash.replace("#","")+'"], .panel-tab[href="'+document.location.hash+'"]')}}))}(),function(){(document.querySelectorAll(".step-tab[href]")||[]).forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),console.log("clicked"),n(t)},!1)});var a=document;function n(e){var t=[].slice.call(e.parentElement.children).filter(function(e){return e.classList.contains("step-tab")}),n=a.getElementById(e.getAttribute("href").replace("#","")),s=[].slice.call(n.parentElement.children).filter(function(e){return e.classList.contains("step-tab-data")});[].forEach.call(s,function(e){e.classList.remove("is-active")}),[].forEach.call(t,function(e){e.classList.remove("is-active")}),n.classList.add("is-active"),e.classList.add("is-active"),a.dispatchEvent(new CustomEvent("step-tab-opened")),history.pushState&&history.pushState(null,null,"#"+e.getAttribute("href").replace("#",""))}a.addEventListener("step-tab-open",function(e){void 0!==e.detail&&e.detail.el&&n(e.detail.el)},!1),""!==document.location.hash&&null!==document.location.hash&&document.dispatchEvent(new CustomEvent("step-tab-open",{cancelable:!0,detail:{el:document.querySelector('.step-tab[href="'+document.location.hash.replace("#","")+'"], .step-tab[href="'+document.location.hash+'"]')}}))}(),function(){var r=document;function i(e){e.style.maxHeight=e.scrollHeight+20+"px"}function l(e){e.style.maxHeight=null,e.style.overflow="hidden",e.classList.remove("clps-o")}function n(t){t.classList.add("clps-o"),i(t);for(var e=t;e=e.parentElement.closest(".clps-o");)e.style.removeProperty("max-height");r.dispatchEvent(new CustomEvent("collapse-opened"));for(var n=t.parentElement.querySelector(".clps-o"),s=[];n;)n!==t&&n.nodeType===Node.ELEMENT_NODE&&s.push(n),n=n.nextElementSibling||n.nextSibling;for(var a=0;a<s.length;a++)l(s[a]);window.setTimeout(function(){for(var e=t.parentElement.closest(".clps-o");e;)i(e),e=e.parentElement.closest(".clps-o");t.classList.contains("clps-o")&&(t.style.overflow="visible")},300)}r.addEventListener("click",function(e){var t;e.target.closest('[data-toggle="clps"]')?null!=(t=r.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target").replace("#","")))&&(t.style.maxHeight||t.classList.contains("clps-o")?l:n)(t):e.target.closest(".clps:not(.clps-o")&&n(e.target.closest(".clps:not(.clps-o"))}),r.addEventListener("change",function(t){if(t.target.closest(".clps-o")){for(var e=t.target.closest(".clps-o");e;)e.style.removeProperty("max-height"),e=e.parentElement.closest(".clps-o");window.setTimeout(function(){for(var e=t.target.closest(".clps-o");e;)i(e),e=e.parentElement.closest(".clps-o")},300)}}),r.addEventListener("clps-close",function(e){void 0!==e.detail&&l(e.detail.el)},!1),r.addEventListener("clps-open",function(e){void 0!==e.detail&&n(e.detail.el)},!1)}(),function(){var e=document;function t(){for(var e=document.getElementsByClassName("crsl"),t=0;t<e.length;t++)e[t].classList.contains("crsl-p")||new n(e[t])}function n(e){this.target=e,this.next=e.getElementsByClassName("crsl-next")[0],this.prev=e.getElementsByClassName("crsl-prev")[0],this.dots=e.getElementsByClassName("crsl-dot"),this.slides=e.getElementsByClassName("crsl-itm"),this.target.classList.add("crsl-p"),this.next.addEventListener("click",this.showSlides.bind(this,1),!1),this.prev.addEventListener("click",this.showSlides.bind(this,-1),!1);for(var t=0;t<this.dots.length;t++)this.dots[t].addEventListener("click",this.showSlides.bind(this,0),!1)}var i=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};n.prototype={showSlides:function(e,t){var n,s,a=this.slides,r=this.dots;i(function(){if(t.target.matches(".crsl-dot"))e=t.target.getAttribute("slide");else{for(n=0;n<a.length;n++)if(0<a[n].offsetHeight&&0<a[n].offsetWidth){s=a[n];break}e+=Array.prototype.indexOf.call(a,s)}for((e=e>=a.length?0:e)<0&&(e=a.length-1),n=0;n<a.length;n++)a[n].style.display="none";for(n=0;n<r.length;n++)r[n].classList.remove("active");a[e].style.display="block",r[e].classList.add("active")})}},t(),e.addEventListener("load-carousel",function(){t()})}(),function(){function e(){setTimeout(function(){for(var e=o.querySelectorAll("table.sort"),t=0;t<e.length;t++){var n=e[t];if(!n.querySelectorAll("th .icon-sm").length)for(var s=n.getElementsByTagName("th"),a=0;a<s.length;a++){var r=s[a];r.style.cursor="pointer",r.innerHTML+='<svg class="icon-sm" viewBox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"/></svg>',r.parentElement.style.whiteSpace="nowrap",function(s){s.addEventListener("click",function(){var e=this.closest("table.sort"),t=Array.from(e.querySelectorAll("tr")).slice(1).sort(i(l(s)-1));this.asc=!this.asc,this.asc||(t=t.reverse());for(var n=0;n<t.length;n++)e.append(t[n])})}(r)}}},0)}function i(n){return function(e,t){e=a(e,n).replace("$",""),t=a(t,n).replace("$","");return/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(e)&&/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(t)?new Date(e)-new Date(t):s(e)&&s(t)?e-t:e.toString().localeCompare(t)}}function l(e){if(!e)return-1;for(var t=0;e;)t++,e=e.previousElementSibling;return t}var o=document,s=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},a=function(e,t){return e.getElementsByTagName("td")[t].textContent};o.addEventListener("ajax",function(){e()}),e()}(),function(){var n,s,a=document,t=0,r=0,i=(a.addEventListener("mousedown",function(e){e.target.closest(".drg-hdl")&&(s=e.target.closest(".drg"),n=s.cloneNode(!0),s.classList.add("drag-source"),n.classList.add("drag"),n.style.width=s.offsetWidth+1+"px",t=e.clientY-getOffset(s).top,r=e.clientX-getOffset(s).left,s.parentElement.style.position="relative",s.parentElement.appendChild(n),n.style.top=e.clientY-t+"px",n.style.left=e.clientX-r+"px",i(e))},!1),function(e){(e=e||window.event).preventDefault(),a.addEventListener("mouseup",o),a.addEventListener("mousemove",l)}),l=function(e){(e=e||window.event).preventDefault(),n.style.top=e.clientY-t+"px",n.style.left=e.clientX-r+"px",a.dispatchEvent(new CustomEvent("dragMove",{cancelable:!0,detail:{el:n,x:e.clientX,y:e.clientY}}))},o=function e(t){s.parentElement.replaceChild(n,s),n.classList.remove("drag"),a.dispatchEvent(new CustomEvent("dragEnd",{cancelable:!0,detail:{el:n,x:t.clientX,y:t.clientY}})),n.style.width=null,n.style.top=null,n.style.left=null,a.removeEventListener("mouseup",e),a.removeEventListener("mousemove",l)}}();var dragMoveOrder=function(e){var i,l,o,t=e.detail.el,n=e.detail.x,e=e.detail.y;t.closest(".reorder")&&(i=e,l=n,o=t.closest(".reorder").querySelector(".drg.drag-source"),t.closest(".reorder").querySelectorAll(".drg:not(.drag-source):not(.drag)").forEach(function(e){var t=getOffset(e),n=t.top,s=t.top+e.clientHeight,a=t.left,r=t.left+e.clientWidth/2,t=t.left+e.clientWidth;n<=i&&i<=s&&(l<=r&&a<=l?o.parentNode.insertBefore(o,e):r<=l&&l<=t&&o.parentNode.insertBefore(e,o))}))};function getUrlVars(){var s={};window.location.href.split("#")[0].replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){s[t]=n});return s}function ShowMessageBox(e){var t=document,n=t.getElementsByClassName("message-wrapper")[0];n.getElementsByClassName("message-close");t.querySelector(".message-container .message-inner").innerHTML=e,n.classList.remove("hidden"),setTimeout(function(){n.classList.add("hidden")},2e3)}document.addEventListener("dragMove",function(e){e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;debounce(dragMoveOrder(e),250)}),document.addEventListener("dragEnd",function(e){e=e||window.event;if(null==e.detail||null==e.detail.el)return!1;e.detail.el.closest(".mini-tags.reorder")&&e.detail.el.closest(".mini-tags.reorder").dispatchEvent(new CustomEvent("reorder"))}),function(){var e=document,t=debounce(function(){setTimeout(function(){for(var e=document.getElementsByClassName("atlas-chart"),t=0;t<e.length;t++){var n=e[t].getElementsByTagName("script")[0].innerHTML,s=(0<e[t].getElementsByClassName("chart").length&&e[t].removeChild(e[t].getElementsByClassName("chart")[0]),0<e[t].getElementsByClassName("ajaxLoader").length&&e[t].removeChild(e[t].getElementsByClassName("ajaxLoader")[0]),e[t].clientWidth);0<s&&e[t].appendChild(new a(n,s))}},0)},250),n=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)},a=function(c,u){var e="";try{e=JSON.parse(c)}catch(e){}var t,m,p,n=e.height||400,c=e.options,s=e.data,h=e.axis,a="",f=u||800,r=[],v=0,g={},b=0,y=["one","two","three","four","five"];for(d in this.table=document.createElement("table"),s)-1==r.indexOf(s[d].axis)&&r.push(s[d].axis);var E,L=70*(Math.floor(r.length/2)+r.length%2),w=1<r.length?70*Math.floor(r.length/2):40,x=f-L-w;if(this.table.classList.add("chart"),this.table.style.height=n+"px",this.table.style.marginRight=w+"px",this.table.style.marginLeft=L+"px",this.table.style.width=x+"px",this.table.innerHTML+='<caption class="chart-caption">'+e.title+"</caption>",c&&c.hasOwnproperty("legend")&&"false"!==c.legend||!c){for(d in this.thead=document.createElement("thead"),this.thead.classList.add("chart-head"),s)(E=document.createElement("th")).innerHTML+='<span class="chart-headClr '+y[d]+'"></span>'+s[d].title,this.thead.appendChild(E);this.table.appendChild(this.thead)}for(d in this.table.addEventListener("mouseover",this.mouseover.bind(this)),this.table.addEventListener("mouseout",this.mouseout.bind(this)),s)v=Math.max(v,s[d].data.length);for(m in p=x/x/v*100,r){var q=0,A=0;for(d in s)if(s[d].axis===r[m])for(t in(l=s[d]).data)q=Math.max(q,parseFloat(l.data[t].data)),A=Math.min(A,parseFloat(l.data[t].data));for(d in s)s[d].axis==r[m]&&(s[d].range=q-A,s[d].max=q,s[d].min=A);g[m]=q-A}for(d in s)e.lastlinePointY=null,e.lastlinePointX=null,b+="bar"==s[d].type?1:0;a="<tbody>";for(var i=0;i<v;i++){var S=s[0].data[i].title+": ";for(d in s)S+=s[d].data[i].data+" "+h[s[d].axis].title+"; ";a+='<tr class="chart-col" style="left:'+p*i+"%;width:calc("+p+'% - 10px);">';var T=0,H=0;for(d in s){var l=s[d],o=0==parseFloat(l.data[i].data)?0:parseFloat(l.data[i].data)/l.range*100,H=Math.max(H,o),C=(0==d&&(a+='<th class="chart-xAxisTitle" scope="row" style="left:'+(p/100*x/2-26-15)+'px">'+l.data[i].title),o/100*n<30?'style="margin-top:-22px"':"");"bar"==l.type?a+='<td class="chart-'+l.type+" "+y[d]+'" style="height:'+o+"%;width:"+("calc("+100/b+"% - 5px)")+";left:"+T/b*100+'%"><p '+C+"></p></td>":"line"==l.type&&(a=a+('<td class="chart-'+l.type)+" "+y[d]+'" style="height:'+o+'%"><p '+C+"></p>",!l.lastlinePointY&&0!=l.lastlinePointY||(u=p/100*x,C=180*Math.atan2(o/100*n-l.lastlinePointY,-u)/Math.PI,a+='<div style="width:'+Math.sqrt(Math.pow(u,2)+Math.pow(o/100*n-l.lastlinePointY,2))+"px;transform: rotate("+C+'deg);"></div>'),l.lastlinePointY=o/100*n),"bar"==l.type&&T++,a+="</td>"}a=a+('<td class="chart-tooltip" data-tooltip="'+S+'" style="height:calc('+H+'% + 20px)"></td>')+"</tr>"}for(d in this.table.innerHTML+=a+"</tbody>",a='<caption class="chart-ticks">',r)N=55*(Math.floor(d/2)+1),I=d%2==1?"right":"left",void 0!==h[m]&&(a+='<div class="chart-yAxisTitle '+I+'" style="'+I+":-"+N+'px"><p>'+h[d].title+"</p></div>");for(var M=parseInt(n/50),d=1;d<=M;d++){for(t in a+='<div class="chart-ticksTick'+(1==d?" first ":"")+(d==M?" last ":"")+'">',g){var R,N=30*(Math.floor(t/2)+1),I=t%2==1?"right":"left";0<g[t]&&(R=(R=g[t]-g[t]/M*(d-1))<10?R.toFixed(2):Math.round(R),"left"==I&&(N+=parseFloat(3*(R.toString().length-1))),a+='<p style="'+I+":-"+N+'px">'+R+"</p>")}a+="</div>"}return this.table.innerHTML+="</tbody>"+(a+="</table>"),this.table};a.prototype={mouseover:function(e){var t=event.target;n(function(){hover=Array.prototype.slice.call(t.closest("table").getElementsByClassName("hover"));for(var e=0;e<hover.length;e++)hover[e].classList.remove("hover");if(t.closest(".chart-head th")&&t.closest(".chart-head th").getElementsByTagName("span")&&null!=t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value){lines=Array.prototype.slice.call(t.closest("table").getElementsByClassName("chart-line "+t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(e=0;e<lines.length;e++)lines[e].classList.add("hover");bars=Array.prototype.slice.call(t.closest("table").getElementsByClassName("chart-bar "+t.closest(".chart-head th").getElementsByTagName("span")[0].classList.value.replace("chart-headClr","")));for(e=0;e<bars.length;e++)bars[e].classList.add("hover")}})},mouseout:function(e){var t=event.target;n(function(){hover=Array.prototype.slice.call(t.closest("table").getElementsByClassName("hover"));for(var e=0;e<hover.length;e++)hover[e].classList.remove("hover")})}},t(),e.addEventListener("load-charts",function(){t()}),e.addEventListener("mdl-open",function(){t()}),e.addEventListener("tab-opened",function(){t()}),e.addEventListener("collapse-opened",function(){t()}),window.addEventListener("resize",function(){t()})}(),function(){function e(){for(var e=n.querySelectorAll('input[type="nice-input"], textarea[type="nice-input"]'),t=0;t<e.length;t++)new s(e[t],t)}var n=document;function s(e,t){this.hiddenInput=n.createElement(e.tagName),this.hiddenInput.style.display="none",this.hiddenInput.setAttribute("tabindex",-1),this.hiddenInput.setAttribute("id",e.getAttribute("id")),this.hiddenInput.setAttribute("name",e.getAttribute("name")),this.hiddenInput.setAttribute("inputId",t),this.hiddenInput.setAttribute("value",e.getAttribute("value")),this.hiddenInput.setAttribute("multiple","true"),this.span=n.createElement("div"),this.span.setAttribute("class",e.getAttribute("class")),this.span.classList.add("input-span"),this.span.setAttribute("contenteditable","true"),this.span.setAttribute("data-initial-content",e.getAttribute("data-initial-content")),this.span.textContent=e.getAttribute("value"),this.wrapper=n.createElement("div"),this.wrapper.classList.add("input-newWrapper"),this.wrapper.appendChild(this.span),this.wrapper.appendChild(this.hiddenInput),e.classList.contains("submit")&&(this.button=n.createElement("button"),this.button.classList.add("input-submit"),this.button.setAttribute("type","submit"),this.button.setAttribute("name","submit"),this.button.innerHTML="<span class='fas fa-paper-plane'></span>",this.wrapper.appendChild(this.button)),this.container=n.createElement("div"),this.container.classList.add("input-ctn"),e.classList.contains("slim")&&this.container.classList.add("slim"),this.container.appendChild(this.wrapper),e.parentNode.replaceChild(this.container,e),this.span.addEventListener("focus",this.addFocus.bind(this),!1),this.span.addEventListener("blur",this.addBlur.bind(this),!1),this.span.addEventListener("input",this.updateInput.bind(this),!1),this.span.addEventListener("keypress",this.updateInput.bind(this),!1),this.span.addEventListener("paste",this.updateInput.bind(this),!1),this.span.addEventListener("change",this.updateInput.bind(this),!1)}var a=n.requestAnimationFrame||n.setImmediate||function(e){return setTimeout(e,0)};s.prototype={addFocus:function(e){var t=this.wrapper;this.span;a(function(){t.classList.add("input-newWrapper-focus")})},addBlur:function(e){var t=this.wrapper,n=this.span;a(function(){t.classList.remove("input-newWrapper-focus"),n.innerHTML=n.innerHTML.replace(/<div>/gi,"<br>").replace(/<\/div>/gi,"")})},updateInput:function(e){var t=this.span,n=this.hiddenInput;a(function(){n.value=t.innerHTML.replace(/<div>/gi,"<br>").replace(/<\/div>/gi,"")})}},e(),n.addEventListener("ajax",function(){e()}),n.addEventListener("build-inputs",function(){e()})}(),function(){var a=document;a.addEventListener("submit",function(e){var t,n,s;e.target.matches(".comments-form")&&(e.preventDefault(),e=e.target,t=a.getElementsByClassName("comments")[0],s=serialize(e),t.style.opacity=0,t.style.transition="opacity 0.1s ease-in-out",(n=new XMLHttpRequest).open("post",e.getAttribute("action")+"&"+s,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n.onload=function(){t.innerHTML=n.responseText,t.style.opacity=1,a.dispatchEvent(new CustomEvent("build-inputs"))})},!1)}(),function(){var u,r=document;function y(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function t(e){if(void 0!==e)new s(e);else for(var t=r.querySelectorAll('[type="dynamic-dropdown"]'),n=0;n<t.length;n++)new s(t[n])}function s(e){this.ddCntr=r.createElement("div"),this.ddWrp=r.createElement("div"),this.type=e.tagName,this.ddHdn=r.createElement(this.type),this.ddPhdr=r.createElement("div"),this.ddInpt=r.createElement("div"),this.ddVsbl=r.createElement("input"),this.ddRslts=r.createElement("div"),this.ddCntr.classList.add("dd-cntr"),this.ddWrp.classList.add("dd-wrp"),e.classList.contains("slim")&&this.ddWrp.classList.add("slim"),this.ddHdn.classList.add("dd-hdn"),this.ddPhdr.classList.add("dd-phdr"),this.ddInpt.classList.add("dd-inpt"),this.ddVsbl.classList.add("dd-vsbl"),this.ddRslts.classList.add("dd-rslts"),this.ddRslts.setAttribute("ss-container","true"),this.ddCntr.setAttribute("tabindex","0"),this.ddHdn.setAttribute("tabindex","-1"),this.ddHdn.setAttribute("multiple","true"),e.hasAttribute("id")&&this.ddHdn.setAttribute("id",e.getAttribute("id")),e.hasAttribute("name")&&this.ddHdn.setAttribute("name",e.getAttribute("name")),e.hasAttribute("value")&&this.ddHdn.setAttribute("value",e.getAttribute("value")),this.ddVsbl.setAttribute("autocomplete","off"),e.hasAttribute("search-area")&&this.ddVsbl.setAttribute("search-area",e.getAttribute("search-area")),this.searchArea=e.getAttribute("search-area"),e.hasAttribute("visible-value")&&this.ddVsbl.setAttribute("value",e.getAttribute("visible-value")),e.hasAttribute("required")&&this.ddVsbl.setAttribute("required",e.getAttribute("required")),e.hasAttribute("method")&&this.ddVsbl.setAttribute("method",e.getAttribute("method")),this.method=e.getAttribute("method"),e.hasAttribute("value")||(this.ddPhdr.innerHTML=e.hasAttribute("placeholder")?e.getAttribute("placeholder"):"type to search.."),this.ddPhdr.setAttribute("data-placeholder",e.hasAttribute("placeholder")?e.getAttribute("placeholder"):"type to search.."),e.hasAttribute("data-head")&&this.ddWrp.setAttribute("data-head",e.getAttribute("data-head")),this.ddCntr.appendChild(this.ddWrp),this.ddWrp.appendChild(this.ddInpt),this.ddWrp.appendChild(this.ddHdn),this.ddInpt.appendChild(this.ddRslts),this.ddInpt.appendChild(this.ddVsbl),this.ddInpt.appendChild(this.ddPhdr);for(var t=Array.prototype.slice.call(e.getElementsByTagName("option")),n=0;n<t.length;n++){this.ddHdn.appendChild(t[n]);var s=document.createElement("div"),a=(s.classList.add("dd-itm"),t[n].classList.contains("group")&&s.classList.add("group"),"");e.hasAttribute("search-area")&&"UserSearchMail"==e.getAttribute("search-area")&&(a='<div class="mlbx-usrDrp"><i class="fas fa-angle-down fa-sm"></i><div class="mlbx-usrDrpCtr"><div class="mlbx-usrDrpItm mail-new-message" data-from="Analytics" data-fromid="45781">New Mail</div>'+(t[n].classList.contains("group")?'<div class="mlbx-usrDrpItm">Expand Group</div>':"")+'<div class="separator"></div><div class="mlbx-usrDrpItm"><a class="ajax" href="/users?id=45781">Open Profile</a></div></div></div>'),s.innerHTML=t[n].innerHTML+a,this.ddWrp.insertBefore(s,this.ddWrp.firstChild)}e.parentNode.replaceChild(this.ddCntr,e),this.flLoad(),this.stW(),this.fcsTmr=null,this.ddVsbl.addEventListener("input",this.search.bind(this)),this.ddVsbl.addEventListener("input",this.stW.bind(this)),this.ddVsbl.addEventListener("setWidth",this.stW.bind(this)),document.addEventListener("tab-opened",this.stW.bind(this)),this.ddVsbl.addEventListener("focus",this.search.bind(this)),this.ddVsbl.addEventListener("keydown",this.keydn.bind(this)),this.ddCntr.addEventListener("click",this.click.bind(this),!0),this.ddCntr.addEventListener("focusout",this.unfcs.bind(this)),this.ddCntr.addEventListener("blur",this.unfcs.bind(this)),this.ddRslts.addEventListener("mouseover",this.rhov.bind(this))}window.addEventListener("blur",function(e){if(document.activeElement)try{document.activeElement.blur()}catch(e){}var t=document.querySelector(":focus");if(t)try{t.blur()}catch(e){}});var E=r.requestAnimationFrame||r.setImmediate||function(e){return setTimeout(e,0)};s.prototype={keydn:function(e){var t,n,s,a=e.keyCode,c=e,r=this.type,u=this.ddHdn,i=this.ddVsbl,l=this.ddRslts,m=this.ddPhdr,p=this.ddWrp,o=this.ddInpt;if(8==a&&0==i.value.length&&"SELECT"==r&&o.previousElementSibling)E(function(){t=u.getElementsByTagName("option");for(var e=0;e<t.length;e++)if(t[e].childNodes[0].nodeValue==o.previousElementSibling.childNodes[0].nodeValue){t=t[e],n=l.querySelector('.dd-rslt.hidden[value="'+t.getAttribute("value")+'"]'),t.parentNode.removeChild(t),n&&n.classList.remove("hidden");break}o.parentElement.removeChild(o.previousElementSibling)});else if(37==a&&"SELECT"==r&&o.previousElementSibling&&o.previousElementSibling.matches(".dd-itm")&&0==i.selectionStart)E(function(){m.innerHTML=m.getAttribute("data-placeholder"),o.parentElement.insertBefore(o,o.previousElementSibling),setTimeout(function(){i.focus()},0)});else if(39==a&&"SELECT"==r&&o.nextElementSibling&&o.nextElementSibling.matches(".dd-itm")&&i.selectionStart==i.value.length)E(function(){y(o,o.nextElementSibling),setTimeout(function(){i.focus()},0)});else if(46==a&&"SELECT"==r&&o.nextElementSibling&&o.nextElementSibling.matches(".dd-itm")&&i.selectionStart==i.value.length)E(function(){t=u.getElementsByTagName("option");for(var e=0;e<t.length;e++)if(t[e].innerHtml==o.nextElementSibling.innerHTML){t=t[e],n=l.querySelector('.dd-rslt.hidden[value="'+t.getAttribute("value")+'"]'),t.parentNode.removeChild(t),n&&n.classList.remove("hidden");break}0<l.querySelectorAll(".dd-rslt:not(.hidden):not(.disabled)").length&&null!==l.getElementsByClassName("disabled")&&l.getElementsByClassName("disabled")[0].parentElement.removeChild(l.getElementsByClassName("disabled")[0]),o.parentElement.removeChild(o.nextElementSibling)});else if(13==a||3==a)e.preventDefault(),E(function(){0<l.getElementsByClassName("active").length&&(l.getElementsByClassName("active")[0].click(),p.classList.remove("dd-wrp-show"),l.style.removeProperty("display")),setTimeout(function(){i.focus()},0)});else if(9==a){c.preventDefault(),0<l.getElementsByClassName("active").length?l.getElementsByClassName("active")[0].click():p.classList.add("dd-wrp-invalid");for(var h=document.querySelectorAll('input, select, div[contenteditable="true"]'),d=[],f=0;f<h.length;f++)0==function(e){e=window.getComputedStyle(e);return"none"===e.display||"hidden"===e.visibility}(h[f])&&d.push(h[f]);c.shiftKey?0==Array.prototype.indexOf.call(d,i)?setTimeout(function(){d[d.length-1].focus()},0):setTimeout(function(){d[Array.prototype.indexOf.call(d,i)-1].focus()},0):Array.prototype.indexOf.call(d,i)==d.length-1?setTimeout(function(){d[0].focus()},0):setTimeout(function(){d[Array.prototype.indexOf.call(d,i)+1].focus()},0)}else 38==a?(e.preventDefault(),E(function(){n=l.getElementsByClassName("active")[0],(s=n?(t=Array.prototype.indexOf.call(n.parentElement.children,n),n.classList.remove("active"),0==t?n.parentElement.children[n.parentElement.children.length-1]:n.previousElementSibling):l.children[l.children.length-1]).classList.add("active"),s.offsetTop<s.parentElement.scrollTop?s.parentElement.scrollTop-=s.clientHeight:s.offsetTop>s.parentElement.scrollTop+s.parentElement.clientHeight+3&&(s.parentElement.scrollTop=s.offsetTop+3)})):40==c.keyCode&&(e.preventDefault(),E(function(){n=l.getElementsByClassName("active")[0],(s=n?(t=Array.prototype.indexOf.call(n.parentElement.children,n),n.classList.remove("active"),t==n.parentElement.children.length-1?n.parentElement.children[0]:n.nextElementSibling):l.children[0]).classList.add("active"),s.offsetTop+s.clientHeight>s.parentElement.scrollTop+s.parentElement.clientHeight?s.parentElement.scrollTop+=s.clientHeight:s.offsetTop+s.clientHeight<s.parentElement.scrollTop+3&&(s.parentElement.scrollTop=s.offsetTop-3)}))},rhov:function(e){var t,n=this.ddRslts,s=e.target.closest(".dd-rslt");E(function(){t=n.getElementsByClassName("active");for(var e=0;e<t.length;e++)t[e].classList.remove("active");s&&s.classList.add("active")})},flLoad:function(e){this.ddVsbl,this.ddCntr;var s,a,r=this.ddRslts,t=this.ddHdn,i=(this.ddPhdr,"/Search?handler=ValueList&s="+this.searchArea),l="",o=[];E(function(){function n(e){if(0===(e=JSON.parse(e)).length)r.innerHTML='<div class="dd-rslt disabled">No matches found</div>';else{for(var t=0;t<e.length;t++){a=e[t];var n="",s=(-1!==o.indexOf(a.ObjectId)&&(n="hidden"),a.ObjectId||a.Description);l+='<div class="dd-rslt '+n+'" value="'+s+'">'+a.Name+"</div>",t==e.length-1&&(r.innerHTML=l)}r.querySelectorAll(".dd-rslt:not(.hidden)").length<1&&(r.innerHTML+='<div class="dd-rslt disabled">No matches found</div>')}if(10<e.length){r.style.height=Math.min(23*e.length+8,238)+"px";try{SimpleScrollbar.initAll()}catch(e){}}}[].forEach.call(t.getElementsByTagName("option"),function(e){o.push(e.getAttribute("value"))}),cache.exists(i)?n(cache.get(i)):((s=new XMLHttpRequest).open("post",i,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){var e=s.responseText,t=(n(e),null!=s.getResponseHeader("Cache-Control")?(s.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null);t&&cache.set(i,e,t)})})},unfcs:function(e){var t=this.ddVsbl,n=this.ddCntr,s=this.ddRslts,a=this.ddPhdr,r=this.ddWrp,i=this.ddHdn;E(function(){null!=e.relatedTarget&&e.relatedTarget.closest(".dd-cntr")==n||(r.classList.remove("dd-wrp-focus"),r.classList.remove("dd-wrp-show"),s.style.removeProperty("display"),t.value.length<1&&a.style.removeProperty("display"),i.hasAttribute("value")?r.classList.remove("dd-wrp-invalid"):r.classList.add("dd-wrp-invalid"))})},click:function(c){var u=this.ddVsbl,m=this.type,p=this.ddRslts,h=this.method,f=this.ddHdn,v=this.ddCntr,g=(this.stW,this.ddInpt),b=this.ddWrp;E(function(){if(b.classList.remove("dd-wrp-invalid"),b.classList.add("dd-wrp-focus"),c.target.closest(".dd-rslt")){var e,t,n=c.target.closest(".dd-rslt"),s=n.innerHTML;"SELECT"==m?(u.value="",void 0!==h&&!1!==h&&null!==h?(n.classList.add("hidden"),p.querySelector(".dd-rslt:not(.hidden)")||(p.innerHTML='<div class="dd-rslt disabled">No matches found</div>')):p.innerHTML="",t=e="",u.hasAttribute("search-area")&&"UserSearchMail"==u.getAttribute("search-area")&&(e=n.classList.contains("group")?"group":"",t='<div class="mlbx-usrDrp"><i class="fas fa-angle-down fa-sm"></i><div class="mlbx-usrDrpCtr"><div class="mlbx-usrDrpItm mail-new-message" data-from="Analytics" data-fromid="45781">New Mail</div>'+(n.classList.contains("group")?'<div class="mlbx-usrDrpItm">Expand Group</div>':"")+'<div class="separator"></div><div class="mlbx-usrDrpItm"><a class="ajax" href="/users?id=45781">Open Profile</a></div></div></div>'),g.insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e+'">'+s+t+"</div>"),f.innerHTML+='<option class="'+e+'" selected="selected" value="'+n.getAttribute("value")+'">'+s+"</option>",f.dispatchEvent(new CustomEvent("change",{bubbles:!0})),setTimeout(function(){u.focus()},0)):(f.setAttribute("value",n.getAttribute("value")),n.classList.contains("group")?(u.setAttribute("group","true"),f.setAttribute("group","true"),"/users"==window.location.pathname.toLowerCase()&&u.closest("form").setAttribute("action","/groups")):(u.removeAttribute("group"),f.removeAttribute("group"),"/groups"==window.location.pathname.toLowerCase()&&u.closest("form").setAttribute("action","/users")),u.value=s,u.setAttribute("value",s),u.dispatchEvent(new CustomEvent("setWidth")),v.blur(),p.style.removeProperty("height"),p.style.removeProperty("display"),"fullList"!==h&&(p.innerHTML=""),f.dispatchEvent(new CustomEvent("change",{bubbles:!0})))}else{if(b.querySelector(".dd-itm")&&null==c.target.closest(".mlbx-usrDrp")){for(var a=b.querySelectorAll(".dd-itm"),r=[],i=c.pageX,l=c.pageY,o=0;o<a.length;o++)l>getOffset(a[o]).top&&l<getOffset(a[o]).top+a[o].clientHeight&&r.push(a[o]);for(o=0;o<r.length;o++){var d=getOffset(r[o]).left+r[o].clientWidth/2;getOffset(g).left;if(i<d){r[o].parentElement.insertBefore(g,r[o]);break}d<i&&y(g,r[o])}}setTimeout(function(){u.focus()},0),u.dispatchEvent(new CustomEvent("setWidth"))}})},stW:function(e){var t,n=this.ddVsbl,s=this.ddCntr,a=document;E(function(){(t=a.createElement("div")).style.visibility="hidden",t.style.width="auto",t.style.zIndex="-99",t.style.whiteSpace="nowrap",t.style.position="absolute",t.style.fontSize=n.style.fontSize,t.innerHTML=n.value,s.appendChild(t),n.value<1&&document.activeElement&&!document.activeElement.closest(".dd-vsbl")?n.style.width="17px":n.style.width=Math.max(t.clientWidth+17,17)+"px",t.parentElement.removeChild(t)})},search:function(e){var r,t,n=this.ddVsbl,i=this.ddRslts,s=this.ddHdn,l=this.ddWrp,o=this.ddCntr,a=this.method,d=this.searchArea,c=this.ddPhdr;E(function(){var e;s.removeAttribute("value"),c.style.display="none",l.classList.remove("dd-wrp-invalid"),"fullList"==a?(l.classList.add("dd-wrp-show"),i.style.display="block"):(t=s.getElementsByTagName("option"),e=[].forEach.call(t,function(e){return e.value}),0<n.value.trim().length?(r={s:n.value,e:void 0!==e?e.toString():""},t=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&"),null!=u&&u.abort(),(u=new XMLHttpRequest).open("post","/Search?handler="+d+"&"+t,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(),u.onload=function(){try{r=JSON.parse(u.responseText)}catch(e){return!1}if(i.style.removeProperty("height"),0===r.length)i.innerHTML='<div class="dd-rslt disabled">No matches found</div>';else{i.innerHTML="";for(var e=0;e<r.length;e++){var t=r[e].ObjectId||r[e].Description,n=document.createElement("div");n.classList.add("dd-rslt"),"g"==r[e].Type&&n.classList.add("group"),n.setAttribute("value",t),n.innerHTML=r[e].Name,0==e&&n.classList.add("active"),i.appendChild(n)}}l.classList.add("dd-wrp-show"),i.style.display="block",i.style.removeProperty("left");var s=getOffset(i).left+i.clientWidth,a=getOffset(o.parentElement).left+o.parentElement.clientWidth;if(a<s&&(i.style.left=a-s-40+"px"),i.classList.remove("ss-container"),10<r.length){i.style.height=Math.min(23*r.length+8,238)+"px";try{SimpleScrollbar.initAll()}catch(e){}}}):(i.style.removeProperty("display"),l.classList.remove("dd-wrp-show"),s.removeAttribute("value"),c.style.removeProperty("display"))),setTimeout(function(){n.focus()},0)})}},t(),r.addEventListener("ajax",function(){t()}),r.addEventListener("dropdown",function(e){void 0!==e.detail&&e.detail&&e.detail.el?t(e.detail.el):t()},!1)}(),function(){function r(e){void 0===e?[].forEach.call(document.getElementsByClassName("mdl-o"),function(e){e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))}):(e.classList.remove("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-close"))),0<document.getElementsByClassName("mdl-o").length||document.getElementsByTagName("body")[0].classList.remove("b-mdl")}function i(e,t){document.getElementsByTagName("body")[0].classList.toggle("b-mdl"),e.classList.toggle("mdl-o"),e.dispatchEvent(new CustomEvent("mdl-open",{cancelable:!0,detail:{e:t}}))}document.addEventListener("click",function(e){var t,n,s,a=document;console.log(e.target.closest("[data-toggle]")),e.target.closest("[data-toggle]")&&"mdl"==e.target.closest("[data-toggle]").getAttribute("data-toggle")?i(a.getElementById(e.target.closest("[data-toggle]").getAttribute("data-target")),e.target.closest("[data-toggle]")):e.target.closest("[data-dismiss]")&&"mdl"==e.target.closest("[data-dismiss]").getAttribute("data-dismiss")||e.target.closest(".editorMdl-close")?r(e.target.closest(".mdl")):e.target.closest(".request-access")?(n={reportName:document.querySelector(".report-name-clean").innerHTML,directorName:a.getElementById("director-name").value,reportUrl:window.location.href},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(t=new XMLHttpRequest).open("post","/Requests?handler=AccessRequest&"+s,!0),t.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),ShowMessageBox("Your request has been submitted."),r()):e.target.closest(".share-feedback")?(n={reportName:document.title,description:e.target.parentNode.previousElementSibling.getElementsByTagName("textarea")[0].value,reportUrl:window.location.href},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(t=new XMLHttpRequest).open("post","/Requests?handler=ShareFeedback&"+s,!0),t.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),ShowMessageBox("Thanks for the feedback."),e.target.parentNode.previousElementSibling.getElementsByTagName("textarea")[0].value="",r()):e.target.closest(".pop")&&(a.getElementsByClassName("imagepreview")[0].setAttribute("src",e.target.closest(".pop").children[0].getAttribute("src")),i(a.getElementById("image-modal"),null))},!0),document.getElementById("shareModal").addEventListener("mdl-open",function(e){for(var e=e.detail.e,t=e.getAttribute("data-name"),n=(url=e.hasAttribute("data-url")&&null!=e.getAttribute("data-url")&&""!=e.getAttribute("data-url")?e.getAttribute("data-url"):window.location.href.replace(window.location.origin,""),this),s=(n.querySelector(".mlbx-newMsgSubjIpt").innerHTML="Share: "+t,n.querySelector(".mlbx-newMsgMsg").innerHTML="<div>Hi!<br>I would like to share this "+e.getAttribute("data-type")+" with you.</div><br><a href='"+url+"'>"+t+"</a><br><br><div>Check it out sometime!</div><br><div>Regards!<br>"+n.querySelector(".mlbx-newMsgSender span:nth-child(2)").innerHTML,n.querySelector(".mlbx-shareName").value=t,n.querySelector(".mlbx-shareUrl").value=url,n.querySelectorAll(".dd-itm")),a=0;a<s.length;a++)s[a].parentElement.removeChild(s[a]);for(var r=n.querySelectorAll(".dd-hdn option"),a=0;a<r.length;a++)r[a].parentElement.removeChild(r[a]);document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:n.querySelector("#new_msg_dynamic-dropdown:not(.dd-hdn)")}}))}),document.getElementById("shareFeedback").addEventListener("mdl-open",function(e){var e=e.detail.e,t=e.getAttribute("data-name");window.location.origin,e.hasAttribute("data-url")&&null!=e.getAttribute("data-url")&&""!=e.getAttribute("data-url")?e.getAttribute("data-url"):window.location.href;this.querySelector(".mdl-h h2").innerHTML=e.getAttribute("data-tooltip"),this.querySelector(".share-feedback").setAttribute("report-name",t)}),document.getElementById("requestAccessModal").addEventListener("mdl-open",function(e){e=e.detail.e.getAttribute("data-name");this.querySelector(".report-name-clean").innerHTML=e}),document.addEventListener("modal-close",function(){r()})}(),function(){function t(e){[].forEach.call(e.querySelectorAll("source[data-srcset]"),function(e){var t;a(e)&&(t=e.getAttribute("data-srcset"),e.setAttribute("srcset",""),e.removeAttribute("data-srcset"),e.setAttribute("srcset",t))})}function n(e){[].forEach.call(e.querySelectorAll("img[data-src]"),function(e){var t;a(e)&&(t=e.getAttribute("data-src"),e.setAttribute("src",""),e.removeAttribute("data-src"),e.setAttribute("src",t))})}function e(){[].forEach.call(s.querySelectorAll("picture"),function(e){n(e),t(e)}),n(s),t(s)}var s=document,a=function(e){var t=e.getBoundingClientRect();return-600<=t.top&&0<=t.left&&t.bottom-e.clientHeight-600<=(document.documentElement.clientHeight||s.documentElement.clientHeight)&&t.right-600-e.clientWidth<=(document.documentElement.clientWidth||s.documentElement.clientWidth)};e(),s.addEventListener("ajax",function(){setTimeout(function(){e()},0)}),s.addEventListener("scroll",function(){debounce(e(),100)},{passive:!0})}(),function(){window.onbeforeunload=function(){setTimeout(function(){e()},0)};var e=function(){var e=-1!=document.title.indexOf(" | ")?document.title.split(" | ")[0]:document.title,t=window.location.href,n={},s=sessionStorage.getItem("breadcrumbs"),e=(0!==(s=null!==s?JSON.parse(s):[]).length&&s[s.length-1].title==e&&s[s.length-1].url==t||(n.title=e,n.url=t,0<s.length&&s[s.length-1].title.startsWith("Search")&&n.title.startsWith("Search")&&s.pop(),s.push(n),sessionStorage.setItem("breadcrumbs",JSON.stringify(s))),document.getElementsByClassName("breadcrumb")[0]);s.length<=1||(e.innerHTML="<ul>"+a(s)+"</ul>",e.style.opacity=1)},a=function(e){var t=0,n="";for((e=e.slice(Math.max(e.length-7,0))).reverse(),n="<li class='is-active'><a href='#'>"+e[0].title+"</a></li>",t=1;t<e.length;t++)n+='<li><a href="'+e[t].url+'" class="">'+e[t].title+"</a></li>";return n};e()}(),function(){window.addEventListener("scroll",function(){debounce(void l(),100)},{passive:!0}),window.addEventListener("resize",function(){debounce(void l(),100)});var n,s,a,r=document.querySelector(".pageTitle:not(.loose)"),i=document.querySelector(".sideNav");if(document.addEventListener("click",function(e){e.target.closest(".site-messageClose")&&(document.querySelector(".site-message").parentElement.removeChild(document.querySelector(".site-message")),r&&(s=getOffset(r).top))}),r){for(var e=document.getElementsByClassName("location"),t=0;t<e.length;t++)e[t].style.top="-"+r.clientHeight+"px";s=getOffset(r).top,n=r.nextElementSibling,a=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-top"),10)}var l=function(){var e=document.body,t=document.documentElement,e=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);r&&(e-window.innerHeight>2*s||e-window.innerHeight<=s)&&(t=r.clientWidth,window.pageYOffset>=s?(r.classList.contains("sticky")||(n.style.paddingTop=a+r.clientHeight+"px"),r.classList.add("sticky"),r.style.width=t+"px"):(r.classList.remove("sticky"),r.style.removeProperty("width"),n.style.removeProperty("padding-top"))),i&&(window.pageYOffset>=s?(e=i.getBoundingClientRect().left,i.classList.add("sticky"),i.style.left=e+"px"):(i.classList.remove("sticky"),i.style.removeProperty("left")))};function o(){for(var e,t,n=document.querySelectorAll(".body-main a[href]"),s=[],a=/[R|r]eports\?id=(\d+)/,r=0;r<n.length;r++)(e=n[r].getAttribute("href").match(a))&&s.push(e[1]);(e=window.location.href.match(a))&&s.push(e[1]),0<s.length&&((t=document.getElementById("related-reports"))||((t=document.createElement("div")).setAttribute("id","related-reports"),document.getElementById("AdColTwo").appendChild(t)),t.setAttribute("data-url","/Reports/?handler=RelatedReports&id="+s.slice(0,5).join(",")),t.setAttribute("data-ajax","yes"),document.dispatchEvent(new CustomEvent("load-ajax-content")))}l(),o(),document.addEventListener("related-reports",function(){o()})}(),1!=getUrlVars().EPIC&&1!=getCookie("EPIC")||setCookie("EPIC",1,99),function(){var c=document;function d(e){var t,n,s,a,e=e||c.getElementsByClassName("fav-show-all")[0],r=e.getAttribute("folder-id"),i=c.getElementById("favs-none");for(i.style.display="none",t=e.parentElement.getElementsByClassName("active"),n=0;n<t.length;n++)(s=t[n]).classList.remove("active"),(a=s.getElementsByTagName("i")[0]).classList.remove("fa-folder-open"),a.classList.add("fa-folder");if(null!==r){for(t=c.querySelectorAll('.favs div[folder-id]:not([folder-id="'+r+'"])'),n=0;n<t.length;n++)(s=t[n]).style.display="none";t=c.querySelectorAll('.favs div[folder-id="'+r+'"]')}else t=c.querySelectorAll(".favs div[folder-id]");for(n=0;n<t.length;n++)(s=t[n]).style.opacity=0,s.style.removeProperty("display"),s.style.transition="opacity 0.1s ease-in-out",s.offsetHeight,s.style.opacity=1;if(e.classList.add("active"),(t=e.getElementsByTagName("i")[0]).classList.remove("fa-folder"),t.classList.add("fa-folder-open"),null!==r&&0==c.querySelectorAll('.favs div[folder-id="'+r+'"]').length||null==r&&0==c.querySelectorAll(".favs div[folder-id]").length){for(t=i.childNodes,n=0;n<t.length;n++)(s=t[n]).style.removeProperty("display");i.style.opacity=0,i.style.removeProperty("display"),i.style.transition="opacity 0.1s ease-in-out",i.offsetHeight,i.style.opacity=1,c.getElementById("Folder_UserFavoriteFolderId").value=r}}function u(e,t,n){if(e.classList.contains("fav")){for(var s,a,r,i,l,o=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),d=(window.event,0);d<o.length;d++)if(s=o[d],a=(l=getOffset(s)).top,r=l.top+s.offsetHeight,i=l.left,l=l.left+s.offsetWidth,a<n&&n<r&&i<t&&t<l)return s;return!1}}c.addEventListener("click",function(e){if(e.target.closest(".favorite:not(.disabled)")||e.target.closest(".favorite-search:not(.disabled)")||e.target.closest(".fav-star:not(.disabled)")||e.target.closest("[fav-type]")){e.preventDefault(),e.stopPropagation();for(var t,n,e=e.target.closest(".favorite-search:not(.disabled)")?e.target.getElementsByTagName("i")[0]:e.target,s=null!=e.closest(".favs"),a=null!=document.getElementsByClassName("favs")[0],r=1,i=e.getAttribute("fav-type"),l=e.getAttribute("object-id"),e=e.getAttribute("object-name"),o=c.querySelectorAll('[fav-type="'+i+'"][object-id="'+l+'"]'),d=0;d<o.length;d++)(t=o[d]).classList.contains("favorite")?(t.classList.remove("favorite"),r=0):t.classList.add("favorite");if(s)for(c.querySelectorAll(".favs div[folder-id]").length<=1&&((t=c.getElementById("favs-none")).style.opacity=0,t.style.removeProperty("display"),t.style.transition="opacity 0.3s ease-in-out",t.offsetHeight,t.style.opacity=1),d=0;d<o.length;d++)(t=o[d].closest(".fav")).parentElement.removeChild(t);n={actionType:r,favoriteType:i,objectId:l,objectName:e},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),(i=new XMLHttpRequest).open("post","/users?handler=EditFavorites&"+s,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){a&&c.dispatchEvent(new CustomEvent("reload-favs"))}}},!1),c.addEventListener("click",function(e){if(e.target.closest(".fav-show-all"))d();else{if(e.target.closest(".fav-folder-new"))return!1;e.target.closest(".fav-folder")&&(e.target.classList.contains("active")?d():d(e.target.closest(".fav-folder")))}}),c.addEventListener("submit",function(e){var t,n,s,a,r,i,l;e.target.closest("#CreateFolderForm")?(e.preventDefault(),t=e.target.getElementsByTagName("input")[0],n=e.target.getElementsByTagName("span")[0],s=t.value,a=c.getElementById("fav-folders"),t.value,r=serialize(e.target),(i=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+r,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),t.value="",e.target.querySelector(".submit").innerHTML="",i.onload=function(){var e=c.createElement("div"),t=(e.classList.add("fav-folder"),e.classList.add("drg"),e.setAttribute("folder-id",i.responseText),e.innerHTML='<i class="fas fa-folder"></i><span>'+s+'</span><div class="fav-count">0</div><div class="folder-grip drg-hdl"><i class="fas fa-grip-lines"></i></div>',a.getElementsByClassName("fav-folder-new")[0]);t.parentElement.insertBefore(e,t),n.innerHTML="",document.dispatchEvent(new CustomEvent("clps-close",{cancelable:!0,detail:{el:c.getElementById("fav-folder-new")}}))}):e.target.closest("#DeleteFolderForm")&&(e.preventDefault(),l=c.getElementById("Folder_UserFavoriteFolderId").value,r=serialize(e.target),(i=new XMLHttpRequest).open("post",e.target.getAttribute("action")+"&"+r,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=c.getElementById("fav-folders").querySelector("div[folder-id][folder-id='"+l+"']");e.parentElement.removeChild(e),d()})},!1),c.addEventListener("dragEnd",function(e){if(void 0!==e.detail){var t,n,s,a,r=e.detail.el,i=e.detail.x,e=e.detail.y;if(r.classList.contains("fav-folder")){t=r.parentElement.querySelectorAll(".fav-folder:not(.fav-folder-new):not(.fav-show-all"),n=Array.from(t).sort(function(e,t){return getOffset(e).top-getOffset(t).top});var l=r.parentElement.getElementsByClassName("fav-folder-new")[0];for(s=0;s<n.length;s++)l.parentElement.insertBefore(n[s],l);!function(){var e,t,n=[],s=c.querySelectorAll("#fav-folders .fav-folder:not(.drag-source)");for(e=0;e<s.length;e++){var a;s[e].hasAttribute("folder-id")&&((a={}).FolderId=s[e].getAttribute("folder-id"),a.FolderRank=e+1,n.push(a))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFolders",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}else if(r.classList.contains("fav"))if((t=u(r,i,e))&&null!==t){t.hasAttribute("folder-id")&&t.getAttribute("folder-id");{i=r.getAttribute("fav-id");e=t.getAttribute("folder-id");var o={};o.FavoriteId=i,o.FolderId=e,(i=new XMLHttpRequest).open("post","/Users?handler=UpdateFavoriteFolder",!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(JSON.stringify(o))}r.setAttribute("folder-id",t.getAttribute("folder-id")),d(c.querySelector(".fav-folder.active"))}else{for(t=r.parentElement.getElementsByClassName("fav"),n=Array.from(t).sort(function(e,t){return getOffset(e).top-getOffset(t).top}),s=0;s<n.length;s++)r.parentElement.appendChild(n[s]);!function(){var e,t,n=[],s=c.querySelectorAll(".favs div[folder-id]:not(.drag-source)");for(e=0;e<s.length;e++){var a;s[e].hasAttribute("folder-id")&&((a={}).FavoriteId=s[e].getAttribute("fav-id"),a.FavoriteRank=e+1,n.push(a))}(t=new XMLHttpRequest).open("post","/Users?handler=ReorderFavorites",!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n))}()}for(r.style.transition="top 0.3s; left 0.3s;",r.style.top=0,r.style.left=0,s=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),a=0;a<s.length;a++)s[a].classList.remove("hover")}},!1),c.addEventListener("dragMove",function(e){if(void 0!==e.detail){for(var t=c.querySelectorAll("#fav-folders .fav-folder:not(.fav-folder-new)"),n=0;n<t.length;n++)t[n].classList.remove("hover");(e=u(e.detail.el,e.detail.x,e.detail.y))&&null!==e&&e.classList.add("hover")}},!1)}(),function(){function e(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-e.clientHeight-400<=(document.documentElement.clientHeight||c.documentElement.clientHeight)&&t.right-400-e.clientWidth<=(document.documentElement.clientWidth||c.documentElement.clientWidth)}var c=document,t=debounce(function(){[].forEach.call(c.querySelectorAll('[data-ajax="yes"]'),function(t){var n,s,a,r,i;t.matches("#AdColOne")||t.matches('#AdColTwo [data-ajax="yes"]')||!e(t)||(n=t.getAttribute("data-url"),s=t.getAttribute("data-param"),a=t.getAttribute("data-loadtag"),r=t.getAttribute("id"),t.removeAttribute("data-ajax"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==s&&""!==s&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=s),cache.exists(n)?l(t,a,s,cache.get(n),n,r):((i=new XMLHttpRequest).open("get",n,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=null!=i.getResponseHeader("Cache-Control")?(i.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;l(t,a,s,i.responseText,n,r),(t.hasAttribute("cache")||e)&&cache.set(n,i.responseText,e)}))})},250),l=function(e,t,n,s,a,r){if(null!=e)try{if(e.style.opacity=0,!e.parentNode)return;var i=c.createElement("div");i.innerHTML=s,null!==t&&""!==t?(i=i.querySelector(t)).setAttribute("data-loadtag",t):i=i.children[0],r&&i.setAttribute("id",r),i.style.visibility="hidden",i.style.transition="visibility 0.3s ease-in-out",i.clientHeight;if(i.setAttribute("data-url",a),i.setAttribute("data-param",n),e.parentNode.replaceChild(i,e),i.querySelector('script:not([type="application/json"])'))for(var l=Array.prototype.slice.call(i.querySelectorAll('script:not([type="application/json"])')),o=0;o<l.length;o++){var d=c.createElement("script");d.innerHTML=l[o].innerHTML,d.type="text/javascript",d.setAttribute("async","true"),i.appendChild(d),l[o].parentNode.removeChild(l[o])}i.style.visibility="visible",c.dispatchEvent(new CustomEvent("ajax"))}catch(e){console.log(e)}},n=debounce(function(){[].forEach.call(c.querySelectorAll('#AdColOne, #AdColTwo [data-ajax="yes"]'),function(t){var n,s,a,r,i;e(t)&&(n=t.getAttribute("data-url"),s=t.getAttribute("data-param"),a=t.getAttribute("data-loadtag"),r=t.getAttribute("id"),t.classList.contains("no-loader")||(t.innerHTML='<div class="ajaxLoader"><img class="ajaxLoader-img" src="/img/loader.gif" /></div>'),null!==s&&""!==s&&(-1!=n.indexOf("?")?n+="&":n+="?",n+=s),t.style.visibility="hidden",cache.exists(n)?l(t,a,s,cache.get(n),n,r):((i=new XMLHttpRequest).open("get",n,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){var e=null!=i.getResponseHeader("Cache-Control")?(i.getResponseHeader("Cache-Control").match(/\d+/)||[null])[0]:null;l(t,a,s,i.responseText,n,r),(t.hasAttribute("cache")||e)&&cache.set(n,i.responseText,e)}))})},250),s=debounce(function(){var t,e=c.getElementsByClassName("favs-cntr");[].forEach.call(e,function(e){(t=new XMLHttpRequest).open("get",e.getAttribute("data-url"),!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){l(e,null,null,t.responseText,e.getAttribute("data-url"))}})},250);t(),n(),c.addEventListener("load-ajax-content",function(){t(),n()}),c.addEventListener("reload-favs",function(){s()}),c.addEventListener("scroll",function(){t(),n()},{passive:!0})}(),document.addEventListener("click",function(e){e.target.matches(".message-close")&&e.target.parentElement.matches(".message-wrapper")&&e.target.parentElement.classList.add("hidden")}),document.addEventListener("show-message",function(e){void 0!==e.detail&&e.detail&&e.detail.value&&ShowMessageBox(e.detail.value)},!1),function(){document.execCommand("defaultParagraphSeparator",!1,"div");function m(){var e=document.createElement("div");null!==n&&n.abort(),(n=new XMLHttpRequest).open("post","/mail?handler=CheckForMail",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n.onload=function(){e.innerHTML=n.responseText,a(e)}}function a(e){var t,n=f.getElementsByClassName("mail-unread-cnt"),s=f.getElementsByClassName("mail-all-cnt"),a=0,r=e.querySelector("#unread_message_count").innerHTML,c=e.querySelector("#total_message_count").innerHTML,i=e.querySelector("#draft_message_count").innerHTML,l=e.querySelector("#new_message_alerts");for(f.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt")&&(f.querySelector("#mlbx-fldrsDrafts .mail-draft-cnt").innerHTML=0<i?i:"");a<n.length;a++)0<r?(n[a].style.display="inline-block",n[a].innerHTML=r):(n[a].style.display="none",n[a].innerHTML="");for(;a<s.length;a++)s[a].innerHTML=c;if(0<l.innerHTML.length&&((t=document.getElementsByClassName("mail-notification-container")[0]).innerHTML=l.innerHTML,t.style.transition="margin-right .5s",t.style.marginRight="500px",t.clientWidth,setTimeout(function(){t.style.marginRight="0px"},5e3)),null!==f.querySelector("#mlbx-fldrsInbox.active")){var o=document.createElement("div");if(o.innerHTML=e.querySelector("#new_message_previews").innerHTML,0<o.innerHTML.length)for(var d,u=Array.prototype.slice.call(f.querySelectorAll(".mlbx-msgsMsg[data-rep-id]")),a=0;a<u.length;a++)null!==(d=o.querySelector('.mlbx-msgsMsg[data-rep-id="'+u[a].getAttribute("data-rep-id")+'"]'))&&(d.parentElement.removeChild(d.nextElementSibling),d.parentElement.removeChild(d));o.querySelector(".mlbx-msgsMsg.active")&&o.querySelector(".mlbx-msgsMsg.active").classList.remove("active"),0<f.querySelector(".mlbx-msgs .ss-content").children.length?f.querySelector(".mlbx-msgs .ss-content").children[0].insertAdjacentHTML("beforebegin",o.innerHTML):f.querySelector(".mlbx-msgs .ss-content").innerHTML=o.innerHTML}}function i(t,n){f.getElementsByClassName("mlbx-rdr")[0].innerHTML="",null!==s&&s.abort(),s=new XMLHttpRequest,null!==t&&s.open("get","mail?handler=Messages&folder="+t,!0),null!=n&&s.open("get","mail?handler=Messages?folderId="+n,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){var e=f.getElementsByClassName("mlbx-msgsScroll")[0];e.classList.remove("ss-container"),e.innerHTML=s.responseText,document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:e}})),"inbox"==t||"deleted"==t||"sent"==t||null!=n?f.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")&&l(f.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-rep-id")):"drafts"==t&&(f.querySelector(".mlbx-msgs .mlbx-msgsMsg.active")?p(f.querySelector(".mlbx-msgs .mlbx-msgsMsg.active").getAttribute("data-draft-id")):h())}}function p(n){d=null,s&&s.abort(),(s=new XMLHttpRequest).open("get","mail?handler=DraftDetails&id="+n,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){var e=f.createElement("div"),t=(e.innerHTML=s.responseText,f.createElement("input"));t.setAttribute("name","draftId"),t.setAttribute("value",n),t.style.display="none",e.querySelector("form").appendChild(t),f.getElementsByClassName("mlbx-rdr")[0].innerHTML=e.getElementsByClassName("mlbx-newMsg")[0].outerHTML,document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:f.querySelector("#new_msg_dynamic-dropdown")}})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:f.querySelector(".mlbx-rdr .mlbx-newMsg")}})),f.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("input",function(e){c(this)}),f.querySelector(".mlbx-newMsg form.mlbx-newMsgForm").addEventListener("change",function(e){c(this)})}}function v(e){q=new XMLHttpRequest,q.open("post","mail?handler=MarkMessageRead&id="+e,!0),q.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),q.setRequestHeader("X-Requested-With","XMLHttpRequest"),q.send()}function h(e,t,n,s){d=null;for(var a=f.querySelectorAll(".mlbx-msgsMsg.active.unread"),r=0;r<a.length;r++)a[r].classList.remove("unread"),v(a[r].getAttribute("data-rep-id"));f.querySelector(".mlbx-msgsMsg.active")&&f.querySelector(".mlbx-msgsMsg.active").classList.remove("active");var i,l,o=f.getElementsByClassName("mlbx-rdr")[0];o.innerHTML="",o.appendChild(f.querySelector(".new_message_template .mlbx-newMsg").cloneNode(!0)),o.querySelector("form.mlbx-newMsgForm").addEventListener("input",function(e){c(this)}),o.querySelector("form.mlbx-newMsgForm").addEventListener("change",function(e){c(this)}),document.dispatchEvent(new CustomEvent("dropdown",{cancelable:!0,detail:{el:o.querySelector("#new_msg_dynamic-dropdown")}})),void 0!==s&&(o.querySelector("#convid").value=s),void 0!==t&&(o.querySelector(".mlbx-newMsgSubjIpt").innerHTML=t),void 0!==n&&(o.querySelector(".mlbx-newMsgMsg").innerHTML=n.innerHTML),void 0!==e&&null!=e&&(i=o.querySelector(".dd-cntr .dd-wrp"),l=o.querySelector(".dd-cntr select.dd-hdn"),e.forEach(function(e){l.innerHTML+='<option selected="selected" class="'+e[2]+'" value="'+e[0]+'">'+e[1]+"</option>",i.children[0].insertAdjacentHTML("beforebegin",'<div class="dd-itm '+e[2]+'">'+e[1]+"</div>")})),document.dispatchEvent(new CustomEvent("ss-load",{cancelable:!0,detail:{el:o.querySelector(".mlbx-newMsg")}}))}function l(e){f.getElementsByClassName("mlbx-rdr")[0]&&(s&&s.abort(),(s=new XMLHttpRequest).open("get","mail?handler=MessageDetails&id="+e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(),s.onload=function(){f.getElementsByClassName("mlbx-rdr")[0]&&(f.getElementsByClassName("mlbx-rdr")[0].innerHTML=s.responseText),document.dispatchEvent(new CustomEvent("ss-load"))})}var f=document,n=null,s=null,d=null,o=null,u=null,c=function(t){var e;null!==d&&t.querySelector('input[name="draftId')&&d.abort(),null!==d&&!t.querySelector('input[name="draftId')||(e={To:t.querySelector(".dd-cntr .dd-hdn").innerHTML,Subject:t.querySelector(".mlbx-newMsgSubjIpt").innerHTML,Message:t.querySelector(".mlbx-newMsgMsg").innerHTML,Text:t.querySelector(".mlbx-newMsgMsgBx").innerText.replace(/\n/g," "),MsgId:null,ConvId:null},t.querySelector('input[name="draftId')&&(e.DraftId=t.querySelector('input[name="draftId').getAttribute("value")),(d=new XMLHttpRequest).open("post","mail?handler=SaveDraft",!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(JSON.stringify(e)),d.onload=function(){var e;null==t.querySelector('input[name="draftId')&&((e=f.createElement("input")).setAttribute("name","draftId"),e.setAttribute("value",d.responseText),e.style.display="none",t.appendChild(e))})};setInterval(function(){void 0!==window.ajaxOn&&1!=window.ajaxOn||m()},1e4),document.addEventListener("loadMessage",function(e){void 0!==e.detail&&l(e.detail.id)}),f.addEventListener("click",function(e){var t,n;if(e.target.closest(".mlbx-msgsMsg")){for(var s=e.target.closest(".mlbx-msgsMsg"),a=f.querySelectorAll(".mlbx-msgsMsg.active:not(.deleted"),r=0;r<a.length;r++)a[r].classList.remove("active"),f.querySelector("#mlbx-fldrsInbox.active")&&a[r].classList.contains("unread")&&(a[r].classList.remove("unread"),v(a[r].getAttribute("data-rep-id")));s.classList.add("active"),f.querySelector("#mlbx-fldrsInbox.active")&&s.classList.contains("unread")&&(s.classList.remove("unread"),v(s.getAttribute("data-rep-id"))),f.querySelector("#mlbx-fldrsDrafts.active")?p(s.getAttribute("data-draft-id")):l(s.getAttribute("data-rep-id")),m()}else e.target.closest(".mail-new-message")?(s=e.target.closest(".mail-new-message").getAttribute("data-from"),n=e.target.closest(".mail-new-message").getAttribute("data-fromid"),s&&n?h([[fromid,s]]):h()):e.target.closest(".mlbx-usrDrp")?(e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").style.display="block",e.target.closest(".mlbx-usrDrp").querySelector(".mlbx-usrDrpCtr").addEventListener("mouseleave",function e(t){this.style.removeProperty("display"),this.removeEventListener("mouseleave",e,!1)})):e.target.closest("#mlbx-fldrsDrafts")?(i("drafts"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDrafts").classList.add("active")):e.target.closest("#mlbx-fldrsInbox")?(i("inbox"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsInbox").classList.add("active")):e.target.closest("#mlbx-fldrsSent")?(i("sent"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsSent").classList.add("active")):e.target.closest("#mlbx-fldrsDeleted")?(i("deleted"),document.querySelector(".mlbx-fldrsFldr.active").classList.remove("active"),e.target.closest("#mlbx-fldrsDeleted").classList.add("active")):!e.target.closest(".mail-delete-message")||null!=(t=f.querySelector(".mlbx-msgsMsg.active:not(.deleted)"))&&(n=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}if(n=e.previousElementSibling,!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(t,".mlbx-msgsMsg"),t.hasAttribute("data-draft-id")?((o=new XMLHttpRequest).open("post","mail?handler=DeleteDraft&id="+t.getAttribute("data-draft-id"),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(),void 0!==n?(p(n.getAttribute("data-draft-id")),n.classList.add("active")):f.querySelector(".mlbx-rdr").innerHTML=""):t.hasAttribute("data-rep-id")&&((o=new XMLHttpRequest).open("post","mail?handler=DeleteMessage&id="+t.getAttribute("data-rep-id"),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(),void 0!==n?(l(n.getAttribute("data-rep-id")),n.classList.add("active")):f.querySelector(".mlbx-rdr").innerHTML=""),e=parseFloat(t.clientWidth),n=parseFloat(t.clientHeight),t.style.transition="margin-left 150ms, margin-right 150ms, margin-top 150ms",t.style.zIndex="-1",t.clientHeight,t.style.marginLeft=-e+"px",t.style.marginRight=e+"px",t.style.marginTop=-n+"px",t.classList.add("deleted"),setTimeout(function(){null!==t&&(t.parentElement.removeChild(t.nextElementSibling),t.parentElement.removeChild(t))},150))}),f.addEventListener("submit",function(e){if(e.target.closest(".mlbx-newMsgForm")){e.preventDefault();for(var e=e.target.closest(".mlbx-newMsgForm"),t=[],n=e.querySelectorAll(".mlbx-newMsgRecip select option"),s=0;s<n.length;s++){var a=n[s].classList.contains("group")?"g":"";t.push({UserId:n[s].value,Type:a})}var r=e.querySelector(".mlbx-newMsgSubjIpt").innerText,i=e.querySelector(".mlbx-newMsgMsg").innerHTML,l=e.querySelector(".mlbx-newMsgMsg").innerText.replace(/\n/g," "),o=e.querySelector(".mlbx-share")?"1":"0",d=e.querySelector(".mlbx-shareName")?e.querySelector(".mlbx-shareName").value:"",c=e.querySelector(".mlbx-shareUrl")?e.querySelector(".mlbx-shareUrl").value:"",r={To:JSON.stringify(t),Subject:r,Message:i,Text:l,Share:o,ShareName:d,ShareUrl:c};null!==e.querySelector('input[name="draftId"]')&&(i=e.querySelector('input[name="draftId"]').value,r.DraftId=i,f.querySelector('.mlbx-msgsMsg[data-draft-id="'+i+'"]')&&f.querySelector('.mlbx-msgsMsg[data-draft-id="'+i+'"]').parentElement.removeChild(f.querySelector('.mlbx-msgsMsg[data-draft-id="'+i+'"]'))),(u=new XMLHttpRequest).open("post",e.getAttribute("action"),!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(JSON.stringify(r)),u.onload=function(){m()},document.dispatchEvent(new CustomEvent("show-message",{cancelable:!0,detail:{value:"Messages sent! ¯\\_(ツ)_/¯"}})),null!==f.querySelector(".mlbx-rdr")&&(f.querySelector(".mlbx-rdr").innerHTML=""),f.dispatchEvent(new CustomEvent("modal-close"))}},!1),f.addEventListener("click",function(u){var e,n,s,a,r,i,l,o,d;if(u.target.closest(".mail-reply")&&null!==f.querySelector("#mlbx-fldrsInbox.active")){for(n=(e=f.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),s="Re: "+e.querySelector(".mailbox-subject").innerText,r=[[(a=e.querySelector("div.mailbox-sender-user")).getAttribute("data-user-id"),a.querySelector("span").innerText,""]],l=document.createElement("div"),(o=document.createElement("div")).classList.add("message-reply"),o.innerHTML=f.querySelector(".mlbx-rdr .ss-content").innerHTML,o.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(o.querySelector(".mlbx-rdrHead-controls")),d=o.querySelectorAll(".mlbx-usrDrp"),i=0;i<d.length;i++)d[i].parentElement.removeChild(d[i]);l.innerHTML="<br><br><br>",l.appendChild(o),h(r,s,l,n)}else if(u.target.closest(".mail-reply-all")&&null!==f.querySelector("#mlbx-fldrsInbox.active")){for(n=(e=f.querySelector(".mlbx-rdrHead")).getAttribute("data-conv-id"),s="Re: "+e.querySelector(".mailbox-subject").innerText,a=e.querySelectorAll("div.mailbox-sender-user"),t=e.querySelectorAll("div.mailbox-to-user"),r=[],i=0;i<a.length;i++)r.push([a[i].getAttribute("data-user-id"),a[i].querySelector("span").innerText,a[i].classList.contains("group")?"group":""]);for(i=0;i<t.length;i++)r.push([t[i].getAttribute("data-user-id"),t[i].querySelector("span").innerText,t[i].classList.contains("group")?"group":""]);for(var m={},p=[],c=0;c<r.length;c++)r[c]in m||(p.push(r[c]),m[r[c]]=!0);for(r=p,l=document.createElement("div"),(o=document.createElement("div")).classList.add("message-reply"),o.innerHTML=f.querySelector(".mlbx-rdr .ss-content").innerHTML,o.querySelector(".mlbx-rdrHead-controls").parentElement.removeChild(o.querySelector(".mlbx-rdrHead-controls")),d=o.querySelectorAll(".mlbx-usrDrp"),i=0;i<d.length;i++)d[i].parentElement.removeChild(d[i]);l.innerHTML="<br><br><br>",l.appendChild(o),h(r,s,l,n)}})}(),function(){window.ajaxOn=!0;function n(e){var t={},n=navigator,s=window,a=document,r=s.location;return t.appCodeName=n.appCodeName,t.appName=n.appName,t.appVersion=n.appVersion,t.cookieEnabled=n.cookieEnabled,t.language=n.language,t.oscpu=n.oscpu,t.platform=n.platform,t.userAgent=n.userAgent,t.host=r.host,t.hostname=r.hostname,t.href=r.href,t.protocol=r.protocol,t.search=r.search,t.pathname=r.pathname,t.hash=r.hash,t.screenHeight=a.documentElement.clientHeight,t.screenWidth=a.documentElement.clientWidth,t.origin=s.origin,t.title=a.title,t.referrer=a.referrer,t.loadTime=e||s.performance.timing.domContentLoadedEventEnd-s.performance.timing.navigationStart,t.zoom=s.devicePixelRatio,t.sessionId=l(),t.pageId=o(),t.pageTime=(new Date).getTime()-i.getTime(),t}function t(e,t){"newpage"==t&&(o("reset"),window.ajaxOn=!0),!0===window.ajaxOn&&(navigator.sendBeacon?navigator.sendBeacon("/analytics?handler=Beacon",JSON.stringify(n(e))):((t=new XMLHttpRequest).open("post","/analytics?handler=Beacon",!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(n(e))))),c()}function e(){debounce((window.clearTimeout(a),d(),void(window.ajaxOn=!0)),500)}function s(){document.addEventListener("mousemove",e,!1),document.addEventListener("mousedown",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("touchmove",e,!1),document.addEventListener("scroll",e,{passive:!0},!1),d()}function c(){window.clearTimeout(r),m()}var a,r,i=new Date,l=function(e){return"clear"==e?(sessionStorage.removeItem("_sid"),!1):("reset"!=e&&void 0!==sessionStorage._sid||(sessionStorage._sid=btoa((new Date).toString()),o("reset"),i=new Date),sessionStorage._sid)},o=function(e){return"reset"!=e&&void 0!==sessionStorage._pid||(i=new Date,sessionStorage._pid=btoa((new Date).toString())),sessionStorage._pid},d=function(){a=window.setTimeout(u,12e4),l()},u=function(){window.ajaxOn=!1,l("clear"),sessionStorage.clear()},m=function(){r=window.setTimeout(t,3e4)};"complete"==document.readyState&&(s(),t()),window.addEventListener("load",function(){s(),t()},!1),document.addEventListener("analytics-post",function(e){void 0!==e.detail&&t(e.detail.value,e.detail.type)})}();var $navbarBurgers=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);0<$navbarBurgers.length&&$navbarBurgers.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,e=document.getElementById(e);t.classList.toggle("is-active"),e.classList.toggle("is-active")})}),function(){function n(e){e.classList.remove("is-active")}function d(){(document.querySelectorAll(".mini")||[]).forEach(function(e){n(e)})}function c(e){for(var t=e.querySelectorAll('input[type="hidden"][name]:not(.drag)'),n=0;n<t.length;n++)t[n].setAttribute("name",t[n].getAttribute("name").replace(/\[\d*?\]/,"["+n+"]"))}function u(e,t,l,o){t=JSON.parse(t);if(0===t.length)e.innerHTML='<div class="mini-waiting">No matches found.</div>';else{e.innerText="";document.createElement("div");var n,s=_createForOfIteratorHelper(t);try{for(s.s();!(n=s.n()).done;){var a=n.value,r=document.createElement("a");r.classList.add("mini-item"),r.innerText=a.Name,r.setAttribute("value",a.ObjectId||a.Description),r.addEventListener("click",function(e){var t,n,s,a,r,i;o.classList.contains("multiselect")?o.classList.contains("multiselect")&&(t=o.closest(".field").parentNode.querySelector(".mini-tags"),(n=document.createElement("div")).classList.add("control"),(s=document.createElement("input")).setAttribute("type","hidden"),s.setAttribute("value",e.target.getAttribute("value")),o.hasAttribute("data-name")&&s.setAttribute("name",o.getAttribute("data-name")),(a=document.createElement("div")).classList.add("tags","has-addons"),(r=document.createElement("span")).classList.add("tag","is-link"),r.innerText=e.target.innerText,(i=document.createElement("a")).classList.add("tag","is-delete"),i.addEventListener("click",function(e){e.target;n.parentElement.removeChild(n),c(t)}),n.appendChild(a),a.appendChild(r),a.appendChild(s),a.appendChild(i),null!=t&&(t.appendChild(n),c(t)),o.value=""):(o.value=e.target.innerText,l.value=e.target.getAttribute("value"),d())}),e.appendChild(r)}}catch(e){s.e(e)}finally{s.f()}e.querySelectorAll(".mini-item:not(.hidden)").length<1&&(e.innerHTML+='<div class="mini-waiting">No matches found.</div>')}}var m=null;var p=null;(document.querySelectorAll(".mini-tags .tag.is-delete")||[]).forEach(function(s){s.addEventListener("click",function(e){var t=s.closest(".control"),n=s.closest(".mini-tags");t.parentElement.removeChild(t),c(n)})}),(document.querySelectorAll(".input-mini")||[]).forEach(function(r){var t,n,e,s,a,i=r.parentElement.querySelector(".mini"),l=r.parentElement.querySelector('input[type="hidden"], select.is-hidden'),o=r.parentElement.parentElement.querySelector(".mini-clear");r.addEventListener("click",function(){d(),i.classList.add("is-active")}),r.hasAttribute("search-area")?r.addEventListener("input",function(){window.clearTimeout(p),p=window.setTimeout(function(){var t,n,e,s,a;n=i,e=(t=r).getAttribute("search-area"),s=l,a=t.value,0<t.value.length?(null!==m&&m.abort(),(m=new XMLHttpRequest).open("post","/Search?handler="+e+"&s="+a,!0),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(),m.onload=function(){var e=m.responseText;u(n,e,s,t)}):n.innerHTML='<div class="mini-waiting">\n                    <span class="icon">\n                        <i class="fas fa-circle-notch fa-spin"></i>\n                    </span>\n                </div>',window.clearTimeout(p)},250)}):r.hasAttribute("lookup-area")&&(n=i,e=(t=r).getAttribute("lookup-area"),s=l,(a=new XMLHttpRequest).open("post","/Search?handler=ValueList&s="+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),a.onload=function(){var e=a.responseText;u(n,e,s,t)}),null!=o&&o.addEventListener("click",function(){l.value="",r.value=""})}),(document.querySelectorAll(".mini-background, .mini-close, .mini-card-head .delete, .mini-card-foot .button")||[]).forEach(function(e){var t=e.closest(".mini");e.addEventListener("click",function(){n(t)})}),window.onclick=function(e){e.target.closest(".mini,.input-mini")||d()},document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&d()}),(document.querySelectorAll(".mini-tags a.is-delete[value]")||[]).forEach(function(s){s.addEventListener("click",function(e){var t=s.closest(".field:not(.mini-tags)").querySelector("select.is-hidden"),n=s.closest(".control");t.removeChild(t.querySelector('option[value="'+s.getAttribute("value")+'"]')),n.parentNode.removeChild(n)})}),(document.querySelectorAll(".mini-tags.reorder")||[]).forEach(function(t){t.addEventListener("reorder",function(e){c(t)})})}();