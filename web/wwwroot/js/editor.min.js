"use strict";!function(){var e=0;function t(){50==e||("undefined"==typeof CodeMirror?setTimeout(function(){e++,t()},100):(e=0,function(){var e,t=Array.prototype.slice.call(document.querySelectorAll(".editor:not(.loaded)"));for(e=0;e<t.length;e++)new i(t[e])}()))}function i(e){this.mdrequest=null,this.target=e,this.target.classList.add("loaded"),this.editorInput=document.createElement("div"),this.editorInput.classList.add("liveEditor","box","p-0","pb-2"),this.editorBody=document.createElement("div"),this.editorBody.classList.add("liveEditor-body","p-2"),this.editorText=document.createElement("textarea"),this.editorText.classList.add("textarea");e="";0<this.target.getElementsByTagName("textarea").length&&(e=this.target.getElementsByTagName("textarea")[0].value,this.target.removeChild(this.target.getElementsByTagName("textarea")[0])),this.editorText.setAttribute("id",this.target.getAttribute("data-inputId")),this.editorText.setAttribute("name",this.target.getAttribute("data-inputName")),this.editorBody.appendChild(this.editorText),this.editorPrev=document.createElement("div"),this.editorPrev.classList.add("editor-liveEditorPrev","is-hidden","p-2"),this.editorPrevText=document.createElement("div"),this.editorPrev.appendChild(this.editorPrevText),this.btn=document.createElement("div"),this.btn.classList.add("liveEditor-btnGrp","has-background-white-ter","is-flex","is-justify-content-space-between"),this.btnLeft=document.createElement("span"),this.btnLeft.classList.add("is-flex"),this.btnRight=document.createElement("span"),this.btnRight.classList.add("is-flex"),this.btn.appendChild(this.btnLeft),this.btn.appendChild(this.btnRight),this.btnBold=document.createElement("button"),this.btnBold.classList.add("liveEditor-btn","button","is-light"),this.btnBold.setAttribute("type","button"),this.btnBold.innerHTML='<span class="icon"><i class="fas fa-bold"></i></span>',this.btnLeft.appendChild(this.btnBold),this.btnBold.addEventListener("click",this.insertBold.bind(this),!1),this.btnItalic=document.createElement("button"),this.btnItalic.classList.add("liveEditor-btn","button","is-light"),this.btnItalic.setAttribute("type","button"),this.btnItalic.innerHTML='<span class="icon"><i class="fas fa-italic"></i></span>',this.btnLeft.appendChild(this.btnItalic),this.btnItalic.addEventListener("click",this.insertItalics.bind(this),!1),this.btnHeading=document.createElement("button"),this.btnHeading.classList.add("liveEditor-btn","button","is-light"),this.btnHeading.setAttribute("type","button"),this.btnHeading.innerHTML='<span class="icon"><i class="fas fa-heading"></i></span>',this.btnLeft.appendChild(this.btnHeading),this.btnHeading.addEventListener("click",this.insertHeading.bind(this),!1),this.btnHeadingSep=document.createElement("span"),this.btnHeadingSep.classList.add("liveEditor-btnSep"),this.btnLeft.appendChild(this.btnHeadingSep),this.btnQuote=document.createElement("button"),this.btnQuote.classList.add("liveEditor-btn","button","is-light"),this.btnQuote.setAttribute("type","button"),this.btnQuote.innerHTML='<span class="icon"><i class="fas fa-quote-left"></i></span>',this.btnLeft.appendChild(this.btnQuote),this.btnQuote.addEventListener("click",this.insertQuote.bind(this),!1),this.btnCode=document.createElement("button"),this.btnCode.classList.add("liveEditor-btn","button","is-light"),this.btnCode.setAttribute("type","button"),this.btnCode.innerHTML='<span class="icon"><i class="fas fa-code"></i></span>',this.btnLeft.appendChild(this.btnCode),this.btnCode.addEventListener("click",this.insertCode.bind(this),!1),this.btnCodeSep=document.createElement("span"),this.btnCodeSep.classList.add("liveEditor-btnSep"),this.btnLeft.appendChild(this.btnCodeSep),this.btnUl=document.createElement("button"),this.btnUl.classList.add("liveEditor-btn","button","is-light"),this.btnUl.setAttribute("type","button"),this.btnUl.innerHTML='<span class="icon"><i class="fas fa-list-ul"></i></span>',this.btnLeft.appendChild(this.btnUl),this.btnUl.addEventListener("click",this.insertUl.bind(this),!1),this.btnOl=document.createElement("button"),this.btnOl.classList.add("liveEditor-btn","button","is-light"),this.btnOl.setAttribute("type","button"),this.btnOl.innerHTML='<span class="icon"><i class="fas fa-list-ol"></i></span>',this.btnLeft.appendChild(this.btnOl),this.btnOl.addEventListener("click",this.insertOl.bind(this),!1),this.btnOlSep=document.createElement("span"),this.btnOlSep.classList.add("liveEditor-btnSep"),this.btnLeft.appendChild(this.btnOlSep),this.btnLink=document.createElement("button"),this.btnLink.classList.add("liveEditor-btn","button","is-light"),this.btnLink.setAttribute("type","button"),this.btnLink.innerHTML='<span class="icon"><i class="fas fa-link"></i></span>',this.btnLeft.appendChild(this.btnLink),this.btnLink.addEventListener("click",this.insertLink.bind(this),!1),this.editorInput.appendChild(this.btn),this.target.getAttribute("data-saveUrl")&&(this.btnSave=document.createElement("button"),this.btnSave.classList.add("liveEditor-btn","button","is-light"),this.btnSave.classList.add("save"),this.btnSave.setAttribute("type","button"),this.btnSave.innerHTML='<span class="icon"><i class="fas fa-save"></i></span>',this.btnSave.addEventListener("click",this.save.bind(this),!1),this.btnRight.appendChild(this.btnSave),this.saveUrl=this.target.getAttribute("data-saveUrl")),this.editorPrevTitleButton=document.createElement("button"),this.editorPrevTitleButton.setAttribute("type","button"),this.editorPrevTitleButton.innerHTML='<span class="icon"><i class="fas fa-eye"></i></span>',this.editorPrevTitleButton.classList.add("liveEditor-btn","button","is-light"),this.editorPrevTitleButton.classList.add("save"),this.btnRight.appendChild(this.editorPrevTitleButton),this.editorInput.appendChild(this.editorBody),this.target.appendChild(this.editorInput),this.editorInput.appendChild(this.editorPrev),this.mirror=CodeMirror.fromTextArea(this.editorText,{mode:"gfm",autoRefresh:!0,viewportMargin:1/0,lineWrapping:!0}),this.mirror.setValue(e),this.mirror.getInputField().spellcheck=!0,this.md=window.markdownit({html:!0,linkify:!0,typographer:!0}),this.editorPrevTitleButton.addEventListener("click",this.updateMirror.bind(this),!1),this.target.closest(".mdl")&&this.target.closest(".mdl").addEventListener("mdl-open",this.updateMirror.bind(this))}var r=document.requestAnimationFrame||document.setImmediate||function(e){return setTimeout(e,0)};i.prototype={updateMirror:function(e){var t=this,i=this.md,n=this.editorPrevTitleButton;r(function(){var e=n.querySelector("i.fas");e.classList.contains("fa-eye")?(t.editorPrevText.innerHTML=i.render(t.mirror.getValue()),e.classList.remove("fa-eye"),e.classList.add("fa-eye-slash"),t.editorPrev.classList.remove("is-hidden"),t.editorBody.classList.add("is-hidden"),(t.btnLeft.querySelectorAll("button")||[]).forEach(function(e){e.setAttribute("disabled","disabled")}),document.dispatchEvent(new CustomEvent("code-highlight")),document.dispatchEvent(new CustomEvent("load-charts"))):(e.classList.remove("fa-eye-slash"),e.classList.add("fa-eye"),t.editorPrev.classList.add("is-hidden"),(t.btnLeft.querySelectorAll("button")||[]).forEach(function(e){e.removeAttribute("disabled")}),t.editorBody.classList.remove("is-hidden"))})},insertBold:function(e){var i=this;r(function(){var e=i.mirror.findWordAt(i.mirror.getCursor()),t=i.mirror.getSelection().trim();0<i.mirror.getSelection().length?i.mirror.replaceSelection("**"+i.mirror.getSelection().trim()+"**"):(i.mirror.setSelection(e.anchor,e.head),i.mirror.replaceSelection("**"+(t=""==t?"bold text":t)+"**")),i.mirror.focus()})},insertItalics:function(e){var i=this;r(function(){var e=i.mirror.findWordAt(i.mirror.getCursor()),t=i.mirror.getSelection().trim();0<i.mirror.getSelection().length?i.mirror.replaceSelection("*"+i.mirror.getSelection().trim()+"*"):(i.mirror.setSelection(e.anchor,e.head),i.mirror.replaceSelection("*"+(t=""==t?"italic text":t)+"*")),i.mirror.focus()})},insertHeading:function(e){var n=this;r(function(){var e=n.mirror.getCursor().line,t=n.mirror.getLine(e),i=t.split(" ")[0];""==t?n.mirror.replaceRange("# Heading",{line:e,ch:0}):"#"!=i[0]?n.mirror.replaceRange("# ",{line:e,ch:0}):6<=(i.match(/#/g)||[]).length?n.mirror.replaceRange(t.substring(t.indexOf(" ")+1),{line:e,ch:0},{line:e,ch:t.length}):n.mirror.replaceRange("#",{line:e,ch:0}),n.mirror.focus()})},insertQuote:function(e){var i=this;r(function(){var e=i.mirror.findWordAt(i.mirror.getCursor()),t=i.mirror.getSelection().trim();0<i.mirror.getSelection().length?(i.mirror.setSelection({line:Math.min(i.mirror.listSelections()[0].head.line,i.mirror.listSelections()[0].anchor.line),ch:0},{line:Math.max(i.mirror.listSelections()[0].head.line,i.mirror.listSelections()[0].anchor.line),ch:1}),i.mirror.replaceSelection("> "+i.mirror.getSelection().replace(/\n/g,function(){return"\n> "}))):(i.mirror.setSelection({line:Math.min(e.head.line,e.anchor.line),ch:0},{line:Math.max(e.head.line,e.anchor.line),ch:1}),""==t?i.mirror.replaceSelection("> fancy blockquote"):i.mirror.replaceSelection("> "+t)),i.mirror.focus()})},insertCode:function(e){var i=this;r(function(){var e=i.mirror.findWordAt(i.mirror.getCursor()),t=i.mirror.getSelection().trim();0<i.mirror.getSelection().length?i.mirror.replaceSelection("\n```sql\n"+i.mirror.getSelection()+"\n```\n"):(i.mirror.setSelection(e.anchor,e.head),""==t?i.mirror.replaceSelection("\n```sql\nselect smiles; -- :) --\n```\n"):i.mirror.replaceSelection("`"+t+"`")),i.mirror.focus()})},insertUl:function(e){var i=this;r(function(){var e=i.mirror.findWordAt(i.mirror.getCursor()),t=i.mirror.getSelection().trim();0<i.mirror.getSelection().length?(i.mirror.setSelection({line:Math.min(i.mirror.listSelections()[0].head.line,i.mirror.listSelections()[0].anchor.line),ch:0},{line:Math.max(i.mirror.listSelections()[0].head.line,i.mirror.listSelections()[0].anchor.line),ch:1}),i.mirror.replaceSelection("- "+i.mirror.getSelection().replace(/\n/g,function(){return"\n- "}))):(i.mirror.setSelection({line:Math.min(e.head.line,e.anchor.line),ch:0},{line:Math.max(e.head.line,e.anchor.line),ch:1}),""==t?i.mirror.replaceSelection("- item one\n- item two\n- item three"):i.mirror.replaceSelection("- "+t)),i.mirror.focus()})},insertOl:function(e){var n=this;r(function(){var e,t=n.mirror.findWordAt(n.mirror.getCursor()),i=n.mirror.getSelection().trim();0<n.mirror.getSelection().length?(n.mirror.setSelection({line:Math.min(n.mirror.listSelections()[0].head.line,n.mirror.listSelections()[0].anchor.line),ch:0},{line:Math.max(n.mirror.listSelections()[0].head.line,n.mirror.listSelections()[0].anchor.line),ch:1}),e=1,n.mirror.replaceSelection(e+". "+n.mirror.getSelection().replace(/\n/g,function(){return"\n"+ ++e+". "}))):(n.mirror.setSelection({line:Math.min(t.head.line,t.anchor.line),ch:0},{line:Math.max(t.head.line,t.anchor.line),ch:1}),""==i?n.mirror.replaceSelection("1. item one\n2. item two\n3. item three"):n.mirror.replaceSelection("1. "+i)),n.mirror.focus()})},insertLink:function(e){var t=this;r(function(){0<t.mirror.getSelection().length?t.mirror.replaceSelection("["+t.mirror.getSelection().trim()+"](https://atlas)"):t.mirror.replaceSelection("[Link Title](https://atlas)"),t.mirror.focus()})},save:function(e){var i=this;r(function(){var e={};e.id=getUrlVars().id,e.description=i.mirror.getValue();var t=new XMLHttpRequest;t.open("post",i.saveUrl,!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(JSON.stringify(e)),t.onload=function(e){document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)}})}},t(),document.addEventListener("ajax",function(){t()})}(),function(){function e(){for(var e=i.querySelectorAll(".form-check:not(.loaded)"),t=0;t<e.length;t++)!function(e){e.classList.add("loaded");var t=e.querySelector("#editModal input[type=checkbox]"),i=e.querySelector("#editModal input[type=hidden");t&&i&&(t.checked="Y"==i.value,t.addEventListener("change",function(e){i.value=t.checked?"Y":"N"}))}(e[t])}var i=document;e(),i.addEventListener("ajax",function(){e()})}(),function(){var r=document;null!=r.getElementById("report-edit-details-form")&&r.getElementById("report-edit-details-form").addEventListener("submit",function(e){e.preventDefault();var t=e.target,e=new XMLHttpRequest;e.open("post",t.getAttribute("action")+"&"+serialize(t),!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(),e.onload=function(){r.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){r.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)}}),null!=r.getElementById("report-edit-new-maintenance")&&r.getElementById("report-edit-new-maintenance").addEventListener("submit",function(e){e.preventDefault();var t=e.target,e=new XMLHttpRequest;e.open("post",t.getAttribute("action")+"&"+serialize(t),!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(),e.onload=function(){r.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){r.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)}}),null!=r.querySelector("#editModal")&&r.querySelector("#editModal").addEventListener("submit",function(e){var t,i;(e.target.closest("#report-edit-new-meticket")||e.target.closest("#report-editor-remove-meticket-form"))&&(e.preventDefault(),t=e.target.closest("#report-edit-new-meticket")||e.target.closest("#report-editor-remove-meticket-form"),(i=new XMLHttpRequest).open("post",t.getAttribute("action")+"&"+serialize(t),!0),i.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i.onload=function(){r.getElementById("report-editor-metickets-container").innerHTML=i.responseText,t.reset()})}),null!=r.querySelector("#editModal")&&(r.querySelector("#editModal").addEventListener("change",function(e){var t;!e.target.matches("#report-add-image-input")||""==e.target.closest("#report-add-image-input").value||""!=(t=e.target.closest("form")).querySelector('[name="Id"]').value.value&&(q=new XMLHttpRequest,q.open("post",t.getAttribute("action"),!0),q.withCredentials=!0,q.setRequestHeader("X-Requested-With","XMLHttpRequest"),q.send(new FormData(t)),q.upload.addEventListener("progress",function(e){r.dispatchEvent(new CustomEvent("progress-start"))}),q.onload=function(){t.closest(".editorImg-img").insertAdjacentHTML("beforebegin",q.responseText),e.target.closest("#report-add-image-input").setAttribute("value",""),e.target.closest("#report-add-image-input").value=null})}),r.querySelector("#editModal").addEventListener("submit",function(e){var t,i,n;e.target.closest(".report-remove-image")&&(e.preventDefault(),i=(t=e.target.closest(".editorImg-img")).querySelector('[name="Id"]').value,e=t.querySelector('[name="ImgId"]').value,(n={}).Id=i,n.ImgId=e,e=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),q=new XMLHttpRequest,q.open("post","reports?handler=RemoveImage&"+e,!0),q.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),q.setRequestHeader("X-Requested-With","XMLHttpRequest"),q.send(),q.onload=function(){t.parentElement.removeChild(t)})}),r.querySelector("#editModal").addEventListener("change",function(e){var t;e.target.closest("#NewTermLink_TermId")&&(e=e.target.closest("#NewTermLink_TermId"),(t=new XMLHttpRequest).open("post","/Reports?handler=CurrentTermDetails&TermId="+e.getAttribute("value"),!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){t.responseText&&(data=JSON.parse(t.responseText),r.getElementsByClassName("new-term-summary")[0].innerHTML='<div class="markdown noleft">'+data.summary||"n/a</div>",r.getElementsByClassName("new-term-def")[0].innerHTML='<div class="markdown noleft">'+data.technicalDefinition||"n/a</div>",r.dispatchEvent(new CustomEvent("code-highlight")))})}),r.querySelector("#editModal").addEventListener("submit",function(e){var t,i,n=r.getElementById("report-editor-currentterms-container");(e.target.closest("#report-editor-remove-term-form")||e.target.closest("#report-editor-add-term-form")||e.target.closest("#report-editor-add-new-term-form"))&&(e.preventDefault(),(e=e.target.closest("#report-editor-remove-term-form")||e.target.closest("#report-editor-add-term-form")||e.target.closest("#report-editor-add-new-term-form")).getAttribute("action"),(t=new XMLHttpRequest).open("post",e.getAttribute("action")+"&"+serialize(e),!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,r.dispatchEvent(new CustomEvent("code-highlight"))),r.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){r.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)},e.reset(),r.getElementsByClassName("new-term-summary")[0].innerHTML="",r.getElementsByClassName("new-term-def")[0].innerHTML="")}),document.querySelector("#editModal").addEventListener("click",function(e){var t,i,n=document.getElementById("report-editor-currentcollections-container");e.target.closest("#report-editor-remove-collection-form")&&(e.preventDefault(),e=e.target.closest("#report-editor-remove-collection-form").getAttribute("href"),(t=new XMLHttpRequest).open("get",e,!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,document.dispatchEvent(new CustomEvent("ajax"))),document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)})}),r.querySelector("#editModal").addEventListener("submit",function(e){var t,i,n=r.getElementById("report-editor-currentcollections-container");(e.target.closest("#report-editor-add-new-collection-form")||e.target.closest("#report-editor-edit-collection-form"))&&(e.preventDefault(),(e=e.target.closest("#report-editor-add-new-collection-form")||e.target.closest("#report-editor-edit-collection-form")).getAttribute("action"),(t=new XMLHttpRequest).open("post",e.getAttribute("action")+"&"+serialize(e),!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,r.dispatchEvent(new CustomEvent("ajax"))),r.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){r.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)},e.reset())}))}(),null!==document.querySelector("#editModal")&&(document.querySelector("#editModal").addEventListener("click",function(e){var t,i,n=document.getElementById("collection-editor-currentterms-container");e.target.closest("#collection-editor-remove-term-form")&&(e.preventDefault(),e=e.target.closest("#collection-editor-remove-term-form").getAttribute("href"),(t=new XMLHttpRequest).open("get",e,!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,document.dispatchEvent(new CustomEvent("code-highlight"))),document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)})}),document.querySelector("#editModal").addEventListener("click",function(e){var t,i,n=document.getElementById("collection-editor-currentreports-container");e.target.closest("#collection-editor-remove-report-form")&&(e.preventDefault(),e=e.target.closest("#collection-editor-remove-report-form").getAttribute("href"),(t=new XMLHttpRequest).open("get",e,!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,document.dispatchEvent(new CustomEvent("code-highlight"))),document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750)})}),document.querySelector("#editModal").addEventListener("submit",function(e){var t,i,n=document.getElementById("collection-editor-currentterms-container");(e.target.closest("#collection-editor-edit-term-form")||e.target.closest("#collection-editor-add-term-form"))&&(e.preventDefault(),(e=e.target.closest("#collection-editor-edit-term-form")||e.target.closest("#collection-editor-add-term-form")).getAttribute("action"),(t=new XMLHttpRequest).open("post",e.getAttribute("action")+"&"+serialize(e),!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,document.dispatchEvent(new CustomEvent("code-highlight"))),document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750),document.dispatchEvent(new CustomEvent("ajax")),document.querySelector("#editModal").dispatchEvent(new CustomEvent("mdl-open"))},e.reset(),e.querySelector(".dd-vsbl").value="",e.querySelector("#DpTermAnnotation_Rank").value="",e.querySelector(".CodeMirror")&&e.querySelector(".CodeMirror").CodeMirror.getDoc().setValue(""))}),document.querySelector("#editModal").addEventListener("submit",function(e){var t,i,n=document.getElementById("collection-editor-currentreports-container");(e.target.closest("#collection-editor-edit-report-form")||e.target.closest("#collection-editor-add-report-form"))&&(e.preventDefault(),(e=e.target.closest("#collection-editor-edit-report-form")||e.target.closest("#collection-editor-add-report-form")).getAttribute("action"),(t=new XMLHttpRequest).open("post",e.getAttribute("action")+"&"+serialize(e),!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),t.onload=function(){0==(i=t.responseText).trim().length?n.innerHTML="":(n.innerHTML=i,document.dispatchEvent(new CustomEvent("code-highlight"))),document.getElementById("editorMdl-titleSave").style.visibility="visible",setTimeout(function(){document.getElementById("editorMdl-titleSave").style.removeProperty("visibility")},750),document.dispatchEvent(new CustomEvent("ajax")),document.querySelector("#editModal").dispatchEvent(new CustomEvent("mdl-open"))},e.reset(),e.querySelector(".dd-vsbl").value="",e.querySelector("#DpReportAnnotation_Rank").value="",e.querySelector(".CodeMirror")&&e.querySelector(".CodeMirror").CodeMirror.getDoc().setValue(""))}));